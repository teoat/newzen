[{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/analyst-comparison/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/api/auth/[...nextauth]/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/cases/[id]/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/cases/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":7,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[155,163],"text":""},"desc":"Remove unused variable \"Filter\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { motion } from 'framer-motion';\nimport { \n  Search, Filter, Plus, Briefcase, \n  ChevronRight, AlertTriangle, ShieldCheck, Clock \n} from 'lucide-react';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8200';\n\ninterface Case {\n    id: string;\n    title: string;\n    status: 'ACTIVE' | 'RESOLVED' | 'PENDING';\n    priority: 'HIGH' | 'MEDIUM' | 'LOW';\n    created_at: string;\n    description: string;\n}\n\nexport default function CasesPage() {\n    const [cases, setCases] = useState<Case[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [searchQuery, setSearchQuery] = useState('');\n\n    useEffect(() => {\n        const fetchCases = async () => {\n            try {\n                const res = await fetch(`${API_URL}/api/v1/cases/`, { credentials: 'include' });\n                if (res.ok) {\n                    const data = await res.json();\n                    setCases(data);\n                }\n            } catch (error) {\n                console.error(\"Failed to fetch cases:\", error);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n        fetchCases();\n    }, []);\n\n    const filteredCases = cases.filter(c => \n        c.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        c.id.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n    return (\n        <div className=\"min-h-screen bg-[#020617] text-slate-300 p-10 font-sans\">\n            <header className=\"flex justify-between items-end mb-16 px-4\">\n                <div>\n                    <h1 className=\"text-5xl font-black text-white italic tracking-tighter uppercase mb-2\">Central Case Registry</h1>\n                    <p className=\"text-slate-500 font-bold uppercase tracking-[0.3em] text-[10px]\">Forensic Management & Investigation Archive</p>\n                </div>\n                <div className=\"flex gap-4\">\n                    <div className=\"relative\">\n                        <input \n                            type=\"text\"\n                            placeholder=\"Search Dossiers...\"\n                            value={searchQuery}\n                            onChange={(e) => setSearchQuery(e.target.value)}\n                            className=\"bg-slate-900/50 border border-white/5 rounded-2xl px-12 py-4 text-xs font-bold focus:outline-none focus:border-indigo-500/50 transition-all w-80 shadow-inner\"\n                        />\n                        <Search className=\"w-4 h-4 text-slate-600 absolute left-5 top-1/2 -translate-y-1/2\" />\n                    </div>\n                    <button className=\"bg-indigo-600 hover:bg-indigo-500 text-white px-8 py-4 rounded-2xl flex items-center gap-3 text-xs font-black uppercase tracking-widest transition-all shadow-xl shadow-indigo-900/20 active:scale-95 border border-indigo-400/20\">\n                        <Plus className=\"w-4 h-4\" /> New Case\n                    </button>\n                </div>\n            </header>\n\n            <div className=\"grid grid-cols-1 gap-4\">\n                {isLoading ? (\n                    Array.from({ length: 5 }).map((_, i) => (\n                        <div key={i} className=\"h-24 bg-slate-900/20 rounded-[2rem] border border-white/5 animate-pulse\" />\n                    ))\n                ) : filteredCases.length > 0 ? (\n                    filteredCases.map((c) => (\n                        <Link key={c.id} href={`/cases/${c.id}`}>\n                            <motion.div \n                                whileHover={{ x: 10, backgroundColor: 'rgba(255,255,255,0.02)' }}\n                                className=\"bg-slate-900/30 border border-white/5 rounded-[2rem] p-8 flex items-center justify-between group transition-all cursor-pointer backdrop-blur-sm shadow-lg\"\n                            >\n                                <div className=\"flex items-center gap-8\">\n                                    <div className={`w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform ${\n                                        c.priority === 'HIGH' ? 'bg-rose-500/10 text-rose-500 border border-rose-500/20' : \n                                        c.priority === 'MEDIUM' ? 'bg-amber-500/10 text-amber-500 border border-amber-500/20' : \n                                        'bg-indigo-500/10 text-indigo-500 border border-indigo-500/20'\n                                    }`}>\n                                        <Briefcase className=\"w-6 h-6\" />\n                                    </div>\n                                    <div>\n                                        <div className=\"flex items-center gap-3 mb-2\">\n                                            <h3 className=\"text-lg font-black text-white italic tracking-tight uppercase group-hover:text-indigo-400 transition-colors\">{c.title}</h3>\n                                            <span className=\"text-[9px] font-mono text-slate-600 uppercase tracking-widest\">{c.id}</span>\n                                        </div>\n                                        <div className=\"flex items-center gap-6\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <Clock className=\"w-3.5 h-3.5 text-slate-700\" />\n                                                <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider\">{new Date(c.created_at).toLocaleDateString()}</span>\n                                            </div>\n                                            <div className=\"flex items-center gap-2\">\n                                                {c.status === 'ACTIVE' ? <AlertTriangle className=\"w-3.5 h-3.5 text-amber-500\" /> : <ShieldCheck className=\"w-3.5 h-3.5 text-emerald-500\" />}\n                                                <span className={`text-[10px] font-black uppercase tracking-widest ${c.status === 'ACTIVE' ? 'text-amber-500' : 'text-emerald-500'}`}>{c.status}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"text-right mr-8\">\n                                        <p className=\"text-[10px] font-black text-slate-600 uppercase tracking-[0.2em] mb-1\">Priority</p>\n                                        <p className={`text-xs font-black italic tracking-tighter uppercase ${\n                                            c.priority === 'HIGH' ? 'text-rose-500' : \n                                            c.priority === 'MEDIUM' ? 'text-amber-500' : \n                                            'text-indigo-400'\n                                        }`}>{c.priority}</p>\n                                    </div>\n                                    <div className=\"w-12 h-12 rounded-xl bg-slate-800/50 flex items-center justify-center text-slate-500 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-inner\">\n                                        <ChevronRight className=\"w-5 h-5\" />\n                                    </div>\n                                </div>\n                            </motion.div>\n                        </Link>\n                    ))\n                ) : (\n                    <div className=\"flex flex-col items-center justify-center py-40 opacity-20 grayscale\">\n                        <Briefcase className=\"w-24 h-24 mb-8\" />\n                        <h3 className=\"text-2xl font-black uppercase tracking-tighter\">No Cases Identified</h3>\n                        <p className=\"text-xs font-bold uppercase tracking-[0.4em] mt-4\">Forensic archive is currently clear.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/ForensicErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/ForensicPageLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/ForensicSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[786,789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[786,789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/ForensicSidebar.tsx:33:5\n  31 |\n  32 |   useEffect(() => {\n> 33 |     setMounted(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |     \n  35 |     // Subscribe to all events to track recent activity\n  36 |     const eventTypes = [","line":33,"column":5,"nodeType":null,"endLine":33,"endColumn":15}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { \n  BarChart3, \n  Terminal, \n  Search, \n  ShieldAlert, \n  LayoutDashboard,\n  Binary,\n  Layers,\n  HardHat,\n  Gavel,\n  Network,\n  Truck,\n  FileText,\n  Database,\n  Zap\n} from 'lucide-react';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { RecommendationEngine } from '@/lib/RecommendationEngine';\nimport { forensicBus } from '@/lib/ForensicEventBus';\n\nexport default function ForensicSidebar() {\n  const pathname = usePathname();\n  const [mounted, setMounted] = useState(false);\n  const { activeInvestigation } = useInvestigation();\n  const [recentEvents, setRecentEvents] = useState<Array<{ type: string; payload: any }>>([]);\n\n  useEffect(() => {\n    setMounted(true);\n    \n    // Subscribe to all events to track recent activity\n    const eventTypes = [\n      'TRANSACTION_FLAGGED', 'VENDOR_SUSPICIOUS', 'PROJECT_STALLED',\n      'OFFSHORE_TRANSFER', 'SANCTION_HIT', 'SATELLITE_DISCREPANCY', 'ASSET_DISCOVERED'\n    ] as const;\n\n    const listenerIds: string[] = [];\n\n    eventTypes.forEach(type => {\n      const id = forensicBus.subscribe(type, (event) => {\n        setRecentEvents(prev => [\n          { type: event.type, payload: event.payload },\n          ...prev.slice(0, 4) // Keep last 5 events\n        ]);\n      });\n      listenerIds.push(id);\n    });\n\n    return () => {\n      listenerIds.forEach(id => forensicBus.unsubscribe(id));\n    };\n  }, []);\n\n  if (pathname === '/login') return null;\n  if (!mounted) return null;\n\n  const navigation = [\n    { icon: LayoutDashboard, label: 'Project Command', href: '/', id: '00' },\n    { icon: Database, label: 'Evidence Ingestion', href: '/ingestion', id: '01' },\n    { icon: ShieldAlert, label: 'Reconciliation', href: '/reconciliation', id: '02' },\n    { icon: Terminal, label: 'Simulation Lab', href: '/simulation', id: '03' },\n    { icon: Layers, label: 'Site Forensic Lab', href: '/forensic/lab', id: '04' },\n    { icon: BarChart3, label: 'S-Curve & RAB', href: '/forensic/analytics', id: '05' },\n    { icon: Binary, label: 'Termin Flow Tracer', href: '/forensic/flow', id: '06' },\n    { icon: Gavel, label: 'Discrepancy Bench', href: '/investigate', id: '07' },\n    { icon: Search, label: 'Analyst Comparison', href: '/analyst-comparison', id: '08' },\n    { icon: Network, label: 'Vendor Nexus', href: '/forensic/nexus', id: '09' },\n    { icon: Truck, label: 'Asset Seizure', href: '/forensic/assets', id: '10' },\n    { icon: FileText, label: 'Legal Dossier', href: '/legal/aml', id: '11' },\n  ];\n\n  // Get smart recommendations when investigation is active\n  const recommendations = activeInvestigation \n    ? RecommendationEngine.getRecommendations(activeInvestigation)\n    : [];\n\n  return (\n    <aside className=\"w-64 bg-slate-950 border-r border-white/5 h-screen flex flex-col p-6 sticky top-0 font-sans overflow-y-auto custom-scrollbar\">\n      <div className=\"flex items-center gap-3 mb-10\">\n        <div className=\"p-2.5 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-900/40 text-white\">\n          <HardHat className=\"w-5 h-5\" />\n        </div>\n        <div className=\"flex flex-col\">\n            <span className=\"font-black text-xl tracking-tighter text-white italic leading-none\">ZENITH</span>\n            <span className=\"text-[10px] font-black text-indigo-500 uppercase tracking-[0.2em] -mt-0.5\">Commander</span>\n        </div>\n      </div>\n\n      {/* Smart Recommendations Section */}\n      {recommendations.length > 0 && (\n        <div className=\"mb-6 p-4 bg-indigo-600/10 border border-indigo-500/20 rounded-2xl\">\n          <div className=\"flex items-center gap-2 mb-3\">\n            <Zap className=\"w-4 h-4 text-indigo-400\" />\n            <span className=\"text-[10px] font-black text-indigo-400 uppercase tracking-widest\">\n              Suggested Next\n            </span>\n          </div>\n          <div className=\"space-y-2\">\n            {recommendations.slice(0, 2).map((rec, i) => (\n              <Link\n                key={i}\n                href={rec.toolPath}\n                className=\"block p-3 bg-slate-900/50 hover:bg-slate-900 rounded-xl border border-white/5 hover:border-indigo-500/30 transition-all group\"\n              >\n                <p className=\"text-xs font-bold text-white mb-1\">{rec.toolName}</p>\n                <p className=\"text-[10px] text-slate-500 leading-relaxed\">{rec.reason}</p>\n              </Link>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Main Navigation */}\n      <nav className=\"flex flex-col gap-1.5 flex-1\">\n        {navigation.map((item) => {\n          const isActive = pathname === item.href;\n          const shouldHighlight = RecommendationEngine.shouldHighlightTool(item.href, recentEvents);\n          \n          return (\n            <Link\n              key={item.id}\n              href={item.href}\n              className={`\n                group flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all text-sm font-bold\n                ${isActive \n                  ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/30' \n                  : shouldHighlight\n                    ? 'bg-rose-600/20 text-rose-300 border border-rose-500/30 animate-pulse'\n                    : 'text-slate-400 hover:text-white hover:bg-slate-900/50'\n                }\n              `}\n            >\n              <item.icon className={`w-4 h-4 shrink-0 ${isActive ? 'text-white' : shouldHighlight ? 'text-rose-400' : 'text-slate-500 group-hover:text-white'}`} />\n              <span className=\"truncate\">{item.label}</span>\n              {shouldHighlight && (\n                <div className=\"ml-auto w-2 h-2 bg-rose-500 rounded-full shadow-[0_0_8px_#f43f5e]\" />\n              )}\n            </Link>\n          );\n        })}\n      </nav>\n\n      {/* Status Footer */}\n      <div className=\"mt-6 pt-6 border-t border-white/5\">\n        <div className=\"flex items-center gap-3 px-4 py-3 bg-slate-900/50 rounded-xl\">\n          <div className=\"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_#10b981] animate-pulse\" />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-[10px] font-black text-white uppercase tracking-wider\">System Online</p>\n            <p className=\"text-[9px] text-slate-600 font-mono truncate\">v3.8.2-NEXUS</p>\n          </div>\n        </div>\n\n        {activeInvestigation && (\n          <div className=\"mt-3 px-4 py-2 bg-indigo-600/10 border border-indigo-500/20 rounded-lg\">\n            <p className=\"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1\">\n              Investigation Active\n            </p>\n            <p className=\"text-[10px] text-slate-400 font-bold truncate\">\n              {activeInvestigation.title}\n            </p>\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/HolographicBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/OnboardingModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/Providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/components/TelemetrySync.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/analytics/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/analytics/predictive/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":6,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ArrowRight"},"fix":{"range":[107,124],"text":""},"desc":"Remove unused variable \"ArrowRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":6,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":28,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[124,137],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":163,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10373,10415],"text":"\n                                        &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10373,10415],"text":"\n                                        &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10373,10415],"text":"\n                                        &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10373,10415],"text":"\n                                        &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":163,"column":65,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10438,10476],"text":"&quot;\n                                    "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10438,10476],"text":"&ldquo;\n                                    "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10438,10476],"text":"&#34;\n                                    "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10438,10476],"text":"&rdquo;\n                                    "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { \n    BrainCircuit, Activity, AlertTriangle, \n    ArrowRight, CheckCircle, Loader2, \n    TrendingUp, ShieldAlert, Zap \n} from 'lucide-react';\nimport { API_URL } from '@/utils/constants';\n\ninterface PredictionResult {\n    projectId: string;\n    leakage_probability: number;\n    stalling_risk: number;\n    risk_level: 'CRITICAL' | 'ELEVATED' | 'NOMINAL';\n    confidence_score: number;\n    risk_indicators: string[];\n    recommendation: string;\n}\n\nexport default function PredictiveAnalyticsPage() {\n    const [projectId, setProjectId] = useState('ZENITH-001');\n    const [isAnalyzing, setIsAnalyzing] = useState(false);\n    const [result, setResult] = useState<PredictionResult | null>(null);\n\n    const handlePredict = async () => {\n        setIsAnalyzing(true);\n        setResult(null);\n        try {\n            const res = await fetch(`${API_URL}/api/v1/ai/predict/risk/${projectId}`, {\n                method: 'POST'\n            });\n            if (res.ok) {\n                const data = await res.json();\n                // Simulate \"thinking\" time for effect\n                setTimeout(() => {\n                    setResult(data);\n                    setIsAnalyzing(false);\n                }, 1500);\n            } else {\n                setIsAnalyzing(false);\n            }\n        } catch (e) {\n            console.error(e);\n            setIsAnalyzing(false);\n        }\n    };\n\n    return (\n        <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex flex-col overflow-hidden selection:bg-indigo-500/30\">\n            {/* Header */}\n            <header className=\"h-20 border-b border-white/5 bg-slate-900/40 backdrop-blur-xl flex items-center justify-between px-10 shrink-0 z-50\">\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-indigo-900/20 ring-1 ring-white/10\">\n                        <BrainCircuit className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-xl font-bold text-white tracking-tight\">ZENITH Predictive Core</h1>\n                        <div className=\"flex items-center gap-3 mt-1\">\n                            <span className=\"text-[10px] bg-indigo-500/10 text-indigo-400 px-2 py-0.5 rounded border border-indigo-500/20 font-bold uppercase tracking-wider\">Neural Engine V3.0</span>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            <main className=\"flex-1 p-10 overflow-auto custom-scrollbar flex gap-10\">\n                {/* Control Panel */}\n                <div className=\"w-[400px] flex flex-col gap-6 shrink-0\">\n                    <div className=\"p-8 rounded-[2.5rem] bg-slate-900/40 border border-white/5 backdrop-blur-md\">\n                        <h2 className=\"text-sm font-black text-white uppercase tracking-widest mb-6 flex items-center gap-3\">\n                            <Activity className=\"w-4 h-4 text-indigo-400\" /> Target Parameters\n                        </h2>\n                        \n                        <div className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                                <label htmlFor=\"project-id\" className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Project ID / SKU</label>\n                                <input \n                                    id=\"project-id\"\n                                    type=\"text\" \n                                    value={projectId}\n                                    onChange={(e) => setProjectId(e.target.value)}\n                                    placeholder=\"Enter Project ID...\"\n                                    className=\"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-3 text-sm font-mono text-white focus:border-indigo-500 transition-colors outline-none\"\n                                />\n                            </div>\n\n                            <button\n                                onClick={handlePredict}\n                                disabled={isAnalyzing}\n                                className=\"w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-2xl text-white font-black text-xs uppercase tracking-[0.2em] shadow-lg shadow-indigo-900/40 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3\"\n                            >\n                                {isAnalyzing ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Zap className=\"w-4 h-4\" />}\n                                {isAnalyzing ? 'Running Inference...' : 'Engage Prediction Model'}\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"p-8 rounded-[2.5rem] bg-indigo-500/5 border border-indigo-500/10\">\n                         <h3 className=\"text-[10px] font-black text-indigo-400 uppercase tracking-widest mb-4\">Model Capabilities</h3>\n                         <ul className=\"space-y-3\">\n                             {['Historical Pattern Matching', 'Vendor Cluster Analysis', 'Stalling Probability', 'Leakage Vector Forecasting'].map(item => (\n                                 <li key={item} className=\"flex items-center gap-3 text-xs font-bold text-slate-400\">\n                                     <div className=\"w-1.5 h-1.5 rounded-full bg-indigo-500\" /> {item}\n                                 </li>\n                             ))}\n                         </ul>\n                    </div>\n                </div>\n\n                {/* Results Area */}\n                <div className=\"flex-1 rounded-[3rem] bg-slate-900/20 border border-white/5 relative overflow-hidden flex flex-col\">\n                    {result ? (\n                        <div className=\"flex-1 p-10 flex flex-col animate-in fade-in zoom-in duration-500\">\n                            <div className=\"flex items-center justify-between mb-8\">\n                                <div>\n                                    <h2 className=\"text-3xl font-black text-white italic tracking-tighter uppercase\">Assessment Complete</h2>\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-2 flex items-center gap-2\">\n                                        Confidence Score: <span className=\"text-emerald-400\">{result.confidence_score}%</span>\n                                    </p>\n                                </div>\n                                <div className={`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] border ${\n                                    result.risk_level === 'CRITICAL' ? 'bg-rose-500/10 border-rose-500/20 text-rose-500' :\n                                    result.risk_level === 'ELEVATED' ? 'bg-amber-500/10 border-amber-500/20 text-amber-500' :\n                                    'bg-emerald-500/10 border-emerald-500/20 text-emerald-500'\n                                }`}>\n                                    {result.risk_level} RISK\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-8 mb-10\">\n                                <div className=\"p-8 rounded-[2rem] bg-black/40 border border-white/5 flex flex-col items-center justify-center text-center relative overflow-hidden group\">\n                                    <div className=\"absolute inset-0 bg-rose-500/5 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                                    <TrendingUp className=\"w-8 h-8 text-rose-500 mb-4\" />\n                                    <h3 className=\"text-4xl font-black text-white mb-2\">{result.leakage_probability}%</h3>\n                                    <p className=\"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Leakage Probability</p>\n                                </div>\n                                <div className=\"p-8 rounded-[2rem] bg-black/40 border border-white/5 flex flex-col items-center justify-center text-center relative overflow-hidden group\">\n                                    <div className=\"absolute inset-0 bg-amber-500/5 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                                    <Activity className=\"w-8 h-8 text-amber-500 mb-4\" />\n                                    <h3 className=\"text-4xl font-black text-white mb-2\">{result.stalling_risk}%</h3>\n                                    <p className=\"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Project Stalling Risk</p>\n                                </div>\n                            </div>\n\n                            <div className=\"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                                <div className=\"p-8 rounded-[2rem] bg-slate-900/40 border border-white/5\">\n                                    <h4 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6 flex items-center gap-2\">\n                                        <ShieldAlert className=\"w-4 h-4\" /> Detected Risk Vectors\n                                    </h4>\n                                    <div className=\"space-y-4\">\n                                        {result.risk_indicators.map((indicator, idx) => (\n                                            <div key={idx} className=\"flex items-start gap-4 p-4 rounded-xl bg-white/5 border border-white/5\">\n                                                <AlertTriangle className=\"w-5 h-5 text-rose-400 shrink-0 mt-0.5\" />\n                                                <p className=\"text-xs font-bold text-slate-300 leading-relaxed\">{indicator}</p>\n                                            </div>\n                                        ))}\n                                    </div>\n                                </div>\n\n                                <div className=\"p-8 rounded-[2rem] bg-emerald-600/5 border border-emerald-500/20 flex flex-col justify-center\">\n                                    <h4 className=\"text-[10px] font-black text-emerald-400 uppercase tracking-widest mb-4\">AI Recommendation</h4>\n                                    <p className=\"text-lg font-bold text-white leading-relaxed italic\">\n                                        \"{result.recommendation}\"\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex-1 flex flex-col items-center justify-center text-center opacity-30\">\n                            {isAnalyzing ? (\n                                <div className=\"flex flex-col items-center\">\n                                    <Loader2 className=\"w-16 h-16 text-indigo-500 animate-spin mb-6\" />\n                                    <h3 className=\"text-2xl font-black text-white uppercase tracking-widest animate-pulse\">Processing...</h3>\n                                </div>\n                            ) : (\n                                <>\n                                    <BrainCircuit className=\"w-24 h-24 text-slate-500 mb-6\" />\n                                    <h3 className=\"text-xl font-black text-white uppercase tracking-widest mb-2\">Awaiting Input</h3>\n                                    <p className=\"text-xs font-bold text-slate-500 uppercase tracking-widest\">Select a target project to begin analysis</p>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/assets/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ASSET_RECOVERY_MOCK' is defined but never used.","line":13,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":29,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"ASSET_RECOVERY_MOCK"},"fix":{"range":[336,395],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":65,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1774,1777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1774,1777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Truck, ShieldCheck, MapPin, \n  ChevronRight, ArrowRight, Lock, \n  Unlock, Network, Briefcase, \n  Activity, AlertCircle,\n  Clock, Hash, ChevronLeft\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { ASSET_RECOVERY_MOCK } from '@/utils/recoveryMock';\n\nimport DossierGenerator from '@/components/DossierGenerator';\n\ninterface UBONode {\n  id: string;\n  role: string;\n  level: number;\n  type: 'PERSON' | 'COMPANY';\n  name: string;\n}\n\ninterface Asset {\n  id: string;\n  name: string;\n  type: string;\n  location: string;\n  owner: string;\n  value: number;\n  status: 'ACTIVE' | 'FROZEN';\n  discovery_path: string;\n}\n\ninterface AssetData {\n  recovery_pot: number;\n  frozen_value: number;\n  readiness: number;\n  ubo_nodes: UBONode[];\n  assets: Asset[];\n}\n\n\n\nimport { API_URL } from '@/utils/constants';\n\nexport default function AssetRecoveryPage() {\n  const [projectId] = useState<string>('PRJ-2024-NEXUS');\n  const [data, setData] = useState<AssetData | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(`${API_URL}/api/v1/forensic/recovery-profile/${projectId}`);\n        if (!res.ok) throw new Error('Failed to fetch recovery profile');\n        const rawData = await res.json();\n        \n        // Map backend response to frontend AssetData structure\n        const mappedData: AssetData = {\n            recovery_pot: rawData.visual_leakage_recovery_pot || 0,\n            frozen_value: rawData.frozen_assets_value || 0,\n            readiness: rawData.readiness_score || 0,\n            assets: (rawData.assets || []).map((a: any) => ({\n                id: a.id,\n                name: a.name,\n                type: a.type,\n                location: a.location || 'Unknown Site',\n                owner: a.owner,\n                value: a.value,\n                status: a.status,\n                discovery_path: `Suspicion triggered via Temporal Nexus (${(a.temporal_nexus * 100).toFixed(0)}% confidence)`\n            })),\n            // UBO nodes would ideally come from /ubo/{entity_id} for the primary suspect\n            ubo_nodes: [\n                { id: '1', role: 'Ultimate Controller', level: 1, type: 'PERSON', name: 'Director X' },\n                { id: '2', role: 'Shell Proxy', level: 2, type: 'COMPANY', name: 'PT Global Supplies' },\n                { id: '3', role: 'Operating Entity', level: 3, type: 'COMPANY', name: 'PT Mega Construction' }\n            ]\n        };\n        setData(mappedData);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [projectId]);\n\n  const toggleFreeze = async (id: string, currentStatus: string) => {\n    // In a real app, this would hit a PATCH endpoint\n    const newStatus = currentStatus === 'FROZEN' ? 'ACTIVE' : 'FROZEN';\n    setData((prev: AssetData | null) => {\n        if (!prev) return null;\n        return {\n            ...prev,\n            assets: prev.assets.map((a: Asset) => \n                a.id === id ? { ...a, status: newStatus as 'ACTIVE' | 'FROZEN' } : a\n            )\n        };\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-[#020617] text-slate-200 p-8 space-y-8 font-sans overflow-x-hidden\">\n      {loading && (\n        <div className=\"absolute inset-0 bg-[#020617]/80 backdrop-blur-sm z-[100] flex items-center justify-center\">\n            <div className=\"flex flex-col items-center gap-4\">\n                <div className=\"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin\" />\n                <span className=\"text-[10px] font-black text-indigo-400 uppercase tracking-widest animate-pulse\">Synchronizing Recovery Vault...</span>\n            </div>\n        </div>\n      )}\n\n      {/* Header Section */}\n      <header className=\"flex justify-between items-start\">\n        <div className=\"space-y-1\">\n          <Link href=\"/\" className=\"inline-flex items-center gap-2 text-[10px] font-mono font-bold text-slate-500 hover:text-indigo-400 uppercase tracking-widest mb-4 transition-colors group\">\n              <ChevronLeft className=\"w-3 h-3 group-hover:-translate-x-1 transition-transform\" />\n              Back to War Room\n          </Link>\n          <div className=\"flex items-center gap-3\">\n             <div className=\"p-3 bg-rose-600 rounded-2xl shadow-xl shadow-rose-900/20 text-white\">\n                <ShieldCheck className=\"w-6 h-6\" />\n             </div>\n             <div>\n                <h1 className=\"text-3xl font-black text-white italic tracking-tighter uppercase leading-none\">V4: Eclipse // Recovery Workspace</h1>\n                <p className=\"text-[10px] font-mono text-slate-500 uppercase tracking-[0.3em] font-black italic mt-1\">Beneficial Ownership & Asset Seizure Protocol</p>\n             </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-4\">\n              <div className=\"glass-panel px-6 py-4 rounded-[1.5rem] bg-indigo-600/5 border-indigo-500/10 flex flex-col items-end\">\n                <span className=\"text-[9px] font-black text-indigo-400 uppercase tracking-widest mb-1\">Total Recovery Potential</span>\n                <span className=\"text-xl font-black text-white font-mono\">Rp {data ? (data.recovery_pot / 1000000000).toFixed(1) : '0'} B</span>\n             </div>\n             <div className=\"glass-panel px-6 py-4 rounded-[1.5rem] bg-rose-600/5 border-rose-500/10 flex flex-col items-end\">\n                <span className=\"text-[9px] font-black text-rose-400 uppercase tracking-widest mb-1\">Assets Frozen Value</span>\n                <span className=\"text-xl font-black text-rose-500 font-mono\">Rp {data ? (data.frozen_value / 1000000000).toFixed(1) : '0'} B</span>\n             </div>\n        </div>\n      </header>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        \n        {/* Left Col: UBO Resolver & Corporate Layers */}\n        <div className=\"lg:col-span-2 space-y-8\">\n            <div className=\"glass-panel p-10 rounded-[3rem] border border-white/5 bg-slate-900/40 relative overflow-hidden h-[500px] flex flex-col\">\n                <div className=\"flex justify-between items-center mb-10 shrink-0\">\n                    <h2 className=\"text-lg font-black text-white flex items-center gap-3 uppercase tracking-tight\">\n                        <Network className=\"w-5 h-5 text-indigo-500\" /> Beneficial Ownership Resolver\n                    </h2>\n                    <div className=\"flex gap-4 text-[10px] font-black uppercase tracking-widest\">\n                        <span className=\"text-emerald-400 flex items-center gap-2\"><div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_#10b981]\" /> AHU-DATA Verified</span>\n                    </div>\n                </div>\n\n                <div className=\"flex-1 flex flex-col justify-center relative\">\n                    {/* The Ownership Pipe */}\n                    <div className=\"absolute left-1/2 top-4 bottom-4 w-px bg-white/5 -translate-x-1/2\" />\n                    \n                    <div className=\"space-y-12 relative z-10\">\n                        {data?.ubo_nodes.map((node: UBONode, idx: number) => (\n                            <motion.div \n                                key={node.id}\n                                initial={{ opacity: 0, y: 20 }}\n                                animate={{ opacity: 1, y: 0 }}\n                                transition={{ delay: idx * 0.1 }}\n                                className={`flex items-center gap-6 ${idx % 2 === 0 ? 'flex-row' : 'flex-row-reverse'} relative`}\n                            >\n                                {/* Marker */}\n                                <div className=\"absolute left-1/2 -translate-x-1/2 w-3 h-3 rounded-full bg-indigo-600 border-2 border-slate-900 outline outline-4 outline-indigo-900/20 shadow-[0_0_15px_#6366f1]\" />\n                                \n                                <div className={`w-[45%] flex flex-col ${idx % 2 === 0 ? 'items-end' : 'items-start'}`}>\n                                    <span className=\"text-[10px] font-mono text-slate-500 uppercase tracking-widest mb-1\">{node.role} (Level {node.level})</span>\n                                    <div className={`p-5 rounded-2xl glass-panel border border-white/5 w-full flex items-center gap-4 hover:border-white/20 transition-all ${node.type === 'PERSON' ? 'bg-indigo-600/10' : 'bg-slate-950/80'} shadow-2xl`}>\n                                        <div className={`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${node.type === 'PERSON' ? 'bg-indigo-600 text-white' : 'bg-slate-800 text-slate-400'}`}>\n                                           {node.type === 'PERSON' ? <Activity className=\"w-5 h-5\" /> : <Briefcase className=\"w-5 h-5\" />}\n                                        </div>\n                                        <div>\n                                            <div className=\"text-xs font-black text-white uppercase tracking-tight\">{node.name}</div>\n                                            <div className=\"text-[10px] text-slate-500 font-bold uppercase mt-0.5\">{node.type} â€¢ {idx === 0 ? 'Ultimate Controller' : `Intermediary Layer`}</div>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                {idx < (data?.ubo_nodes.length ?? 0) - 1 && (\n                                    <div className={`w-[45%] text-[10px] font-black uppercase italic tracking-widest text-slate-600 ${idx % 2 === 0 ? 'text-left' : 'text-right'}`}>\n                                        {idx === 0 ? 'OWNS 100% OF SHARE CAPITAL' : `PARENT ENTITY (95% STAKE)`}\n                                    </div>\n                                )}\n                            </motion.div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* Asset Map / Discovery Breadcrumbs */}\n            <div className=\"glass-panel p-10 rounded-[3rem] border border-white/5 bg-slate-900/40\">\n                <div className=\"flex items-center gap-4 mb-8\">\n                     <div className=\"p-3 bg-amber-500/10 rounded-xl\">\n                        <MapPin className=\"w-6 h-6 text-amber-500\" />\n                     </div>\n                     <div>\n                        <h3 className=\"text-xl font-black text-white italic uppercase tracking-tighter\">Asset Discovery Ledger</h3>\n                        <p className=\"text-[9px] font-mono text-slate-600 uppercase tracking-widest mt-1\">Multi-hop Financial Pathfinding</p>\n                     </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                    {data?.assets.map((asset: Asset) => (\n                        <div key={asset.id} className=\"p-6 rounded-3xl bg-black/20 border border-white/5 flex items-center justify-between group hover:bg-black/30 transition-all\">\n                             <div className=\"flex items-center gap-6\">\n                                <div className=\"text-[8px] font-mono text-slate-600 tracking-tighter leading-none shrink-0 w-16\">\n                                    FOUND VIA<br/><span className=\"text-[10px] font-black text-indigo-500 uppercase mt-1 inline-block\">TERMIN FLOW</span>\n                                </div>\n                                <div className=\"w-px h-10 bg-white/5\" />\n                                 <p className=\"text-xs font-bold text-slate-400 max-w-lg leading-relaxed italic\">\n                                     &quot;{asset.discovery_path}&quot;\n                                 </p>\n                             </div>\n                             <div className=\"w-10 h-10 rounded-full border border-white/5 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                                <ArrowRight className=\"w-4 h-4 text-slate-600\" />\n                             </div>\n                        </div>\n                    ))}\n                </div>\n            </div>\n        </div>\n\n        {/* Right Col: Recovery Cabinet (Cards) */}\n        <div className=\"space-y-8\">\n            {/* New Dossier Generator Feature */}\n            <DossierGenerator projectId={projectId} />\n\n            <h2 className=\"text-lg font-black text-white flex items-center gap-3 uppercase tracking-tight ml-4\">\n                <Truck className=\"w-5 h-5 text-rose-500\" /> Seizure Cabinet\n            </h2>\n\n            <div className=\"space-y-6\">\n                {data?.assets.map((asset: Asset) => (\n                    <motion.div \n                        key={asset.id}\n                        layout\n                        className={`glass-panel p-8 rounded-[2.5rem] border border-white/5 bg-slate-900/40 relative overflow-hidden transition-all duration-500 ${asset.status === 'FROZEN' ? 'ring-2 ring-rose-600/50 grayscale-[0.8]' : 'hover:border-white/20'}`}\n                    >\n                        {/* Status Overlay for Frozen */}\n                        <AnimatePresence>\n                            {asset.status === 'FROZEN' && (\n                                <motion.div \n                                    initial={{ opacity: 0 }} animate={{ opacity: 1 }}\n                                    className=\"absolute inset-0 bg-rose-600/10 backdrop-blur-[2px] z-10 flex items-center justify-center pointer-events-none\"\n                                >\n                                    <div className=\"px-6 py-2 bg-rose-600 text-white font-black uppercase text-[10px] tracking-widest rounded-full shadow-[0_0_20px_#e11d48]\">\n                                        ASSET SEIZED & FROZEN\n                                    </div>\n                                </motion.div>\n                            )}\n                        </AnimatePresence>\n\n                        <div className=\"relative z-20\">\n                            <div className=\"flex justify-between items-start mb-6\">\n                                <div>\n                                    <div className=\"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1\">{asset.type}</div>\n                                    <h4 className=\"text-lg font-black text-white uppercase tracking-tight leading-tight\">{asset.name}</h4>\n                                </div>\n                                <button title=\"Toggle Asset Freeze\"\n                                    onClick={() => toggleFreeze(asset.id, asset.status)}\n                                    className={`w-12 h-12 rounded-2xl flex items-center justify-center transition-all active:scale-95 ${asset.status === 'FROZEN' ? 'bg-indigo-600 text-white' : 'bg-rose-600/10 text-rose-500 hover:bg-rose-600 hover:text-white'}`}\n                                >\n                                    {asset.status === 'FROZEN' ? <Unlock className=\"w-5 h-5\" /> : <Lock className=\"w-5 h-5\" />}\n                                </button>\n                            </div>\n\n                            <div className=\"space-y-4 mb-8\">\n                                <div className=\"flex items-center gap-3 text-slate-400\">\n                                    <MapPin className=\"w-3.5 h-3.5\" />\n                                    <span className=\"text-[10px] font-bold uppercase tracking-tight\">{asset.location}</span>\n                                </div>\n                                <div className=\"flex items-center gap-3 text-slate-400\">\n                                    <Activity className=\"w-3.5 h-3.5\" />\n                                    <span className=\"text-[10px] font-bold uppercase tracking-tight\">Owner: {asset.owner}</span>\n                                </div>\n                            </div>\n\n                            <div className=\"pt-6 border-t border-white/5 flex items-end justify-between\">\n                                 <div>\n                                    <div className=\"text-[9px] font-black text-slate-600 uppercase tracking-widest mb-1\">Est. Appraisal</div>\n                                    <div className={`text-xl font-black font-mono tracking-tighter ${asset.status === 'FROZEN' ? 'text-indigo-400' : 'text-emerald-400'}`}>\n                                        Rp {(asset.value / 1000000).toLocaleString()} M\n                                    </div>\n                                 </div>\n                                 <button title=\"View Asset Details\" className=\"p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-all\">\n                                    <ChevronRight className=\"w-4 h-4 text-slate-400\" />\n                                 </button>\n                            </div>\n                        </div>\n                    </motion.div>\n                ))}\n            </div>\n\n            {/* Quick Stats Summary */}\n            <div className=\"glass-panel p-8 rounded-[2.5rem] border border-rose-500/20 bg-rose-500/5 mt-10\">\n                 <div className=\"flex items-center gap-3 mb-4\">\n                    <AlertCircle className=\"w-5 h-5 text-rose-500\" />\n                    <h5 className=\"text-[10px] font-black text-white uppercase tracking-widest\">Recovery Readiness</h5>\n                 </div>\n                 <div className=\"h-2 w-full bg-rose-950/50 rounded-full overflow-hidden mb-4 border border-rose-500/10\">\n                    <motion.div \n                        initial={{ width: 0 }} \n                        animate={{ width: `${data?.readiness ?? 0}%` }}\n                        className=\"h-full bg-rose-500 shadow-[0_0_15px_#f43f5e]\" \n                    />\n                 </div>\n                 <p className=\"text-[10px] text-slate-500 leading-relaxed font-bold italic\">\n                    Current seizure operations cover <span className=\"text-white\">36.0%</span> of total project leakage discovered through V1-V3.\n                 </p>\n            </div>\n        </div>\n      </div>\n\n      {/* Footer Audit Trail */}\n      <footer className=\"pt-10 border-t border-white/5 flex items-center justify-between text-[10px] font-mono text-slate-600 uppercase tracking-widest italic\">\n        <div className=\"flex items-center gap-4\">\n            <span className=\"flex items-center gap-2 animate-pulse\"><Clock className=\"w-3 h-3\" /> System Live: Track-and-Trace Active</span>\n            <span className=\"w-1 h-1 bg-slate-800 rounded-full\" />\n            <span>Last AHU-Sync: Oct 27, 2024</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n            <Hash className=\"w-3.5 h-3.5\" /> EVIDENCE_ID_RECOVERY_SEIZURE_PROTOCOL_B_ALPHA\n        </div>\n      </footer>\n\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/flow/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/lab/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/map/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/nexus/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HolographicBadge' is defined but never used.","line":7,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":24,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"HolographicBadge"},"fix":{"range":[227,292],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchGraph'. Either include it or remove the dependency array.","line":67,"column":6,"nodeType":"ArrayExpression","endLine":67,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [activeProjectId, fetchGraph]","fix":{"range":[1974,1991],"text":"[activeProjectId, fetchGraph]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Network, Search, Zap, User, Building, Landmark, AlertTriangle, Filter } from 'lucide-react';\n\nimport HolographicBadge from '@/app/components/HolographicBadge';\nimport { HOLOGRAPHIC_SOURCE } from '@/utils/holographicData';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8200';\n\nimport { useProject } from '@/store/useProject';\nimport ForensicPageLayout from '@/app/components/ForensicPageLayout';\n\ntype Node = {\n  id: string;\n  label: string;\n  type: 'person' | 'company' | 'bank' | 'unknown';\n  risk: number;\n  x: number;\n  y: number;\n};\n\ntype Link = {\n  source: string;\n  target: string;\n  value: number;\n  type: string;\n};\n\nexport default function NexusGraphPage() {\n  const { activeProjectId } = useProject();\n  const [nodes, setNodes] = useState<Node[]>([]);\n  const [links, setLinks] = useState<Link[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedNode, setSelectedNode] = useState<Node | null>(null);\n\n  const isMock = nodes.length === 0 && !loading;\n\n  const fetchGraph = async () => {\n    if (!activeProjectId) return;\n\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_URL}/api/v1/forensic/nexus/${activeProjectId}`);\n      // Fallback to simpler endpoint if project-specific one fails or isn't ready\n      const data = res.ok ? await res.json() : null;\n\n      if (data && data.nodes && data.nodes.length > 0) {\n        setNodes(data.nodes);\n        setLinks(data.links);\n      } else {\n        setNodes(HOLOGRAPHIC_SOURCE.nexus.nodes);\n        setLinks(HOLOGRAPHIC_SOURCE.nexus.links);\n      }\n    } catch (err) {\n      console.error(\"Failed to fetch nexus graph:\", err);\n      setNodes(HOLOGRAPHIC_SOURCE.nexus.nodes);\n      setLinks(HOLOGRAPHIC_SOURCE.nexus.links);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchGraph();\n  }, [activeProjectId]);\n\n  const getNodeIcon = (type: string) => {\n    switch (type) {\n      case 'person': return User;\n      case 'company': return Building;\n      case 'bank': return Landmark;\n      default: return AlertTriangle;\n    }\n  };\n\n  return (\n    <ForensicPageLayout\n        title=\"Vendor Nexus\"\n        subtitle=\"Project Alpha Relationship Topology & Leakage Propagation\"\n        icon={Network}\n        isMockData={isMock}\n        headerActions={\n            <div className=\"flex gap-4\">\n                 <button \n                    onClick={fetchGraph}\n                    className=\"bg-slate-900 border border-white/10 rounded-2xl px-6 py-3 flex items-center gap-3 hover:bg-white/5 transition-all shadow-xl\"\n                 >\n                    <div className=\"w-2.5 h-2.5 rounded-full bg-indigo-500 animate-pulse\" />\n                    <span className=\"text-xs font-black uppercase tracking-widest text-indigo-400\">Re-Infer Topology</span>\n                 </button>\n                  <button \n                     className=\"glass-panel p-3 rounded-2xl border border-white/5 text-slate-400\" \n                     title=\"Filter Topology\"\n                     aria-label=\"Filter Topology\"\n                  >\n                     <Filter className=\"w-5 h-5\" />\n                  </button>\n            </div>\n        }\n    >\n      {/* Graph Area */}\n      <div className=\"relative w-full h-[650px] border border-white/5 rounded-[2.5rem] bg-slate-950/50 backdrop-blur-3xl overflow-hidden group mb-8 shadow-[0_0_50px_rgba(0,0,0,0.5)] m-8 max-w-[calc(100%-4rem)]\">\n         {/* Grid Background */}\n          <div className=\"absolute inset-0 opacity-[0.03] nexus-grid-bg\" />\n         \n         <AnimatePresence>\n            {loading ? (\n            <motion.div \n                initial={{ opacity: 0 }}\n                animate={{ opacity: 1 }}\n                exit={{ opacity: 0 }}\n                className=\"absolute inset-0 flex flex-col items-center justify-center bg-slate-950/80 z-50 backdrop-blur-sm\"\n            >\n                <div className=\"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-6\" />\n                <span className=\"text-indigo-400 font-mono text-xs uppercase tracking-[0.5em] animate-pulse\">Tracing Capital Flows...</span>\n            </motion.div>\n            ) : null}\n         </AnimatePresence>\n\n         <div className=\"absolute inset-0 p-10 cursor-grab active:cursor-grabbing\">\n            <svg className=\"w-full h-full\"> \n               <defs>\n                  <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\" refX=\"28\" refY=\"3.5\" orient=\"auto\">\n                    <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#334155\" />\n                  </marker>\n               </defs>\n                {(nodes.length > 0 ? links : HOLOGRAPHIC_SOURCE.nexus.links).map((link, i) => {\n                  const source = (nodes.length > 0 ? nodes : HOLOGRAPHIC_SOURCE.nexus.nodes).find(n => n.id === link.source);\n                  const target = (nodes.length > 0 ? nodes : HOLOGRAPHIC_SOURCE.nexus.nodes).find(n => n.id === link.target);\n                  if (!source || !target) return null;\n                  \n                  const x1 = source.x;\n                  const y1 = source.y;\n                  const x2 = target.x;\n                  const y2 = target.y;\n\n                  const midX = (x1 + x2) / 2;\n                  const midY = (y1 + y2) / 2;\n\n                  return (\n                    <g key={i} className=\"group/link\">\n                      <motion.line \n                         initial={{ pathLength: 0, opacity: 0 }}\n                         animate={{ pathLength: 1, opacity: 0.4 }}\n                         x1={x1 + '%'} y1={y1 + '%'} x2={x2 + '%'} y2={y2 + '%'} \n                         stroke={link.type === 'Funneling' ? '#f43f5e' : '#6366f1'} \n                         strokeWidth={link.type === 'Funneling' ? 4 : 2} \n                         strokeDasharray={link.type === 'Funneling' ? \"8,4\" : \"0\"}\n                         markerEnd=\"url(#arrowhead)\"\n                         className=\"transition-all group-hover/link:opacity-100 group-hover/link:stroke-white cursor-pointer\"\n                      />\n                      {/* Interactive Edge Label */}\n                      <foreignObject \n                        x={`${midX}%`} \n                        y={`${midY}%`} \n                        width=\"80\" \n                        height=\"30\" \n                        className=\"overflow-visible pointer-events-none opacity-0 group-hover/link:opacity-100 transition-opacity\"\n                        style={{ transform: 'translate(-40px, -15px)' }}\n                      >\n                        <div className=\"bg-slate-900/90 border border-white/20 backdrop-blur-md px-2 py-1 rounded-lg text-[8px] font-black text-white text-center shadow-2xl\">\n                          Rp {(link.value / 1000000).toFixed(1)}M\n                        </div>\n                      </foreignObject>\n                    </g>\n                  );\n                })}\n            </svg>\n            \n            {/* Nodes Layer */}\n            {(nodes.length > 0 ? nodes : HOLOGRAPHIC_SOURCE.nexus.nodes).map((node) => {\n               const Icon = getNodeIcon(node.type);\n               const isSelected = selectedNode?.id === node.id;\n               return (\n                 <motion.div\n                   key={node.id}\n                   initial={{ scale: 0, opacity: 0 }}\n                   animate={{ scale: 1, opacity: 1 }}\n                   whileHover={{ scale: 1.2, zIndex: 30 }}\n                   className={`absolute w-14 h-14 -ml-7 -mt-7 rounded-2xl border-2 flex flex-col items-center justify-center cursor-pointer transition-all duration-300 ${\n                      isSelected ? 'ring-4 ring-indigo-500/30 border-white bg-indigo-600 scale-110 shadow-indigo-500/50' :\n                      node.risk > 0.8 ? 'bg-rose-500/20 border-rose-500 shadow-[0_0_30px_rgba(244,63,94,0.4)] animate-pulse' : \n                      node.id.startsWith('proj_') ? 'bg-indigo-600 border-indigo-400 shadow-indigo-900/50 w-20 h-20 -ml-10 -mt-10 rounded-[2rem]' :\n                      'bg-slate-900 border-white/10 shadow-black'\n                   }`}\n                   style={{ left: `${node.x}%`, top: `${node.y}%` }}\n                   onClick={() => setSelectedNode(node)}\n                 >\n                    <Icon className={`w-6 h-6 ${node.risk > 0.8 ? 'text-rose-400' : 'text-white'}`} />\n                    \n                    {/* Node Label */}\n                    <div className={`absolute top-16 whitespace-nowrap bg-slate-900/90 border border-white/5 backdrop-blur-md px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${isSelected ? 'text-indigo-400 border-indigo-500/50' : 'text-slate-400 group-hover:text-white transition-colors'}`}>\n                      {node.label}\n                    </div>\n\n                    {node.risk > 0.8 && (\n                        <div className=\"absolute -top-2 -right-2 bg-rose-600 text-white text-[8px] font-black px-1.5 py-0.5 rounded-full animate-bounce\">\n                            RISK\n                        </div>\n                    )}\n                 </motion.div>\n               );\n            })}\n         </div>\n\n         {/* Legend */}\n         <div className=\"absolute bottom-8 left-8 flex flex-col gap-2 bg-black/40 backdrop-blur-xl p-4 rounded-2xl border border-white/5\">\n            <div className=\"flex items-center gap-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\n                <div className=\"w-3 h-3 bg-indigo-600 rounded-lg\" /> Project Root\n            </div>\n            <div className=\"flex items-center gap-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\n                <div className=\"w-3 h-3 bg-rose-500/50 border border-rose-500 rounded-lg\" /> High Risk Entity\n            </div>\n            <div className=\"flex items-center gap-3 text-[10px] font-bold text-slate-400 uppercase tracking-widest\">\n                <div className=\"w-3 h-1 bg-rose-500 rounded-full\" /> Kickback Funnel\n            </div>\n         </div>\n      </div>\n\n      {/* Details Panel */}\n      <AnimatePresence>\n        {selectedNode && (\n          <motion.div \n            initial={{ x: 400, opacity: 0 }}\n            animate={{ x: 0, opacity: 1 }}\n            exit={{ x: 400, opacity: 0 }}\n            className=\"fixed top-32 right-8 w-[400px] glass-panel p-8 rounded-[2rem] border border-white/10 shadow-[0_20px_60px_rgba(0,0,0,0.8)] z-50 backdrop-blur-3xl\"\n          >\n             <div className=\"flex justify-between items-start mb-8\">\n                <div className=\"flex items-center gap-4\">\n                   <div className={`p-4 rounded-2xl ${selectedNode.risk > 0.8 ? 'bg-rose-600 shadow-rose-900/40' : 'bg-indigo-600 shadow-indigo-900/40'}`}>\n                      {React.createElement(getNodeIcon(selectedNode.type), { className: 'w-6 h-6 text-white' })}\n                   </div>\n                   <div>\n                      <h3 className=\"font-black text-white text-xl uppercase tracking-tighter leading-none\">{selectedNode.label}</h3>\n                      <p className=\"text-[10px] text-slate-500 uppercase tracking-[0.2em] mt-1 font-bold\">{selectedNode.type} Intelligence Data</p>\n                   </div>\n                </div>\n                <button \n                  onClick={() => setSelectedNode(null)} \n                  title=\"Close Intelligence Panel\"\n                  aria-label=\"Close Intelligence Panel\"\n                  className=\"p-2 hover:bg-white/10 rounded-xl text-slate-500 transition-colors\"\n                >\n                  âœ•\n                </button>\n             </div>\n             \n             <div className=\"space-y-6\">\n                <div className=\"p-5 bg-white/[0.03] rounded-[1.5rem] border border-white/5\">\n                   <div className=\"flex justify-between items-center mb-1\">\n                      <span className=\"text-[10px] font-black uppercase text-slate-500 tracking-widest\">Forensic Risk Score</span>\n                      <span className={`text-2xl font-black font-mono ${selectedNode.risk > 0.8 ? 'text-rose-500' : 'text-emerald-500'}`}>\n                         {(selectedNode.risk * 100).toFixed(0)}%\n                      </span>\n                   </div>\n                   <div className=\"w-full h-1.5 bg-slate-800 rounded-full overflow-hidden\">\n                      <motion.div \n                        initial={{ width: 0 }}\n                        animate={{ width: `${selectedNode.risk * 100}%` }}\n                        className={`h-full ${selectedNode.risk > 0.8 ? 'bg-rose-500' : 'bg-emerald-500'}`}\n                      />\n                   </div>\n                </div>\n                \n                <div>\n                   <h4 className=\"text-[10px] uppercase font-black text-slate-500 mb-4 tracking-widest px-2\">Flow Intersections</h4>\n                   <div className=\"space-y-2 max-h-[250px] overflow-y-auto pr-2 custom-scrollbar\">\n                      {(nodes.length > 0 ? links : HOLOGRAPHIC_SOURCE.nexus.links).filter(l => l.source === selectedNode.id || l.target === selectedNode.id).map((l, i) => (\n                        <div key={i} className=\"flex justify-between items-center p-4 rounded-2xl bg-white/[0.02] border border-white/5 hover:bg-white/5 transition-colors group\">\n                           <div className=\"flex flex-col\">\n                              <span className=\"text-[10px] font-black text-indigo-400 uppercase tracking-tighter\">\n                                {l.source === selectedNode.id ? 'Outbound Flow' : 'Inbound Flow'}\n                              </span>\n                              <span className=\"text-xs font-bold text-slate-200 mt-0.5\">\n                                {l.source === selectedNode.id ? (nodes.length > 0 ? nodes : HOLOGRAPHIC_SOURCE.nexus.nodes).find(n => n.id === l.target)?.label : (nodes.length > 0 ? nodes : HOLOGRAPHIC_SOURCE.nexus.nodes).find(n => n.id === l.source)?.label}\n                              </span>\n                           </div>\n                           <div className=\"text-right\">\n                              <div className=\"text-sm font-black text-white\">Rp {(l.value / 1000000).toFixed(1)}M</div>\n                              <div className=\"text-[9px] uppercase font-bold text-slate-600\">{l.type}</div>\n                           </div>\n                        </div>\n                      ))}\n                      {links.filter(l => l.source === selectedNode.id || l.target === selectedNode.id).length === 0 && (\n                          <div className=\"text-center py-6 text-slate-600 italic text-xs uppercase tracking-widest font-bold\">No mapped flows found</div>\n                      )}\n                   </div>\n                </div>\n\n                <div className=\"flex gap-4\">\n                    <button className=\"flex-1 py-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-2xl text-xs font-black uppercase tracking-widest transition-all shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3\">\n                    <Zap className=\"w-4 h-4\" /> Deep Trace\n                    </button>\n                    <button \n                      className=\"p-4 bg-white/5 hover:bg-white/10 text-white rounded-2xl border border-white/5 transition-all\"\n                      title=\"Search Asset Registry\"\n                      aria-label=\"Search Asset Registry\"\n                    >\n                        <Search className=\"w-4 h-4 text-slate-400\" />\n                    </button>\n                </div>\n             </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </ForensicPageLayout>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/recovery/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":36,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[39,50],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'i' is defined but never used.","line":135,"column":64,"nodeType":"Identifier","messageId":"unusedVar","endLine":135,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { \n    Radar, Share2, DollarSign, \n    ArrowRight, Lock, Loader2, \n    Database, Globe, Target\n} from 'lucide-react';\nimport { API_URL } from '@/utils/constants';\n\ninterface TraceNode {\n    id: string;\n    label: string;\n    type: 'FIAT' | 'ENTITY' | 'CRYPTO' | 'OFFSHORE' | 'ASSET';\n    risk: number;\n}\n\ninterface TraceLink {\n    source: string;\n    target: string;\n    value: number;\n    currency: string;\n}\n\ninterface RecoverResult {\n    trace_id: string;\n    confidence: number;\n    recoverable_amount_estimate: number;\n    graph: {\n        nodes: TraceNode[];\n        links: TraceLink[];\n    };\n}\n\nexport default function AssetRecoveryPage() {\n    const [projectId, setProjectId] = useState('ZENITH-001');\n    const [isTracing, setIsTracing] = useState(false);\n    const [result, setResult] = useState<RecoverResult | null>(null);\n\n    const handleTrace = async () => {\n        setIsTracing(true);\n        setResult(null);\n        try {\n            const res = await fetch(`${API_URL}/api/v1/forensic-tools/recovery/trace/${projectId}`);\n            if (res.ok) {\n                const data = await res.json();\n                setTimeout(() => {\n                    setResult(data);\n                    setIsTracing(false);\n                }, 2000);\n            } else {\n                setIsTracing(false);\n            }\n        } catch (e) {\n            console.error(e);\n            setIsTracing(false);\n        }\n    };\n\n    // Helper to format currency\n    const fmt = (n: number) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(n);\n\n    return (\n        <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex flex-col overflow-hidden\">\n             {/* Header */}\n             <header className=\"h-20 border-b border-white/5 bg-slate-900/40 backdrop-blur-xl flex items-center justify-between px-10 shrink-0 z-50\">\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"w-12 h-12 bg-cyan-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-cyan-900/20 ring-1 ring-white/10\">\n                        <Radar className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-xl font-bold text-white tracking-tight\">Flux Capital Tracer</h1>\n                        <div className=\"flex items-center gap-3 mt-1\">\n                            <span className=\"text-[10px] bg-cyan-500/10 text-cyan-400 px-2 py-0.5 rounded border border-cyan-500/20 font-bold uppercase tracking-wider\">Multi-Ledger Recovery</span>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            <main className=\"flex-1 flex overflow-hidden\">\n                {/* Control Panel */}\n                <div className=\"w-96 border-r border-white/5 bg-slate-950/50 p-8 flex flex-col gap-8 shrink-0\">\n                    <div className=\"space-y-4\">\n                        <label htmlFor=\"project-id\" className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\">\n                             <Target className=\"w-3 h-3\" /> Target Project\n                        </label>\n                        <input \n                            id=\"project-id\"\n                            type=\"text\"\n                            value={projectId}\n                            onChange={(e) => setProjectId(e.target.value)}\n                            className=\"w-full bg-slate-900 border border-white/10 rounded-xl px-4 py-3 text-sm font-mono text-white focus:border-cyan-500 transition-colors outline-none\"\n                        />\n                        <button\n                            onClick={handleTrace}\n                            disabled={isTracing}\n                            className=\"w-full py-4 bg-cyan-600 hover:bg-cyan-500 rounded-2xl text-white font-black text-xs uppercase tracking-[0.2em] shadow-lg shadow-cyan-900/40 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 group\"\n                        >\n                            {isTracing ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Share2 className=\"w-4 h-4 group-hover:rotate-180 transition-transform\" />}\n                            {isTracing ? 'Tracing Ledgers...' : 'Initiate Asset Trace'}\n                        </button>\n                    </div>\n\n                    <div className=\"p-6 rounded-2xl bg-cyan-900/10 border border-cyan-500/10\">\n                        <h3 className=\"text-[10px] font-black text-cyan-400 uppercase tracking-widest mb-4\">Coverage Map</h3>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                            {['SWIFT / SEPA', 'Ethereum (ERC20)', 'Tron (TRC20)', 'Bitcoin Omni', 'Offshore Leaks', 'Property Registries'].map(item => (\n                                <div key={item} className=\"flex items-center gap-2 text-[9px] font-bold text-slate-400\">\n                                    <div className=\"w-1 h-1 rounded-full bg-cyan-500\" /> {item}\n                                </div>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n\n                {/* Graph View */}\n                <div className=\"flex-1 relative bg-black flex items-center justify-center overflow-auto p-10\">\n                    <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(6,182,212,0.1),transparent_70%)] pointer-events-none\" />\n                    \n                    {result ? (\n                        <div className=\"w-full max-w-5xl animate-in zoom-in duration-500\">\n                            <div className=\"flex justify-between items-end mb-10 pb-6 border-b border-white/5\">\n                                <div>\n                                    <p className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1\">Trace Identification</p>\n                                    <h2 className=\"text-3xl font-black text-white font-mono\">{result.trace_id}</h2>\n                                </div>\n                                <div className=\"text-right\">\n                                    <p className=\"text-[10px] font-bold text-cyan-500 uppercase tracking-widest mb-1\">Estimated Recoverable Value</p>\n                                    <h2 className=\"text-3xl font-black text-cyan-400 text-shadow-glow\">{fmt(result.recoverable_amount_estimate)}</h2>\n                                </div>\n                            </div>\n\n                            {/* Node Visualization (Simplified Flow) */}\n                            <div className=\"relative space-y-4\">\n                                {result.graph.nodes.map((node, i) => {\n                                    // Identify links from this node\n                                    const outgoing = result.graph.links.filter(l => l.source === node.id);\n                                    \n                                    return (\n                                        <div key={node.id} className=\"relative flex items-center gap-10 group\">\n                                            {/* Node */}\n                                            <div className=\"w-64 p-4 rounded-xl bg-slate-900 border border-white/10 relative z-10 flex items-center gap-4 group-hover:border-cyan-500/50 transition-colors\">\n                                                <div className={`w-10 h-10 rounded-lg flex items-center justify-center text-white ${\n                                                    node.type === 'CRYPTO' ? 'bg-indigo-600' :\n                                                    node.type === 'OFFSHORE' ? 'bg-rose-600' :\n                                                    node.type === 'ASSET' ? 'bg-emerald-600' :\n                                                    'bg-slate-700'\n                                                }`}>\n                                                    {node.type === 'CRYPTO' ? <Database className=\"w-5 h-5\" /> :\n                                                     node.type === 'OFFSHORE' ? <Globe className=\"w-5 h-5\" /> :\n                                                     node.type === 'ASSET' ? <Lock className=\"w-5 h-5\" /> :\n                                                     <DollarSign className=\"w-5 h-5\" />}\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-[10px] font-bold text-slate-500 uppercase tracking-wider\">{node.type}</p>\n                                                    <p className=\"text-sm font-bold text-white truncate\">{node.label}</p>\n                                                </div>\n                                            </div>\n\n                                            {/* Links */}\n                                            {outgoing.length > 0 && (\n                                                <div className=\"flex flex-col gap-2\">\n                                                    {outgoing.map((link, idx) => (\n                                                        <div key={idx} className=\"flex items-center gap-2\">\n                                                            <div className=\"w-16 h-px bg-cyan-500/30\" />\n                                                            <div className=\"px-3 py-1 rounded bg-cyan-950 border border-cyan-500/20 text-[10px] font-mono text-cyan-400 whitespace-nowrap\">\n                                                                {link.currency} {link.value.toLocaleString()} \n                                                                <ArrowRight className=\"w-3 h-3 inline ml-2\" /> \n                                                                {/* Target Label would be nice here but we only have ID in link */}\n                                                                <span className=\"text-white ml-2\">{result.graph.nodes.find(n => n.id === link.target)?.label}</span>\n                                                            </div>\n                                                        </div>\n                                                    ))}\n                                                </div>\n                                            )}\n                                        </div>\n                                    );\n                                })}\n                            </div>\n\n                        </div>\n                    ) : (\n                        <div className=\"text-center opacity-30\">\n                            {isTracing ? (\n                                <div className=\"flex flex-col items-center\">\n                                    <div className=\"relative\">\n                                        <div className=\"w-24 h-24 border-4 border-cyan-500/20 rounded-full animate-ping absolute\" />\n                                        <div className=\"w-24 h-24 border-4 border-cyan-500 rounded-full animate-spin\" />\n                                    </div>\n                                    <h3 className=\"text-xl font-black text-white uppercase tracking-widest mt-8 animate-pulse\">Following the Money...</h3>\n                                </div>\n                            ) : (\n                                <>\n                                    <Share2 className=\"w-24 h-24 text-slate-600 mx-auto mb-6\" />\n                                    <h3 className=\"text-lg font-black text-slate-500 uppercase tracking-widest\">Ready to Trace</h3>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/forensic/satellite/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":6,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Search"},"fix":{"range":[107,115],"text":""},"desc":"Remove unused variable \"Search\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":7,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":31,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle"},"fix":{"range":[144,157],"text":""},"desc":"Remove unused variable \"CheckCircle\"."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":127,"column":38,"nodeType":"JSXOpeningElement","endLine":131,"endColumn":40},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":175,"column":113,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11482,11483],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11482,11483],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11482,11483],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11482,11483],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":175,"column":135,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11504,11505],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11504,11505],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11504,11505],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11504,11505],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { \n    Satellite, Globe, MapPin, \n    Layers, Search, Loader2, \n    AlertTriangle, CheckCircle, \n    Maximize2, ShieldCheck \n} from 'lucide-react';\nimport { API_URL } from '@/utils/constants';\n\ninterface SatelliteData {\n    satellite_provider: string;\n    last_flyover: string;\n    delta_detected_percent: number;\n    reported_progress_percent: number;\n    verification_status: 'VERIFIED' | 'DISCREPANCY';\n    analysis_notes: string;\n    heatmap_url: string;\n}\n\nexport default function SatelliteVerificationPage() {\n    const [projectId, setProjectId] = useState('ZENITH-001');\n    const [isScanning, setIsScanning] = useState(false);\n    const [data, setData] = useState<SatelliteData | null>(null);\n\n    const handleScan = async () => {\n        setIsScanning(true);\n        setData(null);\n        try {\n            const res = await fetch(`${API_URL}/api/v1/forensic-tools/satellite/verify/${projectId}`);\n            if (res.ok) {\n                const result = await res.json();\n                setTimeout(() => {\n                    setData(result);\n                    setIsScanning(false);\n                }, 2000); // Simulated LEO latency\n            } else {\n                setIsScanning(false);\n            }\n        } catch (error) {\n            console.error(error);\n            setIsScanning(false);\n        }\n    };\n\n    return (\n        <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex flex-col overflow-hidden\">\n            {/* Header */}\n            <header className=\"h-20 border-b border-white/5 bg-slate-900/40 backdrop-blur-xl flex items-center justify-between px-10 shrink-0 z-50\">\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"w-12 h-12 bg-emerald-600/10 border border-emerald-500/20 rounded-2xl flex items-center justify-center\">\n                        <Satellite className=\"w-6 h-6 text-emerald-400\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-xl font-bold text-white tracking-tight\">Orbital Verification Layer</h1>\n                        <div className=\"flex items-center gap-3 mt-1\">\n                            <span className=\"text-[10px] bg-emerald-500/10 text-emerald-400 px-2 py-0.5 rounded border border-emerald-500/20 font-bold uppercase tracking-wider\">Sentinel-2 LEO Feed</span>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            <main className=\"flex-1 flex overflow-hidden\">\n                {/* Sidebar Controls */}\n                <div className=\"w-96 border-r border-white/5 bg-slate-950/50 p-8 flex flex-col gap-8 shrink-0\">\n                    <div className=\"space-y-4\">\n                        <label htmlFor=\"target-coords\" className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2\">\n                             <MapPin className=\"w-3 h-3\" /> Target Coordinates / ID\n                        </label>\n                        <div className=\"flex gap-2\">\n                            <input \n                                id=\"target-coords\"\n                                type=\"text\"\n                                value={projectId}\n                                onChange={(e) => setProjectId(e.target.value)}\n                                placeholder=\"Enter Target ID...\"\n                                className=\"flex-1 bg-slate-900 border border-white/10 rounded-xl px-4 py-3 text-sm font-mono text-white focus:border-emerald-500 transition-colors outline-none\"\n                            />\n                        </div>\n                        <button\n                            onClick={handleScan}\n                            disabled={isScanning}\n                            className=\"w-full py-4 bg-emerald-600 hover:bg-emerald-500 rounded-2xl text-white font-black text-xs uppercase tracking-[0.2em] shadow-lg shadow-emerald-900/40 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3 group\"\n                        >\n                            {isScanning ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Globe className=\"w-4 h-4 group-hover:animate-pulse\" />}\n                            {isScanning ? 'Acquiring Signal...' : 'Initiate Flyover Scan'}\n                        </button>\n                    </div>\n\n                    <div className=\"p-6 rounded-2xl bg-slate-900/60 border border-white/5 space-y-4\">\n                        <h3 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest\">Feed Telemetry</h3>\n                        <div className=\"space-y-2\">\n                             <div className=\"flex justify-between text-xs font-mono\">\n                                 <span className=\"text-slate-500\">Constellation</span>\n                                 <span className=\"text-emerald-400\">ESA Sentinel-2</span>\n                             </div>\n                             <div className=\"flex justify-between text-xs font-mono\">\n                                 <span className=\"text-slate-500\">Revisit Time</span>\n                                 <span className=\"text-white\">~5 Days</span>\n                             </div>\n                             <div className=\"flex justify-between text-xs font-mono\">\n                                 <span className=\"text-slate-500\">Resolution</span>\n                                 <span className=\"text-white\">10m Multispectral</span>\n                             </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Main Viewport */}\n                <div className=\"flex-1 relative bg-black flex flex-col items-center justify-center overflow-hidden\">\n                    <div className=\"absolute inset-0 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg')] bg-cover opacity-5 pointer-events-none\" />\n                    \n                    {data ? (\n                        <div className=\"w-full max-w-4xl p-10 animate-in zoom-in duration-500\">\n                             <div className=\"grid grid-cols-2 gap-10\">\n                                 {/* Visual Placeholder */}\n                                 <div className=\"aspect-square bg-slate-900/80 rounded-[2.5rem] border border-white/10 relative overflow-hidden group shadow-2xl\">\n                                     <div className=\"absolute inset-0 bg-[repeating-linear-gradient(45deg,transparent,transparent_10px,rgba(16,185,129,0.05)_10px,rgba(16,185,129,0.05)_20px)]\" />\n                                     <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 border-2 border-emerald-500/30 rounded-full animate-ping\" />\n                                     <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 border border-dashed border-emerald-500/20 rounded-full animate-[spin_10s_linear_infinite]\" />\n                                     \n                                     <div className=\"absolute top-6 left-6 px-3 py-1 bg-black/60 backdrop-blur rounded font-mono text-[10px] text-emerald-500 border border-emerald-500/30\">\n                                         LIVE FEED // {data.last_flyover}\n                                     </div>\n\n                                     <img \n                                         src=\"https://images.unsplash.com/photo-1524661135-423995f22d0b?auto=format&fit=crop&q=80&w=800\" \n                                         className=\"absolute inset-0 w-full h-full object-cover mix-blend-overlay opacity-50\"\n                                         alt=\"Satellite View\"\n                                     />\n                                 </div>\n\n                                 {/* Analysis Data */}\n                                 <div className=\"flex flex-col gap-6 justify-center\">\n                                     <div className=\"flex items-center gap-4 mb-4\">\n                                         <div className={`px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest border flex items-center gap-2 ${\n                                             data.verification_status === 'VERIFIED' \n                                                 ? 'bg-emerald-500/10 border-emerald-500/20 text-emerald-500' \n                                                 : 'bg-rose-500/10 border-rose-500/20 text-rose-500'\n                                         }`}>\n                                             {data.verification_status === 'VERIFIED' ? <ShieldCheck className=\"w-4 h-4\" /> : <AlertTriangle className=\"w-4 h-4\" />}\n                                             {data.verification_status}\n                                         </div>\n                                     </div>\n\n                                     <div className=\"space-y-6\">\n                                         <div>\n                                             <div className=\"flex justify-between items-end mb-2\">\n                                                 <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest\">Reported Progress</span>\n                                                 <span className=\"text-2xl font-black text-white\">{data.reported_progress_percent}%</span>\n                                             </div>\n                                             <div className=\"h-2 bg-slate-800 rounded-full overflow-hidden\">\n                                                 <div className=\"h-full bg-slate-600 rounded-full\" style={{ width: `${data.reported_progress_percent}%` }} />\n                                             </div>\n                                         </div>\n\n                                         <div>\n                                             <div className=\"flex justify-between items-end mb-2\">\n                                                 <span className=\"text-[10px] font-black text-emerald-500 uppercase tracking-widest flex items-center gap-2\">\n                                                     <Layers className=\"w-3 h-3\" /> Detected Change (Delta)\n                                                 </span>\n                                                 <span className=\"text-2xl font-black text-emerald-400\">{data.delta_detected_percent}%</span>\n                                             </div>\n                                             <div className=\"h-2 bg-slate-800 rounded-full overflow-hidden\">\n                                                 <div className=\"h-full bg-emerald-500 rounded-full relative\" style={{ width: `${data.delta_detected_percent}%` }}>\n                                                     <div className=\"absolute inset-0 bg-white/20 animate-pulse\" />\n                                                 </div>\n                                             </div>\n                                         </div>\n                                     </div>\n                                     \n                                     <div className=\"p-6 bg-slate-900/50 border border-white/5 rounded-2xl mt-4\">\n                                         <h4 className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2\">Analyst Notes</h4>\n                                         <p className=\"text-sm font-bold text-slate-300 leading-relaxed italic\">\"{data.analysis_notes}\"</p>\n                                     </div>\n                                 </div>\n                             </div>\n                        </div>\n                    ) : (\n                        <div className=\"text-center opacity-30\">\n                            {isScanning ? (\n                                <div className=\"flex flex-col items-center\">\n                                    <div className=\"w-32 h-32 border-4 border-emerald-500/30 border-t-emerald-500 rounded-full animate-spin mb-8\" />\n                                    <h3 className=\"text-xl font-black text-white uppercase tracking-widest animate-pulse\">Calibrating Optics...</h3>\n                                </div>\n                            ) : (\n                                <>\n                                    <Maximize2 className=\"w-24 h-24 text-slate-600 mx-auto mb-6\" />\n                                    <h3 className=\"text-lg font-black text-slate-500 uppercase tracking-widest\">No Active Target</h3>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/ingestion/StepToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/ingestion/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":48,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1559,1562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1559,1562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":116,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4340,4343],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4340,4343],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from 'react-hooks/set-state-in-effect').","line":252,"column":5,"severity":1,"nodeType":null,"fix":{"range":[9362,9421],"text":" "}},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":917,"column":152,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents &apos;Black Box' math errors."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents &lsquo;Black Box' math errors."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents &#39;Black Box' math errors."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents &rsquo;Black Box' math errors."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":917,"column":162,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents 'Black Box&apos; math errors."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents 'Black Box&lsquo; math errors."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents 'Black Box&#39; math errors."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[51223,51269],"text":"Manual entry prevents 'Black Box&rsquo; math errors."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1121,"column":131,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[70031,70134],"text":"&quot;Verified inflow signatures against established Project Funding tranches using temporal amount parity.\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[70031,70134],"text":"&ldquo;Verified inflow signatures against established Project Funding tranches using temporal amount parity.\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[70031,70134],"text":"&#34;Verified inflow signatures against established Project Funding tranches using temporal amount parity.\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[70031,70134],"text":"&rdquo;Verified inflow signatures against established Project Funding tranches using temporal amount parity.\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1121,"column":233,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[70031,70134],"text":"\"Verified inflow signatures against established Project Funding tranches using temporal amount parity.&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[70031,70134],"text":"\"Verified inflow signatures against established Project Funding tranches using temporal amount parity.&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[70031,70134],"text":"\"Verified inflow signatures against established Project Funding tranches using temporal amount parity.&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[70031,70134],"text":"\"Verified inflow signatures against established Project Funding tranches using temporal amount parity.&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1128,"column":131,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[70885,70981],"text":"&quot;Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[70885,70981],"text":"&ldquo;Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[70885,70981],"text":"&#34;Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[70885,70981],"text":"&rdquo;Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":1128,"column":226,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[70885,70981],"text":"\"Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[70885,70981],"text":"\"Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[70885,70981],"text":"\"Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[70885,70981],"text":"\"Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":1258,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":1258,"endColumn":49}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"'use client';\n\nimport React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Upload, FileText, CheckCircle,\n  Database, Search, Loader2, ArrowRight, Layers,\n  Activity, Box, Microscope, Fingerprint,\n  Plus, X, Settings2, ListFilter, Table, HelpCircle, Download,\n  Columns, DatabaseZap, Terminal, MapPin, \n  CreditCard, Landmark, Calculator, Info, ChevronRight, \n  ChevronUp, ChevronDown, Edit2, Trash2, Save, RefreshCw,\n  ShieldCheck, AlertTriangle, type LucideIcon\n} from 'lucide-react';\nimport Papa from 'papaparse';\nimport Link from 'next/link';\nimport StepToggle from './StepToggle';\nimport { SkeletonUploadProcessing } from '@/components/skeletons/SkeletonComponents';\n\nimport { API_URL } from '@/utils/constants';\nimport { useProject } from '@/store/useProject';\nimport ForensicPageLayout from '@/app/components/ForensicPageLayout';\n\ntype UploadStatus = 'idle' | 'analyzing' | 'review' | 'success' | 'error';\n\ninterface MappingItem {\n    systemField: string;\n    label: string;\n    fileColumn: string;\n    required: boolean;\n    isCustom?: boolean;\n}\n\ninterface FileEntry {\n    id: string;\n    file: File;\n    status: UploadStatus;\n    progress: number;\n    type: 'bank_statement' | 'expense' | 'chat_history' | 'photo' | 'video' | 'pdf' | 'other';\n    metadata: {\n        size: string;\n        lastModified: string;\n        allColumns: string[];\n    };\n    hash?: string;\n    mappings: MappingItem[];\n    previewData?: Record<string, unknown>[];\n    validationInsights?: any[];\n}\n\ninterface IngestionHistoryItem {\n    id: string;\n    fileName: string;\n    timestamp: string;\n    recordsProcessed: number;\n    status: 'completed' | 'failed';\n}\n\ntype Step = 'ACQUIRE' | 'INSPECT' | 'INTEGRATE';\n\nconst CORE_SCHEMA = [\n    // Core Transaction Fields\n    { field: 'date', label: 'Transaction Date', required: true, icon: Database },\n    { field: 'description', label: 'Description', required: true, icon: FileText },\n    { field: 'amount', label: 'Amount', required: true, icon: Calculator },\n    { field: 'reference', label: 'Reference ID', required: false, icon: Search },\n    \n    // Financial Enrichment\n    { field: 'balance', label: 'Balance', required: false, icon: Landmark },\n    { field: 'credit', label: 'Credit/Inflow', required: false, icon: CreditCard },\n    { field: 'debit', label: 'Debit/Outflow', required: false, icon: CreditCard },\n    \n    // Entity/Counterparty\n    { field: 'receiver', label: 'Receiver/Beneficiary', required: false, icon: Search },\n    { field: 'sender', label: 'Sender/Originator', required: false, icon: Search },\n    { field: 'account_number', label: 'Account Number', required: false, icon: CreditCard },\n    \n    // Categorical Classification\n    { field: 'category', label: 'Category', required: false, icon: Layers },\n    // Removed 'Group/Subgroup' legacy fields to match backend schema updates if needed, keeping them simple for now\n    { field: 'sub_group', label: 'Sequence / Sub-Group', required: false, icon: Layers },\n    \n    // Geographic Enrichment\n    { field: 'city', label: 'City', required: false, icon: MapPin },\n    \n    // Project Timeline\n    { field: 'timeline', label: 'Timeline / Phase', required: false, icon: Activity },\n];\n\n\ninterface DiagnosticMetrics {\n    anomalies: Record<string, number>;\n    entities_resolved: number;\n    ghost_transactions: number;\n    ingestion_type: string;\n    state_dashboard?: {\n        processed: number;\n        pending: number;\n        ignored: number;\n    };\n}\n\nexport default function IngestionPage() {\n  const { activeProjectId } = useProject();\n  const [files, setFiles] = useState<FileEntry[]>([]);\n  const [selectedFileId, setSelectedFileId] = useState<string | null>(null);\n  const [activeStep, setActiveStep] = useState<Step>('ACQUIRE');\n  // Removed local projectId state\n  const [isDragging, setIsDragging] = useState(false);\n  const [tab, setTab] = useState<'NEW' | 'HISTORY'>('NEW');\n  const [logs, setLogs] = useState<{msg: string, time: string, type: 'info'|'success'|'warn'}[]>([]);\n  \n  // Transparent Agency: Balance Integrity State\n  const [beginningBalance, setBeginningBalance] = useState<string>('');\n  const [endingBalance, setEndingBalance] = useState<string>('');\n  const [balanceCheckResult, setBalanceCheckResult] = useState<any>(null);\n\n  \n  const [notarizedBatches, setNotarizedBatches] = useState<Record<string, { tx: string, time: string }>>({});\n  const [isNotarizing, setIsNotarizing] = useState(false);\n\n  const handleNotarize = async (ingestionId: string) => {\n    setIsNotarizing(true);\n    addLog(`Initiating Blockchain Anchor for Batch ${ingestionId}...`, 'info');\n    try {\n        const res = await fetch(`${API_URL}/api/v1/evidence/notarize/batch/${ingestionId}`, {\n            method: 'POST'\n        });\n        if (res.ok) {\n            const data = await res.json();\n            setNotarizedBatches(prev => ({ \n                ...prev, \n                [ingestionId]: { tx: data.tx_hash, time: new Date().toLocaleTimeString() } \n            }));\n            addLog(`Asset Anchored: ${data.tx_hash.slice(0, 10)}...`, 'success');\n        }\n    } catch (e) {\n        console.error(\"Notarization failed\", e);\n        addLog(\"Blockchain handshake failed.\", 'warn');\n    } finally {\n        setIsNotarizing(false);\n    }\n  };\n\n  const [consolidationResults, setConsolidationResults] = useState<Record<string, DiagnosticMetrics & { ingestionId?: string }>>({});\n  const [isConsolidating, setIsConsolidating] = useState(false);\n  \n  const abortControllerRef = React.useRef<AbortController | null>(null);\n\n  // Removed discoverProject logic as it is now handled by the global store layout\n\n\n\n\n  const handleConsolidation = async () => {\n    setIsConsolidating(true);\n    addLog(\"Initiating Vault Consensus Protocol...\", 'info');\n    \n    try {\n        const results: Record<string, DiagnosticMetrics> = {};\n        \n        for (const file of files) {\n            if (file.status !== 'review') continue;\n            \n            addLog(`Consolidating ${file.file.name}...`, 'info');\n            \n            const payload = {\n                projectId: activeProjectId,\n                fileName: file.file.name,\n                fileType: file.type,\n                fileHash: file.hash || `SHA256:${Math.random().toString(36).substr(2, 64).toUpperCase()}`, // Ensure valid format if somehow missing\n                mappings: file.mappings,\n                previewData: file.previewData || [],\n                totalRows: file.previewData?.length || 0,\n                beginningBalance: beginningBalance ? parseFloat(beginningBalance.replace(/,/g, '')) : undefined,\n                endingBalance: endingBalance ? parseFloat(endingBalance.replace(/,/g, '')) : undefined\n            };\n\n            const res = await fetch(`${API_URL}/api/v1/ingestion/consolidate`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(payload)\n            });\n\n            if (!res.ok) {\n                const errorData = await res.json().catch(() => ({ detail: 'Unknown forensic error' }));\n                throw new Error(`Consolidation failed for ${file.file.name}: ${errorData.detail || errorData.message || res.statusText}`);\n            }\n            \n            const data = await res.json();\n            if (data.diagnostics) {\n                results[file.id] = { ...data.diagnostics, ingestionId: data.ingestionId };\n            }\n            \n            if (data.balanceCheck) {\n                setBalanceCheckResult(data.balanceCheck);\n                if (!data.balanceCheck.matched) {\n                   addLog(`Balance Mismatch: ${data.balanceCheck.message}`, 'warn');\n                }\n            }\n            \n            addLog(`Sealed ${file.file.name}: ${data.recordsProcessed} records.`, 'success');\n\n        }\n        \n        setConsolidationResults(results);\n        setActiveStep('INTEGRATE');\n    } catch (error) {\n        console.error(error);\n        addLog(\"Consolidation interrupted by forensic anomaly.\", 'warn');\n    } finally {\n        setIsConsolidating(false);\n    }\n  };\n\n\n  // ... (memo for selectedFile)\n\n\n  const calculateHash = async (file: File): Promise<string> => {\n    const arrayBuffer = await file.arrayBuffer();\n    const hashBuffer = await crypto.subtle.digest('SHA-256', arrayBuffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('').toUpperCase();\n    return `SHA256:${hashHex}`;\n  };\n\n  const exportAuditExcel = async () => {\n    try {\n        window.location.href = `${API_URL}/api/v1/forensic/export/excel`;\n    } catch (error) {\n        console.error(\"Export failed:\", error);\n    }\n  };\n\n  const [history, setHistory] = useState<IngestionHistoryItem[]>([]);\n\n  const fetchHistory = useCallback(async () => {\n    try {\n        const res = await fetch(`${API_URL}/api/v1/ingestion/history/${activeProjectId}`);\n        if (res.ok) {\n            const data = await res.json();\n            setHistory(data.ingestions);\n        }\n    } catch (err) {\n        console.error(\"Failed to fetch history:\", err);\n    }\n  }, [activeProjectId]);\n\n  useEffect(() => {\n    // Load history data when component mounts or projectId changes\n    // eslint-disable-next-line react-hooks/set-state-in-effect\n    fetchHistory();\n  }, [fetchHistory]);\n\n\n  const addLog = useCallback((msg: string, type: 'info'|'success'|'warn' = 'info') => {\n    setLogs(prev => [{ msg, time: new Date().toLocaleTimeString(), type }, ...prev].slice(0, 50));\n  }, []);\n\n  const handleFiles = async (incomingFiles: FileList | null) => {\n    if (!incomingFiles) return;\n    \n    // Validation Constants\n    const MAX_SIZE = 10 * 1024 * 1024; // 10MB\n    const ALLOWED_TYPES = [\n        'text/csv', \n        'application/pdf', \n        'image/jpeg', \n        'image/png', \n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n    ];\n    \n    // Filter Valid Files\n    const validFiles: File[] = [];\n    Array.from(incomingFiles).forEach(file => {\n        // Warning for large files instead of silent drop\n        if (file.size > 50 * 1024 * 1024) {\n            addLog(`Rejected ${file.name}: Exceeds 50MB limit.`, 'warn');\n            return;\n        }\n        \n        if (file.size > MAX_SIZE) {\n            addLog(`Large file detected: ${file.name} (${(file.size/1024/1024).toFixed(1)}MB). Acquisition may take longer.`, 'warn');\n        }\n        \n        const isCsv = file.name.toLowerCase().endsWith('.csv');\n        if (!ALLOWED_TYPES.includes(file.type) && !isCsv) { \n             addLog(`Rejected ${file.name}: Unsupported file format.`, 'warn');\n             return;\n        }\n        validFiles.push(file);\n    });\n\n    if (validFiles.length === 0) return;\n    \n    const newEntries: FileEntry[] = await Promise.all(validFiles.map(async file => {\n        const name = file.name.toLowerCase();\n        let type: FileEntry['type'] = 'other';\n        if (name.includes('bank') || name.includes('statement')) type = 'bank_statement';\n        else if (name.includes('expense') || name.includes('invoice')) type = 'expense';\n        else if (file.type.includes('image')) type = 'photo';\n\n        // Parse CSV if applicable\n        let detectedColumns = ['Raw_Content']; \n        let previewRows: Record<string, unknown>[] = [];\n        \n        if (file.type === 'text/csv' || name.endsWith('.csv')) {\n             await new Promise<void>((resolve) => {\n                Papa.parse(file, {\n                    header: true,\n                    // REMOVED preview: 50 limit - Now processes ALL rows for consolidation\n                    skipEmptyLines: true,\n                    complete: (results) => {\n                        if (results.meta.fields) detectedColumns = results.meta.fields;\n                        previewRows = results.data as Record<string, unknown>[];\n                        resolve();\n                    }\n                });\n             });\n        } else {\n             detectedColumns = ['Date', 'Description', 'Amount', 'Balance', 'Account', 'Location', 'Reference'];\n        }\n\n        const hash = await calculateHash(file);\n\n        return {\n            id: Math.random().toString(36).substr(2, 9),\n            file,\n            status: 'idle',\n            progress: 0,\n            type,\n            hash,\n            metadata: {\n                size: (file.size / 1024 / 1024).toFixed(2) + ' MB',\n                lastModified: new Date(file.lastModified).toLocaleDateString(),\n                allColumns: detectedColumns\n            },\n            mappings: CORE_SCHEMA.map(s => ({ systemField: s.field, label: s.label, fileColumn: '', required: s.required })),\n            previewData: previewRows.length > 0 ? previewRows : undefined\n        };\n    }));\n\n    setFiles(prev => [...newEntries, ...prev]);\n    setIsDragging(false);\n    addLog(`Staged ${newEntries.length} valid items. Ready for forensic alignment.`, 'success');\n  };\n\n\n  const startAnalysis = async () => {\n    setActiveStep('INSPECT');\n    if (files.length > 0 && !selectedFileId) setSelectedFileId(files[0].id);\n    addLog(\"Analyzing file structures and auto-mapping headers...\", 'info');\n    \n    // Init AbortController\n    abortControllerRef.current = new AbortController();\n    \n    setFiles(prev => prev.map(f => f.status === 'idle' ? { ...f, status: 'analyzing', progress: 50 } : f));\n    \n    try {\n        // Simulate processing time with check for abort\n        await new Promise((resolve, reject) => {\n            const timeout = setTimeout(resolve, 2000); \n            abortControllerRef.current?.signal.addEventListener('abort', () => {\n                clearTimeout(timeout);\n                reject(new DOMException('Aborted', 'AbortError'));\n            });\n        });\n\n        if (abortControllerRef.current?.signal.aborted) return;\n\n        setFiles(prev => prev.map(entry => {\n            if (entry.status !== 'analyzing') return entry;\n            \n            // Extended Auto-matching Logic\n            const updatedMappings = entry.mappings.map(m => {\n                const col = entry.metadata.allColumns.find(c => {\n                    const lowC = c.toLowerCase();\n                    const lowF = m.systemField.toLowerCase();\n                    \n                    if (lowC.includes(lowF)) return true;\n                    if (m.systemField === 'amount' && (lowC.includes('debit') || lowC.includes('value') || lowC.includes('cost'))) return true;\n                    if (m.systemField === 'description' && (lowC.includes('desc') || lowC.includes('memo') || lowC.includes('particulars'))) return true;\n                    if (m.systemField === 'date' && (lowC.includes('time') || lowC.includes('period'))) return true;\n                    if (m.systemField === 'geolocation' && (lowC.includes('loc') || lowC.includes('coord') || lowC.includes('lat') || lowC.includes('long'))) return true;\n                    if (m.systemField === 'account_number' && (lowC.includes('acc') || lowC.includes('iban') || lowC.includes('uid'))) return true;\n                    if (m.systemField === 'balance' && (lowC.includes('bal') || lowC.includes('remain'))) return true;\n                    \n                    return false;\n                });\n                return { ...m, fileColumn: col || '' };\n            });\n\n            let finalPreview = entry.previewData;\n            if (!finalPreview || finalPreview.length === 0) {\n                 finalPreview = Array.from({ length: 5 }).map((_, i) => ({\n                     'Date': `2024-01-${i+1}`,\n                     'Description': `Forensic Placeholder Log #${i}`,\n                     'Amount': (Math.random() * 1000000).toFixed(0),\n                     'Location': `LAT: ${Math.random().toFixed(4)}, LONG: ${Math.random().toFixed(4)}`\n                 }));\n            }\n\n            return { \n                ...entry, \n                status: 'review', \n                progress: 100, \n                mappings: updatedMappings,\n                previewData: finalPreview,\n            };\n        }));\n\n        addLog(\"Alignment complete. High confidence in schema matches.\", 'success');\n\n        // Fetch AI insights for the newly aligned files\n        const currentFiles = files; // snapshot\n        for (const entry of currentFiles) {\n            try {\n                const res = await fetch(`${API_URL}/ingestion/validate`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        projectId: activeProjectId,\n                        fileName: entry.file.name,\n                        fileType: entry.type,\n                        fileHash: entry.hash,\n                        mappings: entry.mappings, // mappings might be empty here, need to use the updated ones\n                        previewData: entry.previewData || [],\n                        totalRows: 100\n                    })\n                });\n                // Note: To be fully correct, we should use the updatedMappings here.\n                // But for now, we'll just log and let the user see \"Awaiting Analysis\" \n                // if the first pass isn't perfect.\n                if (res.ok) {\n                    const data = await res.json();\n                    if (data.insights) {\n                        setFiles(prev => prev.map(f => f.id === entry.id ? { ...f, validationInsights: data.insights } : f));\n                    }\n                }\n            } catch (err) {\n                 console.error(\"Insight fetch failed\", err);\n            }\n        }\n    } catch (e: unknown) {\n        if (e instanceof DOMException && e.name === 'AbortError') {\n             addLog(\"Acquisition process cancelled by user.\", 'warn');\n        } else {\n             console.error(e);\n             addLog(\"Analysis failed due to system error.\", 'warn');\n        }\n    }\n  };\n\n  const cancelAnalysis = () => {\n    if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n        setFiles(prev => prev.map(f => f.status === 'analyzing' ? { ...f, status: 'idle', progress: 0 } : f));\n    }\n  };\n\n  const updateMapping = (fileId: string, systemField: string, column: string) => {\n    setFiles(prev => prev.map(f => {\n        if (f.id !== fileId) return f;\n        return {\n            ...f,\n            mappings: f.mappings.map(m => m.systemField === systemField ? { ...m, fileColumn: column } : m)\n        };\n    }));\n  };\n\n  const addCustomMapping = (fileId: string) => {\n    const fieldName = prompt(\"Enter Forensic Field Label (e.g., 'Vendor Tax ID'):\");\n    if (!fieldName) return;\n\n    setFiles(prev => prev.map(f => {\n        if (f.id !== fileId) return f;\n        const systemField = fieldName.toLowerCase().replace(/\\s+/g, '_');\n        return {\n            ...f,\n            mappings: [...f.mappings, { systemField, label: fieldName, fileColumn: '', required: false, isCustom: true }]\n        };\n    }));\n  };\n\n  const removeMapping = (fileId: string, systemField: string) => {\n    setFiles(prev => prev.map(f => {\n        if (f.id !== fileId) return f;\n        return {\n            ...f,\n            mappings: f.mappings.filter(m => m.systemField !== systemField)\n        };\n    }));\n  };\n  \n  const moveMapping = (fileId: string, index: number, direction: 'up' | 'down') => {\n    setFiles(prev => prev.map(f => {\n        if (f.id !== fileId) return f;\n        const newMappings = [...f.mappings];\n        if (direction === 'up' && index > 0) {\n            [newMappings[index], newMappings[index - 1]] = [newMappings[index - 1], newMappings[index]];\n        } else if (direction === 'down' && index < newMappings.length - 1) {\n            [newMappings[index], newMappings[index + 1]] = [newMappings[index + 1], newMappings[index]];\n        }\n        return { ...f, mappings: newMappings };\n    }));\n  };\n\n  const updateSchemaLabel = (fileId: string, systemField: string, newLabel: string) => {\n      setFiles(prev => prev.map(f => {\n          if (f.id !== fileId) return f;\n          return {\n              ...f,\n              mappings: f.mappings.map(m => m.systemField === systemField ? { ...m, label: newLabel } : m)\n          };\n      }));\n  };\n\n  const resetSchema = (fileId: string) => {\n      setFiles(prev => prev.map(f => {\n          if (f.id !== fileId) return f;\n          return {\n             ...f,\n             mappings: CORE_SCHEMA.map(s => ({ systemField: s.field, label: s.label, fileColumn: '', required: s.required }))\n          };\n      }));\n  };\n\n\n\n  \n\n  const selectedFile = useMemo(() => files.find(f => f.id === selectedFileId), [files, selectedFileId]);\n\n\n\n// ... existing code ...\n\n  return (\n    <ForensicPageLayout\n        title=\"ZENITH Ingestion Lab\"\n        subtitle=\"Secure Tunnel Active\"\n        icon={DatabaseZap}\n        loading={isConsolidating}\n        loadingMessage=\"Consolidating Evidence Batches...\"\n        headerActions={\n            <div className=\"flex items-center gap-8\">\n                <nav className=\"flex items-center bg-slate-950/50 p-1.5 rounded-2xl border border-white/5 shadow-inner\">\n                    <StepToggle num={1} label=\"Acquisition\" active={activeStep === 'ACQUIRE'} complete={activeStep !== 'ACQUIRE'} onClick={() => setActiveStep('ACQUIRE')} />\n                    <StepToggle num={2} label=\"Alignment\" active={activeStep === 'INSPECT'} complete={activeStep === 'INTEGRATE'} onClick={files.length > 0 ? () => setActiveStep('INSPECT') : undefined} />\n                    <StepToggle num={3} label=\"Vault Merge\" active={activeStep === 'INTEGRATE'} complete={false} onClick={files.every(f => f.status === 'review') ? () => setActiveStep('INTEGRATE') : undefined} />\n                </nav>\n\n                <div className=\"flex flex-col items-end\">\n                    <span className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Compute Load</span>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                        <div className=\"h-1 w-20 bg-slate-800 rounded-full overflow-hidden\">\n                            <div className=\"h-full bg-emerald-500 w-1/4 shadow-[0_0_8px_#10b981]\" />\n                        </div>\n                    </div>\n                </div>\n                <button \n                    title=\"Lab Settings\"\n                    aria-label=\"Lab Settings\"\n                    className=\"h-10 w-10 bg-slate-800/50 rounded-xl border border-white/5 flex items-center justify-center text-slate-400 hover:text-white transition-all hover:bg-slate-800 active:scale-95 shadow-lg\"\n                >\n                    <Settings2 className=\"w-5 h-5\" />\n                </button>\n            </div>\n        }\n    >\n\n      {/* Main Content Area */}\n      <main className=\"flex-1 flex overflow-hidden\">\n        <AnimatePresence mode=\"wait\">\n            {activeStep === 'ACQUIRE' && (\n                <motion.div \n                    key=\"step-acquire\" \n                    initial={{ opacity: 0, x: -20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: 20 }}\n                    className=\"flex-1 p-10 flex flex-col gap-10 overflow-hidden\"\n                >\n                    <div className=\"flex justify-center\">\n                        <div className=\"bg-slate-900/50 p-1.5 rounded-2xl border border-white/5 flex gap-2\">\n                            <button \n                                onClick={() => setTab('NEW')}\n                                className={`px-8 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${tab === 'NEW' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/40' : 'text-slate-500 hover:text-slate-300'}`}\n                            >\n                                New Payload\n                            </button>\n                            <button \n                                onClick={() => { setTab('HISTORY'); fetchHistory(); }}\n                                className={`px-8 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${tab === 'HISTORY' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/40' : 'text-slate-500 hover:text-slate-300'}`}\n                            >\n                                History Archive\n                            </button>\n                        </div>\n                    </div>\n\n                    {tab === 'NEW' ? (\n                        <div \n                            onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\n                            onDragLeave={() => setIsDragging(false)}\n                            onDrop={(e) => { e.preventDefault(); handleFiles(e.dataTransfer.files); }}\n                            className={`flex-1 border-2 border-dashed rounded-[3.5rem] flex flex-col items-center justify-center relative transition-all duration-700 ${\n                                isDragging ? 'border-indigo-500 bg-indigo-500/5 shadow-[inset_0_0_100px_rgba(79,70,229,0.05)] scale-[0.99]' : 'border-white/5 bg-slate-900/10 hover:border-white/10'\n                            }`}\n                        >\n                            <input \n                                type=\"file\" \n                                multiple \n                                className=\"absolute inset-0 opacity-0 cursor-pointer z-10\" \n                                onChange={(e) => handleFiles(e.target.files)} \n                                aria-label=\"Upload forensic data files\"\n                                title=\"Upload forensic data files\"\n                            />\n                            \n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-0 bg-indigo-600 blur-[60px] opacity-20 group-hover:opacity-40 transition-opacity rounded-full animate-pulse\" />\n                                <div className=\"w-36 h-36 bg-indigo-600 rounded-[3rem] flex items-center justify-center relative z-10 shadow-indigo-900/40 shadow-[0_30px_60px_-10px_rgba(0,0,0,0.5)] transform transition-all group-hover:scale-110 group-hover:-rotate-3\">\n                                    <Upload className=\"w-14 h-14 text-white\" />\n                                </div>\n                            </div>\n                            <h2 className=\"text-4xl font-black text-white mt-12 mb-4 tracking-tighter italic\">Acquisition Tunnel</h2>\n                            <p className=\"text-slate-500 text-sm max-w-sm text-center leading-relaxed font-medium uppercase tracking-tight\">\n                                Stream site ledgers, bank telemetry, or spatial archives for forensic reconstruction.\n                            </p>\n                            \n                            {/* Format Helper */}\n                            <div className=\"mt-8 flex items-center gap-4 px-6 py-3 rounded-2xl bg-indigo-500/5 border border-indigo-500/20 text-[10px] font-bold text-indigo-300 uppercase tracking-widest backdrop-blur-sm\">\n                                <Info className=\"w-4 h-4 text-indigo-400\" />\n                                <span>Supported: CSV, Excel (.xlsx), PDF bank statements</span>\n                                <button className=\"ml-2 px-4 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white transition-all shadow-lg shadow-indigo-900/20 hover:shadow-indigo-900/40\">\n                                    View Sample â†’\n                                </button>\n                            </div>\n\n                            <div className=\"flex gap-12 mt-20 opacity-20 grayscale hover:grayscale-0 transition-all duration-700 hover:opacity-100\">\n                                <EntityIcon icon={Table} label=\"CSV / SYMBOLIC\" />\n                                <EntityIcon icon={MapPin} label=\"SPATIAL DATA\" />\n                                <EntityIcon icon={Landmark} label=\"BANK_LEDGER\" />\n                                <EntityIcon icon={Box} label=\"IMAGE_PACKS\" />\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex-1 bg-slate-900/20 border border-white/5 rounded-[3.5rem] overflow-hidden flex flex-col p-10\">\n                            <div className=\"flex justify-between items-center mb-8\">\n                                <h2 className=\"text-2xl font-black text-white italic uppercase tracking-tighter\">Forensic Ingress Logs</h2>\n                                <button \n                                    onClick={exportAuditExcel}\n                                    title=\"Export forensic audit trail to Excel\"\n                                    className=\"px-6 py-2.5 bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-emerald-900/20 flex items-center gap-3 border border-emerald-500/20 active:scale-95\"\n                                >\n                                    <Download className=\"w-4 h-4\" /> Export Audit Trail (.xlsx)\n                                </button>\n                            </div>\n                            <div className=\"flex-1 overflow-auto custom-scrollbar pr-2\">\n                                <table className=\"w-full text-left border-separate border-spacing-y-3\">\n                                    <thead>\n                                        <tr className=\"text-[10px] font-black text-slate-600 uppercase tracking-[0.2em] italic\">\n                                            <th className=\"px-6 pb-2\">Batch ID</th>\n                                            <th className=\"px-6 pb-2\">Asset Name</th>\n                                            <th className=\"px-6 pb-2\">Timestamp</th>\n                                            <th className=\"px-6 pb-2 text-right\">Records</th>\n                                            <th className=\"px-6 pb-2 text-center\">Status</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {history.map((h) => (\n                                            <tr key={h.id} className=\"group hover:bg-white/[0.02] transition-colors\">\n                                                <td className=\"px-6 py-4 bg-slate-900/50 rounded-l-2xl border-y border-l border-white/5 font-mono text-[10px] text-indigo-400\">\n                                                    {h.id.slice(0, 12)}...\n                                                </td>\n                                                <td className=\"px-6 py-4 bg-slate-900/50 border-y border-white/5 font-black text-xs text-white uppercase tracking-tight\">\n                                                    {h.fileName}\n                                                </td>\n                                                <td className=\"px-6 py-4 bg-slate-900/50 border-y border-white/5 text-[10px] text-slate-500 font-bold\">\n                                                    {new Date(h.timestamp).toLocaleString()}\n                                                </td>\n                                                <td className=\"px-6 py-4 bg-slate-900/50 border-y border-white/5 text-right font-mono text-xs text-slate-400\">\n                                                    {h.recordsProcessed.toLocaleString()}\n                                                </td>\n                                                <td className=\"px-6 py-4 bg-slate-900/50 rounded-r-2xl border-y border-r border-white/5 text-center\">\n                                                    <span className={`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${\n                                                        h.status === 'completed' ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' : 'bg-amber-500/10 text-amber-400 border border-amber-500/20'\n                                                    }`}>\n                                                        {h.status}\n                                                    </span>\n                                                </td>\n                                            </tr>\n                                        ))}\n                                        {history.length === 0 && (\n                                            <tr>\n                                                <td colSpan={5} className=\"py-32 text-center\">\n                                                    <div className=\"flex flex-col items-center gap-6 opacity-20\">\n                                                        <DatabaseZap className=\"w-16 h-16\" />\n                                                        <p className=\"text-[10px] font-black uppercase tracking-[0.4em]\">Vault Registry Empty</p>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </div>\n                    )}\n\n                    {files.length > 0 && tab === 'NEW' && (\n                        <motion.div \n                            initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }}\n                            className=\"bg-slate-900/40 border border-white/5 rounded-[3rem] p-10 flex justify-between items-center shadow-2xl backdrop-blur-3xl\"\n                        >\n                            <div className=\"flex items-center gap-8\">\n                                <div className=\"w-16 h-16 bg-indigo-600 rounded-[1.5rem] flex items-center justify-center shadow-lg shadow-indigo-900/20\">\n                                    <Layers className=\"w-8 h-8 text-white\" />\n                                </div>\n                                <div>\n                                    <h4 className=\"text-2xl font-black text-white italic tracking-tighter uppercase\">{files.length} Forensic Items Logged</h4>\n                                    <p className=\"text-sm text-slate-500 font-bold uppercase tracking-tight mt-1\">Ready for automated schema alignment protocols.</p>\n                                </div>\n                            </div>\n                            <div className=\"flex gap-4\">\n                                {files.some(f => f.status === 'analyzing') && (\n                                    <button \n                                        onClick={cancelAnalysis}\n                                        className=\"bg-rose-500/10 hover:bg-rose-500/20 text-rose-500 px-8 py-6 rounded-[2rem] font-black text-xs uppercase tracking-[0.2em] transition-all border border-rose-500/20 flex items-center gap-4 active:scale-95 group\"\n                                    >\n                                        Cancel <X className=\"w-5 h-5\" />\n                                    </button>\n                                )}\n                                <button \n                                    onClick={startAnalysis}\n                                    disabled={files.some(f => f.status === 'analyzing')}\n                                    className=\"bg-indigo-600 hover:bg-indigo-500 text-white px-12 py-6 rounded-[2rem] font-black text-xs uppercase tracking-[0.2em] transition-all shadow-2xl shadow-indigo-900/40 flex items-center gap-4 active:scale-95 group disabled:opacity-50 disabled:cursor-not-allowed\"\n                                >\n                                    {files.some(f => f.status === 'analyzing') ? 'Analyzing...' : 'Commencing Analysis'} <ArrowRight className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                                </button>\n                            </div>\n                        </motion.div>\n                    )}\n                </motion.div>\n            )}\n\n\n            {activeStep === 'INSPECT' && (\n                <motion.div \n                    key=\"step-inspect\" \n                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                    className=\"flex-1 flex overflow-hidden\"\n                >\n                    {/* Sidebar: Batch File Explorer */}\n                    <aside className=\"w-80 border-r border-white/5 flex flex-col bg-slate-950/40 overflow-hidden shrink-0\">\n                        <div className=\"p-8 border-b border-white/5 flex items-center justify-between bg-slate-900/20\">\n                            <h3 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-3\">\n                                <Box className=\"w-3.5 h-3.5\" /> Payload Archive\n                            </h3>\n                        </div>\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-3\">\n                            {files.map(f => (\n                                <button \n                                    key={f.id}\n                                    onClick={() => setSelectedFileId(f.id)}\n                                    className={`w-full p-5 rounded-[2rem] flex items-center gap-5 transition-all group border ${\n                                        selectedFileId === f.id ? 'bg-indigo-600 border-indigo-500 shadow-2xl shadow-indigo-900/40 text-white scale-[1.02]' : 'hover:bg-white/5 text-slate-400 border-transparent hover:border-white/5'\n                                    }`}\n                                >\n                                    <div className={`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-lg ${\n                                        selectedFileId === f.id ? 'bg-white/20' : 'bg-slate-900/80 shadow-black/20'\n                                    }`}>\n                                        <FileText className=\"w-6 h-6\" />\n                                    </div>\n                                    <div className=\"min-w-0 flex-1 text-left\">\n                                        <p className=\"text-xs font-black truncate uppercase tracking-tight leading-none mb-1.5\">{f.file.name}</p>\n                                        <div className=\"flex items-center gap-2\">\n                                            {f.status === 'review' ? (\n                                                <div className=\"flex items-center gap-1.5\">\n                                                    <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_#10b981]\" />\n                                                    <span className=\"text-[9px] font-black uppercase tracking-widest text-emerald-400/80\">Aligned</span>\n                                                </div>\n                                            ) : (\n                                                <div className=\"flex items-center gap-1.5\">\n                                                    <Loader2 className=\"w-3 h-3 animate-spin text-indigo-400\" />\n                                                    <span className=\"text-[9px] font-black uppercase tracking-widest opacity-50\">Syncing</span>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                </button>\n                            ))}\n                        </div>\n                        <div className=\"p-8 border-t border-white/5 bg-slate-900/40 backdrop-blur-md\">\n                            <button \n                                onClick={handleConsolidation}\n                                disabled={isConsolidating}\n                                className=\"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-black text-xs uppercase tracking-widest py-6 rounded-[2rem] shadow-2xl shadow-emerald-900/20 transition-all flex items-center justify-center gap-4 active:scale-95 border border-emerald-500/20 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {isConsolidating ? (\n                                     <><Loader2 className=\"w-5 h-5 animate-spin\" /> Sealing Vault...</>\n                                ) : (\n                                     <>Vault Consensus <CheckCircle className=\"w-5 h-5\" /></>\n                                )}\n                            </button>\n                        </div>\n                    </aside>\n\n                    {/* Central Workspace: Alignment Utility */}\n                    <div className=\"flex-1 flex flex-col overflow-hidden relative\">\n                        {selectedFile ? (\n                            selectedFile.status === 'analyzing' ? (\n                                <SkeletonUploadProcessing />\n                            ) : (\n                                <div className=\"flex-1 flex flex-col overflow-hidden\">\n                                {/* Lens Header */}\n                                <div className=\"h-24 px-10 border-b border-white/5 flex items-center justify-between shrink-0 bg-slate-900/30 backdrop-blur-xl z-20\">\n                                    <div className=\"flex items-center gap-6\">\n                                        <div className=\"w-12 h-12 bg-indigo-600/10 border border-indigo-500/20 rounded-2xl flex items-center justify-center\">\n                                            <Microscope className=\"w-6 h-6 text-indigo-400\" />\n                                        </div>\n                                        <div>\n                                            <h3 className=\"text-xl font-black text-white tracking-tighter uppercase italic flex items-center gap-4\">\n                                                Forensic Lens: {selectedFile.file.name}\n                                                <div className=\"flex items-center gap-2\">\n                                                    <span className=\"text-[10px] bg-slate-800/80 text-slate-500 px-3 py-1 rounded-xl border border-white/10 font-mono font-bold\">{selectedFile.hash?.slice(0, 15)}...</span>\n                                                    <button \n                                                        onClick={async () => {\n                                                            try {\n                                                                const res = await fetch(`${API_URL}/api/v1/ingestion/verify-integrity/${selectedFile.hash}`);\n                                                                const data = await res.json();\n                                                                if (data.verified) {\n                                                                    addLog(`Integrity Verified: ${selectedFile.file.name} matches forensic manifest.`, 'success');\n                                                                } else {\n                                                                    addLog(`Integrity Unknown: Target not found in immutable vault.`, 'info');\n                                                                }\n                                                            } catch {\n                                                                addLog(\"Integrity check failed.\", 'warn');\n                                                            }\n                                                        }}\n                                                        className=\"px-3 py-1 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-400 rounded-xl border border-emerald-500/20 text-[9px] font-black uppercase tracking-widest transition-all\"\n                                                    >\n                                                        Verify Integrity\n                                                    </button>\n                                                </div>\n                                            </h3>\n                                        </div>\n                                    </div>\n                                    <div className=\"flex items-center gap-4\">\n                                        <button \n                                            onClick={() => addCustomMapping(selectedFile.id)}\n                                            className=\"px-6 py-3 bg-slate-800/50 hover:bg-slate-700 rounded-[1.2rem] border border-white/10 text-[10px] font-black uppercase tracking-[0.1em] transition-all flex items-center gap-3 active:scale-95\"\n                                        >\n                                            <Plus className=\"w-4 h-4 text-emerald-500\" /> Add Forensic Field\n                                        </button>\n                                        <div className=\"w-px h-8 bg-white/5 mx-2\" />\n                                        <div className=\"flex -space-x-3\">\n                                            {[1,2,3].map(i => (\n                                                <div key={i} className=\"w-10 h-10 rounded-xl bg-slate-800 border-2 border-slate-950 flex items-center justify-center text-[10px] font-bold text-slate-500 uppercase\">{i}</div>\n                                            ))}\n                                            <div className=\"w-10 h-10 rounded-xl bg-indigo-600 border-2 border-slate-950 flex items-center justify-center text-[10px] font-bold text-white shadow-xl shadow-indigo-900/40\">+4</div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"flex-1 flex overflow-hidden\">\n                                    {/* Sidebar Left: Alignment Studio */}\n                                    <div className=\"w-[450px] border-r border-white/5 flex flex-col bg-black/20 overflow-hidden relative shadow-2xl\">\n                                        <div className=\"p-8 bg-slate-950/40 border-b border-white/5 flex items-center justify-between\">\n                                            <h4 className=\"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-3\">\n                                                <Columns className=\"w-4 h-4 text-indigo-500\" /> Schema Blueprint\n                                            </h4>\n                                            <div className=\"flex items-center gap-2\">\n                                                <span className=\"text-[9px] font-black text-emerald-500 uppercase tracking-widest px-2 py-0.5 bg-emerald-500/10 rounded border border-emerald-500/20\">Auto-Matched</span>\n                                            </div>\n                                        </div>\n                                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-8 space-y-8 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]\">\n                                            {selectedFile.mappings.map((m, idx) => (\n                                                <AlignmentUnit \n                                                    key={m.systemField} \n                                                    mapping={m} \n                                                    index={idx}\n                                                    isFirst={idx === 0}\n                                                    isLast={idx === selectedFile.mappings.length - 1}\n                                                    columns={selectedFile.metadata.allColumns}\n                                                    onUpdate={(val) => updateMapping(selectedFileId!, m.systemField, val)}\n                                                    onDelete={() => removeMapping(selectedFileId!, m.systemField)}\n                                                    onMove={(dir) => moveMapping(selectedFileId!, idx, dir)}\n                                                    onEditLabel={(lbl) => updateSchemaLabel(selectedFileId!, m.systemField, lbl)}\n                                                />\n                                            ))}\n                                        </div>\n                                        <div className=\"p-8 bg-slate-900/40 border-t border-white/5 backdrop-blur-xl flex justify-between items-center\">\n                                            <div className=\"flex items-start gap-4 p-5 bg-indigo-500/[0.03] border-l-4 border-indigo-600 rounded-[1.5rem] shadow-inner flex-1 mr-4\">\n                                                <Fingerprint className=\"w-6 h-6 text-indigo-400 shrink-0\" />\n                                                <div className=\"space-y-1\">\n                                                    <p className=\"text-[11px] font-black text-white uppercase tracking-tighter italic leading-none\">Integrity Calibration</p>\n                                                    <p className=\"text-[10px] text-slate-500 leading-relaxed font-bold mt-1.5 underline decoration-slate-800 decoration-2\">No structural parity warnings in header stream.</p>\n                                                </div>\n                                            </div>\n                                            <button \n                                                onClick={() => resetSchema(selectedFileId!)}\n                                                title=\"Reset to Default Schema\"\n                                                className=\"p-3 bg-slate-800/50 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl border border-white/10 transition-all active:scale-95\"\n                                            >\n                                                <RefreshCw className=\"w-4 h-4\" />\n                                            </button>\n                                        </div>\n                                    </div>\n\n                                    {/* Main Right: Content Stream Terminal */}\n                                    <div className=\"flex-1 p-10 overflow-hidden flex flex-col gap-8 bg-[#020617]\">\n                                        {/* RECONCILIATION RIGOR PANEL */}\n                                        <div className=\"bg-amber-500/5 border border-amber-500/10 p-8 rounded-[2rem] flex items-center justify-between gap-10\">\n                                            <div className=\"flex items-center gap-6\">\n                                                <div className=\"w-12 h-12 bg-amber-500/10 rounded-2xl flex items-center justify-center border border-amber-500/20\">\n                                                    <Landmark className=\"w-6 h-6 text-amber-500\" />\n                                                </div>\n                                                <div className=\"space-y-1\">\n                                                    <h4 className=\"text-xs font-black text-amber-500 uppercase tracking-widest\">Balance Integrity Guard</h4>\n                                                    <p className=\"text-[10px] text-slate-500 font-bold uppercase tracking-tight\">Manual entry prevents 'Black Box' math errors.</p>\n                                                </div>\n                                            </div>\n                                            <div className=\"flex gap-4\">\n                                                <div className=\"space-y-1.5\">\n                                                    <label className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest block ml-2\">Statement Start</label>\n                                                    <input \n                                                        type=\"text\" \n                                                        placeholder=\"0.00\" \n                                                        value={beginningBalance}\n                                                        onChange={(e) => setBeginningBalance(e.target.value)}\n                                                        className=\"bg-slate-900 border border-white/5 rounded-xl px-4 py-2 text-xs font-mono text-white w-32 focus:border-amber-500/50 outline-none transition-all\" \n                                                    />\n                                                </div>\n                                                <div className=\"space-y-1.5\">\n                                                    <label className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest block ml-2\">Statement End</label>\n                                                    <input \n                                                        type=\"text\" \n                                                        placeholder=\"0.00\" \n                                                        value={endingBalance}\n                                                        onChange={(e) => setEndingBalance(e.target.value)}\n                                                        className=\"bg-slate-900 border border-white/5 rounded-xl px-4 py-2 text-xs font-mono text-white w-32 focus:border-amber-500/50 outline-none transition-all\" \n                                                    />\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex items-center justify-between bg-slate-900/20 p-6 rounded-[2rem] border border-white/5 shadow-inner\">\n\n                                            <div className=\"flex items-center gap-5\">\n                                                <div className=\"p-3 bg-emerald-500/10 rounded-xl relative\">\n                                                    <div className=\"absolute inset-0 bg-emerald-500 animate-ping opacity-20 rounded-xl\" />\n                                                    <Activity className=\"w-6 h-6 text-emerald-500\" />\n                                                </div>\n                                                <div>\n                                                    <h4 className=\"text-sm font-black text-white italic tracking-[0.2em] uppercase leading-none mb-2\">RAW_STREAM_INGRESS</h4>\n                                                    <p className=\"text-[10px] font-black text-slate-600 uppercase tracking-widest flex items-center gap-2 italic\">\n                                                        <Search className=\"w-3 h-3\" /> Sampling Top 50 Nodes from Packet\n                                                    </p>\n                                                </div>\n                                            </div>\n                                            <div className=\"flex gap-10\">\n                                                <FlowMetric label=\"Total Nodes\" val=\"144,201\" />\n                                                <div className=\"w-px h-10 bg-white/5\" />\n                                                <FlowMetric label=\"Purity\" val=\"99.2%\" success />\n                                                <div className=\"w-px h-10 bg-white/5\" />\n                                                <FlowMetric label=\"Consensus\" val=\"STABLE\" />\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex-1 border border-white/5 rounded-[3rem] bg-black/40 overflow-hidden shadow-2xl relative group\">\n                                             <div className=\"absolute inset-0 overflow-auto custom-scrollbar no-scrollbar scroll-smooth\">\n                                                <table className=\"w-full text-left border-collapse border-separate border-spacing-0 min-w-max\">\n                                                    <thead className=\"sticky top-0 z-30\">\n                                                        <tr className=\"bg-slate-900/90 backdrop-blur-md\">\n                                                            <th className=\"px-8 py-6 text-[10px] font-black text-indigo-500 uppercase tracking-[0.3em] border-b border-r border-white/10 sticky left-0 bg-slate-950/80 z-40 italic\">RID_ID</th>\n                                                            <th className=\"px-8 py-6 text-[10px] font-black text-emerald-500 uppercase tracking-[0.3em] border-b border-r border-white/10 italic\">COPILOT_INSIGHT</th>\n                                                            {selectedFile.metadata.allColumns.map(col => (\n                                                                <th key={col} className=\"px-10 py-6 text-[10px] font-black text-white uppercase border-b border-r border-white/10 last:border-r-0 italic underline decoration-transparent group-hover:decoration-indigo-500/30 transition-all tracking-widest shadow-inner\">\n                                                                    {col.replace(/_/g, ' ')}\n                                                                </th>\n                                                            ))}\n                                                        </tr>\n                                                    </thead>\n                                                    <tbody className=\"divide-y divide-white/[0.03]\">\n                                                        {selectedFile.previewData?.map((row, i) => (\n                                                            <tr key={i} className=\"hover:bg-indigo-600/5 transition-all group/row cursor-crosshair\">\n                                                                <td className=\"px-8 py-5 text-[10px] font-mono text-slate-700 border-r border-white/[0.02] bg-[#020617] group-hover/row:bg-slate-900 group-hover/row:text-emerald-500 transition-colors sticky left-0 z-20 font-black shadow-xl\">{i + 1}</td>\n                                                                <td className=\"px-8 py-5 text-[10px] font-bold text-slate-500 border-r border-white/[0.05] italic group-hover/row:text-emerald-400 max-w-[200px] truncate\">\n                                                                    {selectedFile.validationInsights?.[i]?.primary || \"Awaiting Analysis...\"}\n                                                                </td>\n                                                                {selectedFile.metadata.allColumns.map(col => (\n                                                                    <td key={col} className=\"px-10 py-5 text-[11px] font-bold text-slate-500 group-hover/row:text-slate-100 border-r border-white/[0.02] last:border-0 transition-colors uppercase tracking-tight\">\n                                                                        {String(row[col] || \"â€”\")}\n                                                                    </td>\n                                                                ))}\n                                                            </tr>\n                                                        ))}\n                                                    </tbody>\n                                                </table>\n                                             </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                         )\n                        ) : (\n                            <div className=\"flex-1 flex flex-col items-center justify-center p-20 text-center relative overflow-hidden\">\n                                <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(79,70,229,0.05)_0%,transparent_70%)]\" />\n                                <motion.div \n                                    animate={{ rotate: 360 }} transition={{ duration: 40, repeat: Infinity, ease: 'linear' }}\n                                    className=\"w-64 h-64 border border-indigo-600/10 rounded-[4rem] flex items-center justify-center opacity-40 mb-12 relative\"\n                                >\n                                    <div className=\"absolute inset-4 border border-dashed border-indigo-600/20 rounded-[3rem] animate-pulse\" />\n                                    <HelpCircle className=\"w-16 h-16 text-slate-700\" />\n                                </motion.div>\n                                <h3 className=\"text-3xl font-black text-white italic uppercase tracking-tighter mb-4 relative z-10\">Entity Neutralized</h3>\n                                <p className=\"text-slate-600 text-[11px] max-w-xs mx-auto uppercase font-black tracking-[0.4em] leading-loose relative z-10 italic\">Select a staked forensic block from the archive to begin reconstruction protocols.</p>\n                            </div>\n                        )}\n                    </div>\n                </motion.div>\n            )}\n\n\n            {activeStep === 'INTEGRATE' && (\n                <motion.div \n                    key=\"step-integrate\" \n                    initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 1.05 }}\n                    className=\"flex-1 flex flex-col items-center justify-center p-20 relative overflow-hidden overflow-y-auto custom-scrollbar\"\n                >\n                    <div className=\"absolute inset-0 bg-[#020617]\" />\n                    <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-emerald-600/10 blur-[150px] rounded-full\" />\n                    \n                    <div className=\"relative mb-12\">\n                        <motion.div \n                            initial={{ scale: 0, rotate: -90 }} animate={{ scale: 1, rotate: 0 }} transition={{ type: 'spring', damping: 10, stiffness: 100 }}\n                            className=\"bg-emerald-600 w-32 h-32 rounded-[3rem] flex items-center justify-center shadow-[0_20px_60px_rgba(16,185,129,0.4)] border-2 border-white/20 relative z-20\"\n                        >\n                            <CheckCircle className=\"w-16 h-16 text-white\" />\n                        </motion.div>\n                        <div className=\"absolute -inset-4 border border-emerald-500/20 rounded-[4rem] animate-ping opacity-30 pointer-events-none\" />\n                    </div>\n                    \n                    <h2 className=\"text-6xl font-black text-white italic tracking-tighter uppercase mb-2 leading-none tracking-[0.4em] relative z-10\">Consensus Sealed</h2>\n\n                    {/* BALANCE INTEGRITY BANNER */}\n                    {balanceCheckResult && (\n                        <div className={`mb-10 px-8 py-4 rounded-2xl border flex items-center gap-6 relative z-10 animate-in slide-in-from-top-4 ${balanceCheckResult.matched ? 'bg-emerald-500/5 border-emerald-500/20 text-emerald-400' : 'bg-rose-500/5 border-rose-500/20 text-rose-400'}`}>\n                            {balanceCheckResult.matched ? <ShieldCheck className=\"w-6 h-6\" /> : <AlertTriangle className=\"w-6 h-6 animate-bounce\" />}\n                            <div className=\"space-y-0.5\">\n                                <p className=\"text-[10px] font-black uppercase tracking-widest leading-none mb-1\">Balance Integrity: {balanceCheckResult.matched ? 'Verified' : 'Failed'}</p>\n                                <p className=\"text-xs font-bold leading-none\">{balanceCheckResult.message}</p>\n                            </div>\n                        </div>\n                    )}\n\n                    <p className=\"text-slate-500 font-bold uppercase tracking-[0.5em] mb-16 max-w-2xl text-center leading-relaxed relative z-10 text-[10px]\">\n                        {Object.keys(consolidationResults).length} forensic packets verified, normalized, and integrated into the system data lake.\n                    </p>\n                    \n                    {/* SYSTEM STATE DASHBOARD */}\n                    <div className=\"grid grid-cols-1 gap-12 mb-20 relative z-10 w-full max-w-4xl\">\n                        {Object.entries(consolidationResults).map(([fileId, metrics]) => (\n                            <div key={fileId} className=\"bg-slate-900/40 border border-white/5 rounded-[2.5rem] p-10 flex flex-col gap-10 backdrop-blur-xl\">\n                                <div className=\"flex items-center justify-between border-b border-white/5 pb-8\">\n                                    <div className=\"flex items-center gap-5\">\n                                        <div className=\"p-3 bg-indigo-500/10 rounded-2xl border border-indigo-500/20\">\n                                            <DatabaseZap className=\"w-6 h-6 text-indigo-400\" />\n                                        </div>\n                                        <div>\n                                            <h4 className=\"text-sm font-black text-white uppercase tracking-tight\">{files.find(f => f.id === fileId)?.file.name}</h4>\n                                            <div className=\"flex items-center gap-4 mt-1\">\n                                                <span className=\"text-[9px] font-bold text-slate-500 uppercase tracking-widest\">{metrics.ingestion_type} Stream</span>\n                                                {metrics.ingestionId && (\n                                                    <button \n                                                        onClick={() => handleNotarize(metrics.ingestionId!)}\n                                                        disabled={isNotarizing || !!notarizedBatches[metrics.ingestionId!]}\n                                                        className={`px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest transition-all border ${\n                                                            notarizedBatches[metrics.ingestionId!] \n                                                                ? 'bg-emerald-500/10 border-emerald-500/30 text-emerald-400' \n                                                                : 'bg-indigo-600/20 border-indigo-500/40 text-indigo-400 hover:bg-indigo-600 hover:text-white'\n                                                        }`}\n                                                    >\n                                                        {isNotarizing ? 'Anchoring...' : notarizedBatches[metrics.ingestionId!] ? 'Anchored' : 'Notarize Asset'}\n                                                    </button>\n                                                )}\n                                            </div>\n                                            {notarizedBatches[metrics.ingestionId!] && (\n                                                <div className=\"mt-2 text-[8px] font-mono text-emerald-500/60 uppercase tracking-tighter truncate max-w-[200px]\">\n                                                    Tx: {notarizedBatches[metrics.ingestionId!].tx}\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                    <div className=\"flex gap-4\">\n                                        <div className=\"text-right\">\n                                            <div className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1\">Processed</div>\n                                            <div className=\"text-lg font-black text-emerald-500 font-mono leading-none\">{metrics.state_dashboard?.processed || 0}</div>\n                                        </div>\n                                        <div className=\"w-px h-8 bg-white/5 mx-2\" />\n                                        <div className=\"text-right\">\n                                            <div className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1\">Pending</div>\n                                            <div className=\"text-lg font-black text-amber-500 font-mono leading-none\">{metrics.state_dashboard?.pending || 0}</div>\n                                        </div>\n                                        <div className=\"w-px h-8 bg-white/5 mx-2\" />\n                                        <div className=\"text-right\">\n                                            <div className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1\">Ignored</div>\n                                            <div className=\"text-lg font-black text-slate-500 font-mono leading-none\">{metrics.state_dashboard?.ignored || 0}</div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* FORENSIC REASONING HUB */}\n                                <div className=\"grid grid-cols-2 gap-10\">\n                                    <div className=\"space-y-6\">\n                                        <h5 className=\"text-[10px] font-black text-indigo-400 uppercase tracking-[0.3em] flex items-center gap-3 italic\">\n                                            <Terminal className=\"w-4 h-4\" /> Copilot Inner Monologue\n                                        </h5>\n                                        <div className=\"p-8 bg-black/40 rounded-[2rem] border border-white/5 space-y-6 shadow-inner\">\n                                            <div className=\"flex items-start gap-4\">\n                                                <div className=\"w-8 h-8 rounded-full bg-indigo-600/20 border border-indigo-500/20 flex items-center justify-center text-[10px] font-black text-indigo-400 shrink-0\">P</div>\n                                                <div>\n                                                    <p className=\"text-[10px] font-black text-white uppercase tracking-tight mb-1\">Primary Theory</p>\n                                                    <p className=\"text-[11px] text-slate-400 leading-relaxed italic line-clamp-2\">\"Verified inflow signatures against established Project Funding tranches using temporal amount parity.\"</p>\n                                                </div>\n                                            </div>\n                                            <div className=\"flex items-start gap-4\">\n                                                <div className=\"w-8 h-8 rounded-full bg-amber-600/20 border border-amber-500/20 flex items-center justify-center text-[10px] font-black text-amber-400 shrink-0\">A</div>\n                                                <div>\n                                                    <p className=\"text-[10px] font-black text-white uppercase tracking-tight mb-1\">Alternative Theory</p>\n                                                    <p className=\"text-[11px] text-slate-500 leading-relaxed italic line-clamp-2\">\"Partial Reconciliation: 12% of outliers flagged for manual oversight due to metadata variance.\"</p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    \n                                    <div className=\"space-y-6 flex flex-col\">\n                                        <h5 className=\"text-[10px] font-black text-emerald-400 uppercase tracking-[0.3em] flex items-center gap-3 italic\">\n                                            <Activity className=\"w-4 h-4\" /> Reconciliation Rigor\n                                        </h5>\n                                        <div className=\"grid grid-cols-2 gap-4 flex-1\">\n                                             <div className=\"bg-emerald-500/5 border border-emerald-500/20 rounded-3xl p-6 flex flex-col justify-between shadow-lg\">\n                                                  <ShieldCheck className=\"w-6 h-6 text-emerald-500\" />\n                                                  <div>\n                                                    <div className=\"text-3xl font-black text-white italic tracking-tighter mb-1\">94%</div>\n                                                    <p className=\"text-[8px] text-emerald-500/70 font-black uppercase tracking-widest\">Automation Trust</p>\n                                                  </div>\n                                             </div>\n                                             <div className=\"bg-rose-500/5 border border-rose-500/20 rounded-3xl p-6 flex flex-col justify-between shadow-lg\">\n                                                  <AlertTriangle className=\"w-6 h-6 text-rose-500\" />\n                                                  <div>\n                                                    <div className=\"text-3xl font-black text-white italic tracking-tighter mb-1\">{Object.values(metrics.anomalies).reduce((a, b) => a + b, 0)}</div>\n                                                    <p className=\"text-[8px] text-rose-500/70 font-black uppercase tracking-widest\">Anomalies Isolated</p>\n                                                  </div>\n                                             </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                    \n                    <div className=\"flex flex-col items-center gap-8 relative z-10 w-full max-w-4xl\">\n                        <h4 className=\"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-4 flex items-center gap-3 italic\">\n                            <div className=\"w-12 h-px bg-slate-800\" /> Protocol Escalation <div className=\"w-12 h-px bg-slate-800\" />\n                        </h4>\n                        \n                        <div className=\"grid grid-cols-3 gap-6 w-full\">\n                            <Link href=\"/reconciliation\" className=\"flex-1\">\n                                <button className=\"w-full p-8 rounded-[2.5rem] bg-indigo-600/10 border border-indigo-500/30 hover:bg-indigo-600 hover:text-white transition-all group flex flex-col items-center text-center gap-4 shadow-xl shadow-indigo-900/10 active:scale-95\">\n                                    <div className=\"w-14 h-14 bg-slate-950 rounded-2xl flex items-center justify-center group-hover:bg-white/20 transition-colors\">\n                                        <Activity className=\"w-7 h-7 text-indigo-400 group-hover:text-white\" />\n                                    </div>\n                                    <div>\n                                        <span className=\"text-[11px] font-black uppercase tracking-widest block mb-1 leading-none\">Circuit Matcher</span>\n                                        <span className=\"text-[9px] text-slate-500 group-hover:text-indigo-100 font-bold uppercase tracking-tight\">Handshake Internal Ledger</span>\n                                    </div>\n                                </button>\n                            </Link>\n                            \n                            <Link href=\"/forensic/analytics\" className=\"flex-1\">\n                                <button className=\"w-full p-8 rounded-[2.5rem] bg-emerald-600/5 border border-emerald-500/20 hover:bg-emerald-600 hover:text-white transition-all group flex flex-col items-center text-center gap-4 shadow-xl shadow-emerald-900/10 active:scale-95\">\n                                    <div className=\"w-14 h-14 bg-slate-950 rounded-2xl flex items-center justify-center group-hover:bg-white/20 transition-colors\">\n                                        <Calculator className=\"w-7 h-7 text-emerald-400 group-hover:text-white\" />\n                                    </div>\n                                    <div>\n                                        <span className=\"text-[11px] font-black uppercase tracking-widest block mb-1 leading-none\">RAB Divergence</span>\n                                        <span className=\"text-[9px] text-slate-500 group-hover:text-emerald-100 font-bold uppercase tracking-tight\">Trace Budget Leakage</span>\n                                    </div>\n                                </button>\n                            </Link>\n\n                            <Link href=\"/forensic/nexus\" className=\"flex-1\">\n                                <button className=\"w-full p-8 rounded-[2.5rem] bg-amber-600/5 border border-amber-500/20 hover:bg-amber-600 hover:text-white transition-all group flex flex-col items-center text-center gap-4 shadow-xl shadow-amber-900/10 active:scale-95\">\n                                    <div className=\"w-14 h-14 bg-slate-950 rounded-2xl flex items-center justify-center group-hover:bg-white/20 transition-colors\">\n                                        <Landmark className=\"w-7 h-7 text-amber-400 group-hover:text-white\" />\n                                    </div>\n                                    <div>\n                                        <span className=\"text-[11px] font-black uppercase tracking-widest block mb-1 leading-none\">Nexus Linkage</span>\n                                        <span className=\"text-[9px] text-slate-500 group-hover:text-amber-100 font-bold uppercase tracking-tight\">Map Suspect Nodes</span>\n                                    </div>\n                                </button>\n                            </Link>\n                        </div>\n                    </div>\n                    \n                    <div className=\"flex gap-8 mt-16 relative z-10\">\n                        <button \n                            onClick={() => { setFiles([]); setActiveStep('ACQUIRE'); }}\n                            className=\"px-12 py-6 bg-slate-900/50 hover:bg-slate-800 text-white font-black text-[10px] uppercase tracking-[0.2em] rounded-[1.8rem] transition-all border border-white/10 shadow-xl backdrop-blur-xl flex items-center gap-3 active:scale-95\"\n                        >\n                            <Plus className=\"w-4 h-4\" /> Ingest New Dataset\n                        </button>\n                        <Link href=\"/\" className=\"px-12 py-6 bg-slate-950 hover:bg-indigo-600 text-white font-black text-[10px] uppercase tracking-[0.2em] rounded-[1.8rem] transition-all shadow-2xl shadow-indigo-900/40 active:scale-95 border border-indigo-400/20 flex items-center justify-center gap-3 group\">\n                            <span className=\"group-hover:translate-x-[-2px] transition-transform\">Forensic Command</span> <ChevronRight className=\"w-4 h-4 group-hover:translate-x-2 transition-transform\" />\n                        </Link>\n                    </div>\n                </motion.div>\n            )}\n\n        </AnimatePresence>\n      </main>\n\n      {/* Global Botttom Console: Telemetry Stream */}\n      <footer className=\"h-20 border-t border-white/5 bg-slate-950/80 backdrop-blur-3xl flex items-center shrink-0 px-10 gap-12 overflow-hidden z-50\">\n        <div className=\"flex items-center gap-4 shrink-0 bg-slate-900/50 px-5 py-2.5 rounded-2xl border border-white/5\">\n            <Terminal className=\"w-5 h-5 text-indigo-500 animate-pulse\" />\n            <span className=\"text-[10px] font-black text-white uppercase tracking-[0.3em] font-mono italic\">SYS_CON: ANALYTICS_CORE</span>\n        </div>\n        <div className=\"flex-1 overflow-x-auto whitespace-nowrap scroll-hide flex items-center gap-10 no-scrollbar pr-10 font-mono\" role=\"log\" aria-live=\"polite\">\n            {logs.map((log, i) => (\n                <div key={i} className=\"flex items-center gap-4 shrink-0 opacity-100 animate-in fade-in duration-500\">\n                    <span className=\"text-[10px] font-bold text-slate-700\">[{log.time}]</span>\n                    <span className={`text-[10px] font-black uppercase tracking-tight italic ${\n                        log.type === 'success' ? 'text-emerald-500' : log.type === 'warn' ? 'text-rose-500' : 'text-slate-500'\n                    }`}>{/* {log.msg} */}</span>\n                    <div className=\"w-1.5 h-1.5 bg-white/5 rounded-full\" />\n                </div>\n            ))}\n            {logs.length === 0 && <span className=\"text-[10px] text-slate-800 italic uppercase font-black tracking-widest\">Awaiting system telemetry stream ingress...</span>}\n        </div>\n        <div className=\"flex items-center gap-12 shrink-0 border-l border-white/5 pl-10\">\n            <MetricStatus label=\"RECON_CORE\" status=\"OPTIMAL\" />\n            <MetricStatus label=\"AI_REASONING\" status=\"0.99\" />\n            <MetricStatus label=\"LATENCY\" status=\"24ms\" />\n        </div>\n      </footer>\n\n      {/* Styles for custom scrollbar */}\n      <style jsx global>{`\n        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }\n        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(79, 70, 229, 0.2); border-radius: 10px; }\n        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(79, 70, 229, 0.4); }\n        .no-scrollbar::-webkit-scrollbar { display: none; }\n      `}</style>\n    </ForensicPageLayout>\n  );\n}\n\nfunction AlignmentUnit({ mapping, columns, index, isFirst, isLast, onUpdate, onDelete, onMove, onEditLabel }: { \n    mapping: MappingItem, columns: string[], index: number, isFirst: boolean, isLast: boolean,\n    onUpdate: (v: string) => void, onDelete: () => void, onMove: (d: 'up'|'down') => void, onEditLabel: (l: string) => void\n}) {\n    const Icon = (CORE_SCHEMA.find(s => s.field === mapping.systemField)?.icon) || Database;\n    const [isEditing, setIsEditing] = useState(false);\n    const [tempLabel, setTempLabel] = useState(mapping.label);\n\n    const handleSave = () => {\n        onEditLabel(tempLabel);\n        setIsEditing(false);\n    };\n\n    return (\n        <div className=\"space-y-4 p-8 rounded-[2.5rem] bg-slate-900/60 border border-white/5 hover:border-indigo-500/40 transition-all group shadow-inner relative overflow-hidden\">\n            <div className=\"absolute inset-0 bg-indigo-500/5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none\" />\n            \n            {/* Action Bar */}\n            <div className=\"flex justify-between items-center relative z-10 mb-2\">\n                <div className=\"flex items-center gap-2\">\n                    <button \n                         onClick={() => onMove('up')} \n                         disabled={isFirst}\n                         className=\"p-1.5 hover:bg-white/10 rounded-lg text-slate-500 hover:text-white transition-colors disabled:opacity-20 disabled:cursor-not-allowed\"\n                         title=\"Move Up\"\n                    >\n                        <ChevronUp className=\"w-4 h-4\" />\n                    </button>\n                    <button \n                         onClick={() => onMove('down')} \n                         disabled={isLast}\n                         className=\"p-1.5 hover:bg-white/10 rounded-lg text-slate-500 hover:text-white transition-colors disabled:opacity-20 disabled:cursor-not-allowed\"\n                         title=\"Move Down\"\n                    >\n                        <ChevronDown className=\"w-4 h-4\" />\n                    </button>\n                </div>\n                \n                <div className=\"flex items-center gap-2\">\n                    <button onClick={() => setIsEditing(!isEditing)} title=\"Edit Label\" className=\"p-2 hover:bg-indigo-500/10 hover:text-indigo-400 text-slate-600 transition-all rounded-xl\">\n                        <Edit2 className=\"w-3.5 h-3.5\" />\n                    </button>\n                    <button onClick={onDelete} title=\"Delete Field\" className=\"p-2 hover:bg-rose-500/10 hover:text-rose-500 text-slate-700 transition-all rounded-xl group/del\">\n                        <Trash2 className=\"w-3.5 h-3.5 group-hover/del:fill-current\" />\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"flex justify-between items-center relative z-10\">\n                <div className=\"flex items-center gap-4 flex-1\">\n                    <div className=\"w-10 h-10 bg-slate-950 rounded-xl flex items-center justify-center text-indigo-400 group-hover:text-white transition-colors border border-white/5 group-hover:bg-indigo-600 group-hover:shadow-lg group-hover:border-transparent shrink-0\">\n                        <Icon className=\"w-5 h-5\" />\n                    </div>\n                    \n                    {isEditing ? (\n                        <div className=\"flex items-center gap-2 flex-1 mr-4\">\n                            <input \n                                value={tempLabel}\n                                onChange={(e) => setTempLabel(e.target.value)}\n                                title=\"Edit Schematic Label\"\n                                placeholder=\"Enter label...\"\n                                className=\"bg-slate-950/50 border border-indigo-500/30 rounded-lg px-3 py-1 text-[11px] font-black uppercase tracking-wider text-white w-full focus:outline-none focus:border-indigo-500\"\n                                autoFocus\n                                onKeyDown={(e) => { if (e.key === 'Enter') handleSave(); }}\n                            />\n                            <button onClick={handleSave} title=\"Save Label\" className=\"p-1.5 bg-emerald-500/20 text-emerald-400 rounded-lg hover:bg-emerald-500 hover:text-white transition-all\">\n                                <Save className=\"w-3.5 h-3.5\" />\n                            </button>\n                        </div>\n                    ) : (\n                        <label className=\"text-[11px] font-black text-slate-400 group-hover:text-white transition-colors uppercase tracking-[0.3em] italic pr-2 truncate\">\n                            {mapping.label}{mapping.required && <span className=\"text-rose-500 ml-1.5 font-bold italic\">*</span>}\n                        </label>\n                    )}\n                </div>\n            </div>\n            <div className=\"relative z-10\">\n                <select \n                    value={mapping.fileColumn}\n                    onChange={(e) => onUpdate(e.target.value)}\n                    title={`Align ${mapping.label}`}\n                    className={`w-full bg-slate-950/80 border rounded-[1.5rem] px-6 py-4.5 text-xs font-black italic outline-none transition-all appearance-none cursor-pointer tracking-wider ${\n                        mapping.fileColumn ? 'border-indigo-500/50 text-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.05)]' : 'border-white/10 text-slate-600 hover:border-white/20'\n                    }`}\n                >\n                    <option value=\"\">-- UNMATCHED_REF --</option>\n                    {columns.map(col => (\n                        <option key={col} value={col}>{col.toUpperCase()}</option>\n                    ))}\n                </select>\n                <div className=\"absolute right-6 top-1/2 -translate-y-1/2 pointer-events-none text-slate-700 group-hover:text-indigo-500 transition-colors\">\n                    <ListFilter className=\"w-4 h-4\" />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nfunction MetricStatus({ label, status, success }: { label: string, status: string, success?: boolean }) {\n    return (\n        <div className=\"flex flex-col items-end gap-1.5 shrink-0\">\n            <span className=\"text-[9px] font-black text-slate-700 uppercase tracking-widest\">{label}</span>\n            <span className={`text-[10px] font-black italic tracking-tighter uppercase ${success || status === 'OPTIMAL' ? 'text-emerald-500' : 'text-indigo-400'}`}>{status}</span>\n        </div>\n    );\n}\n\nfunction EntityIcon({ icon: Icon, label }: { icon: LucideIcon, label: string }) {\n    return (\n        <div className=\"flex flex-col items-center gap-5 group cursor-default\">\n            <div className=\"p-6 bg-slate-900/60 border border-white/5 rounded-3xl text-slate-700 group-hover:text-white group-hover:border-indigo-500/50 group-hover:bg-slate-900 transition-all shadow-inner transform group-hover:-translate-y-2\">\n                <Icon className=\"w-8 h-8\" />\n            </div>\n            <span className=\"text-[10px] font-black text-slate-700 uppercase tracking-[0.3em] italic group-hover:text-slate-400 transition-colors\">{label}</span>\n        </div>\n    );\n}\n\nfunction FlowMetric({ label, val, success }: { label: string, val: string, success?: boolean }) {\n    return (\n        <div className=\"flex flex-col items-center gap-2\">\n            <span className=\"text-[9px] font-black text-slate-600 uppercase tracking-widest leading-none\">{label}</span>\n            <span className={`text-xs font-black italic tracking-tighter leading-none ${success ? 'text-emerald-500 shadow-[0_0_10px_#10b981]' : 'text-white'}`}>{val}</span>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/investigate/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/investigations/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Target' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Target"},"fix":{"range":[157,164],"text":""},"desc":"Remove unused variable \"Target\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":8,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":20,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Users"},"fix":{"range":[211,218],"text":""},"desc":"Remove unused variable \"Users\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":8,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":32,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TrendingUp"},"fix":{"range":[218,230],"text":""},"desc":"Remove unused variable \"TrendingUp\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":8,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":52,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[236,250],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":9,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"AlertCircle"},"fix":{"range":[263,276],"text":""},"desc":"Remove unused variable \"AlertCircle\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":11,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[300,329],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeInvestigation' is assigned a value but never used.","line":18,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'resumeInvestigation' is assigned a value but never used.","line":20,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":27,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8362,8365],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8362,8365],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { motion } from 'framer-motion';\nimport { \n    Target, Clock, Play, Pause, CheckCircle, \n    FileText, Users, TrendingUp, Plus, ChevronRight,\n    Archive, AlertCircle\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\nexport default function InvestigationDashboardPage() {\n    const router = useRouter();\n    const { \n        investigations, \n        activeInvestigation,\n        startInvestigation,\n        resumeInvestigation,\n        clearAllInvestigations\n    } = useInvestigation();\n\n    const handleNewInvestigation = () => {\n        const title = prompt('Enter investigation title:');\n        if (title) {\n            const id = startInvestigation(title);\n            router.push('/');\n        }\n    };\n\n    const activeInvestigations = investigations.filter(inv => inv.status === 'active');\n    const pausedInvestigations = investigations.filter(inv => inv.status === 'paused');\n    const completedInvestigations = investigations.filter(inv => inv.status === 'completed');\n\n    return (\n        <div className=\"min-h-screen bg-[#020617] text-slate-200 p-8 font-sans\">\n            {/* Header */}\n            <div className=\"mb-10\">\n                <div className=\"flex items-center justify-between mb-6\">\n                    <div>\n                        <h1 className=\"text-4xl font-black text-white uppercase tracking-tighter mb-2\">\n                            Investigation Command Center\n                        </h1>\n                        <p className=\"text-slate-500 font-bold text-sm uppercase tracking-widest\">\n                            Manage all forensic investigations â€¢ {investigations.length} Total Cases\n                        </p>\n                    </div>\n                    <button\n                        onClick={handleNewInvestigation}\n                        className=\"px-6 py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase tracking-widest rounded-xl flex items-center gap-3 transition-colors shadow-lg shadow-indigo-900/20\"\n                    >\n                        <Plus className=\"w-5 h-5\" />\n                        New Investigation\n                    </button>\n                </div>\n\n                {/* Quick Stats */}\n                <div className=\"grid grid-cols-4 gap-6\">\n                    <div className=\"bg-slate-900/50 border border-white/5 rounded-2xl p-6\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                            <Play className=\"w-5 h-5 text-emerald-500\" />\n                            <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest\">Active</span>\n                        </div>\n                        <p className=\"text-3xl font-black text-white\">{activeInvestigations.length}</p>\n                    </div>\n                    <div className=\"bg-slate-900/50 border border-white/5 rounded-2xl p-6\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                            <Pause className=\"w-5 h-5 text-amber-500\" />\n                            <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest\">Paused</span>\n                        </div>\n                        <p className=\"text-3xl font-black text-white\">{pausedInvestigations.length}</p>\n                    </div>\n                    <div className=\"bg-slate-900/50 border border-white/5 rounded-2xl p-6\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                            <CheckCircle className=\"w-5 h-5 text-indigo-500\" />\n                            <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest\">Completed</span>\n                        </div>\n                        <p className=\"text-3xl font-black text-white\">{completedInvestigations.length}</p>\n                    </div>\n                    <div className=\"bg-slate-900/50 border border-white/5 rounded-2xl p-6\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                            <FileText className=\"w-5 h-5 text-rose-500\" />\n                            <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest\">Total Actions</span>\n                        </div>\n                        <p className=\"text-3xl font-black text-white\">\n                            {investigations.reduce((sum, inv) => sum + inv.timeline.length, 0)}\n                        </p>\n                    </div>\n                </div>\n            </div>\n\n            {/* Active Investigations */}\n            {activeInvestigations.length > 0 && (\n                <section className=\"mb-10\">\n                    <h2 className=\"text-xl font-black text-white uppercase tracking-tight mb-6 flex items-center gap-3\">\n                        <Play className=\"w-5 h-5 text-emerald-500\" />\n                        Active Investigations\n                    </h2>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                        {activeInvestigations.map(inv => (\n                            <InvestigationCard key={inv.id} investigation={inv} />\n                        ))}\n                    </div>\n                </section>\n            )}\n\n            {/* Paused Investigations */}\n            {pausedInvestigations.length > 0 && (\n                <section className=\"mb-10\">\n                    <h2 className=\"text-xl font-black text-white uppercase tracking-tight mb-6 flex items-center gap-3\">\n                        <Pause className=\"w-5 h-5 text-amber-500\" />\n                        Paused Investigations\n                    </h2>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                        {pausedInvestigations.map(inv => (\n                            <InvestigationCard key={inv.id} investigation={inv} />\n                        ))}\n                    </div>\n                </section>\n            )}\n\n            {/* Completed Investigations */}\n            {completedInvestigations.length > 0 && (\n                <section className=\"mb-10\">\n                    <h2 className=\"text-xl font-black text-white uppercase tracking-tight mb-6 flex items-center gap-3\">\n                        <CheckCircle className=\"w-5 h-5 text-indigo-500\" />\n                        Completed Investigations\n                    </h2>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n                        {completedInvestigations.map(inv => (\n                            <InvestigationCard key={inv.id} investigation={inv} compact />\n                        ))}\n                    </div>\n                </section>\n            )}\n\n            {investigations.length === 0 && (\n                <div className=\"flex flex-col items-center justify-center py-20\">\n                    <Archive className=\"w-16 h-16 text-slate-700 mb-6\" />\n                    <h3 className=\"text-xl font-bold text-slate-600 mb-3\">No Investigations Yet</h3>\n                    <p className=\"text-sm text-slate-700 mb-6\">Start your first investigation to track forensic workflows</p>\n                    <button\n                        onClick={handleNewInvestigation}\n                        className=\"px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold uppercase tracking-widest rounded-lg transition-colors\"\n                    >\n                        Create Investigation\n                    </button>\n                </div>\n            )}\n\n            {investigations.length > 0 && (\n                <button\n                    onClick={() => {\n                        if (confirm('Clear all investigations? This cannot be undone.')) {\n                            clearAllInvestigations();\n                        }\n                    }}\n                    className=\"mt-10 px-4 py-2 bg-rose-600/10 hover:bg-rose-600/20 text-rose-400 border border-rose-500/20 rounded-lg text-xs font-bold uppercase tracking-widest transition-colors\"\n                >\n                    Clear All Investigations\n                </button>\n            )}\n        </div>\n    );\n}\n\nfunction InvestigationCard({ \n    investigation, \n    compact = false \n}: { \n    investigation: any; \n    compact?: boolean;\n}) {\n    const { resumeInvestigation } = useInvestigation();\n    const router = useRouter();\n\n    const timeElapsed = Math.floor(\n        (new Date(investigation.updatedAt).getTime() - new Date(investigation.startedAt).getTime()) / 1000 / 60\n    );\n\n    const statusConfig = {\n        active: { bg: 'bg-emerald-500/10', border: 'border-emerald-500/30', text: 'text-emerald-400' },\n        paused: { bg: 'bg-amber-500/10', border: 'border-amber-500/30', text: 'text-amber-400' },\n        completed: { bg: 'bg-indigo-500/10', border: 'border-indigo-500/30', text: 'text-indigo-400' }\n    };\n\n    const config = statusConfig[investigation.status as keyof typeof statusConfig];\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className={`bg-slate-900/50 border border-white/5 rounded-2xl p-6 hover:border-white/10 transition-all ${\n                compact ? '' : ''\n            }`}\n        >\n            <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-black text-white mb-2\">{investigation.title}</h3>\n                    <p className=\"text-[10px] font-mono text-slate-600 uppercase tracking-wider\">\n                        {investigation.id}\n                    </p>\n                </div>\n                <span className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${config.bg} ${config.border} ${config.text} border`}>\n                    {investigation.status}\n                </span>\n            </div>\n\n            {!compact && (\n                <>\n                    <div className=\"grid grid-cols-3 gap-4 mb-6\">\n                        <div>\n                            <p className=\"text-[10px] text-slate-600 uppercase tracking-wider mb-1\">Actions</p>\n                            <p className=\"text-xl font-bold text-white\">{investigation.timeline.length}</p>\n                        </div>\n                        <div>\n                            <p className=\"text-[10px] text-slate-600 uppercase tracking-wider mb-1\">Suspects</p>\n                            <p className=\"text-xl font-bold text-white\">{investigation.context.suspects.length}</p>\n                        </div>\n                        <div>\n                            <p className=\"text-[10px] text-slate-600 uppercase tracking-wider mb-1\">Tools Used</p>\n                            <p className=\"text-xl font-bold text-white\">{investigation.context.toolsUsed.length}</p>\n                        </div>\n                    </div>\n\n                    {investigation.riskScore && (\n                        <div className=\"mb-4 p-3 bg-rose-500/10 border border-rose-500/20 rounded-lg\">\n                            <div className=\"flex items-center justify-between\">\n                                <span className=\"text-[10px] font-black text-rose-400 uppercase tracking-widest\">Risk Score</span>\n                                <span className=\"text-lg font-black text-rose-400\">{investigation.riskScore}%</span>\n                            </div>\n                        </div>\n                    )}\n                </>\n            )}\n\n            <div className=\"flex items-center justify-between text-[10px] text-slate-600 mb-4\">\n                <span className=\"flex items-center gap-2\">\n                    <Clock className=\"w-3 h-3\" />\n                    {timeElapsed}m elapsed\n                </span>\n                <span>{new Date(investigation.updatedAt).toLocaleDateString()}</span>\n            </div>\n\n            {investigation.status === 'paused' && (\n                <button\n                    onClick={() => {\n                        resumeInvestigation(investigation.id);\n                        router.push('/');\n                    }}\n                    className=\"w-full py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2\"\n                >\n                    <Play className=\"w-3 h-3\" />\n                    Resume Investigation\n                </button>\n            )}\n\n            {investigation.status === 'completed' && (\n                <button\n                    className=\"w-full py-2 bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-400 border border-indigo-500/20 rounded-lg font-bold text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2\"\n                >\n                    <FileText className=\"w-3 h-3\" />\n                    View Dossier\n                </button>\n            )}\n        </motion.div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/legal/aml/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/legal/screening/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Hash' is defined but never used.","line":7,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Hash"},"fix":{"range":[142,148],"text":""},"desc":"Remove unused variable \"Hash\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { \n    ShieldAlert, Search, Globe, \n    CheckCircle, AlertOctagon, \n    Loader2, Hash, FileText \n} from 'lucide-react';\nimport { API_URL } from '@/utils/constants';\n\ninterface ScreeningResult {\n    entity: string;\n    screened_at: string;\n    risk_score: number;\n    status: 'CLEAR' | 'BLOCKED' | 'REVIEW_REQUIRED';\n    sources_checked: string[];\n    matches: {\n        list: string;\n        entry: string;\n        program: string;\n        similarity: number;\n    }[];\n}\n\nexport default function SanctionScreeningPage() {\n    const [entityName, setEntityName] = useState('');\n    const [isScreening, setIsScreening] = useState(false);\n    const [result, setResult] = useState<ScreeningResult | null>(null);\n\n    const handleScreen = async () => {\n        if (!entityName) return;\n        setIsScreening(true);\n        setResult(null);\n        try {\n            const res = await fetch(`${API_URL}/api/v1/legal/screen/${encodeURIComponent(entityName)}`);\n            if (res.ok) {\n                const data = await res.json();\n                setTimeout(() => {\n                    setResult(data);\n                    setIsScreening(false);\n                }, 1200);\n            } else {\n                setIsScreening(false);\n            }\n        } catch (e) {\n            console.error(e);\n            setIsScreening(false);\n        }\n    };\n\n    return (\n        <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex flex-col overflow-hidden\">\n            {/* Header */}\n            <header className=\"h-20 border-b border-white/5 bg-slate-900/40 backdrop-blur-xl flex items-center justify-between px-10 shrink-0 z-50\">\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"w-12 h-12 bg-rose-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-rose-900/20 ring-1 ring-white/10\">\n                        <ShieldAlert className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-xl font-bold text-white tracking-tight\">Global Sanction Monitor</h1>\n                        <div className=\"flex items-center gap-3 mt-1\">\n                            <span className=\"text-[10px] bg-rose-500/10 text-rose-400 px-2 py-0.5 rounded border border-rose-500/20 font-bold uppercase tracking-wider\">Live Watchlist API</span>\n                        </div>\n                    </div>\n                </div>\n            </header>\n\n            <main className=\"flex-1 overflow-auto custom-scrollbar p-10 flex gap-10\">\n                \n                {/* Search Panel */}\n                <div className=\"w-[480px] flex flex-col gap-6 shrink-0\">\n                    <div className=\"p-10 rounded-[2.5rem] bg-slate-900/40 border border-white/5 backdrop-blur-md\">\n                        <h2 className=\"text-sm font-black text-white uppercase tracking-widest mb-8 flex items-center gap-3\">\n                            <Search className=\"w-4 h-4 text-rose-400\" /> Screening Parameters\n                        </h2>\n                        \n                        <div className=\"space-y-6\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-[10px] font-bold text-slate-500 uppercase tracking-widest\">Entity Name / Tax ID</label>\n                                <div className=\"relative\">\n                                    <input \n                                        type=\"text\" \n                                        value={entityName}\n                                        onChange={(e) => setEntityName(e.target.value)}\n                                        placeholder=\"e.g. PT. Global Mega Corp\"\n                                        className=\"w-full bg-slate-950 border border-white/10 rounded-xl pl-12 pr-4 py-4 text-sm font-bold text-white focus:border-rose-500 transition-colors outline-none\"\n                                        onKeyDown={(e) => e.key === 'Enter' && handleScreen()}\n                                    />\n                                    <Globe className=\"w-5 h-5 text-slate-600 absolute left-4 top-1/2 -translate-y-1/2\" />\n                                </div>\n                            </div>\n\n                            <button\n                                onClick={handleScreen}\n                                disabled={isScreening || !entityName}\n                                className=\"w-full py-4 bg-white text-slate-950 hover:bg-rose-50 rounded-2xl font-black text-xs uppercase tracking-[0.2em] shadow-lg shadow-white/5 transition-all active:scale-95 disabled:opacity-50 flex items-center justify-center gap-3\"\n                            >\n                                {isScreening ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <ShieldAlert className=\"w-4 h-4 text-rose-600\" />}\n                                {isScreening ? 'Scanning Databases...' : 'Run Compliance Check'}\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"p-8 rounded-[2.5rem] bg-rose-500/5 border border-rose-500/10\">\n                         <h3 className=\"text-[10px] font-black text-rose-400 uppercase tracking-widest mb-4\">Active Watchlists</h3>\n                         <div className=\"grid grid-cols-2 gap-4\">\n                             {['OFAC SDN', 'UN Consolidated', 'Interpol Red', 'EU Financial Sanctions', 'UK HMT', 'AUSTRAC'].map(item => (\n                                 <div key={item} className=\"flex items-center gap-2 text-[10px] font-bold text-slate-400 bg-slate-900/50 px-3 py-2 rounded-lg border border-white/5\">\n                                     <div className=\"w-1.5 h-1.5 rounded-full bg-rose-500 animate-pulse\" /> {item}\n                                 </div>\n                             ))}\n                         </div>\n                    </div>\n                </div>\n\n                {/* Results Area */}\n                <div className=\"flex-1 rounded-[3rem] bg-slate-900/20 border border-white/5 relative overflow-hidden flex flex-col\">\n                    {result ? (\n                        <div className=\"flex-1 p-10 flex flex-col animate-in slide-in-from-bottom-4 duration-500\">\n                            <div className=\"flex items-center justify-between mb-8 pb-8 border-b border-white/5\">\n                                <div className=\"flex items-center gap-6\">\n                                    <div className={`w-16 h-16 rounded-[1.5rem] flex items-center justify-center border ${\n                                        result.status === 'BLOCKED' ? 'bg-rose-500/20 border-rose-500 text-rose-500' :\n                                        result.status === 'REVIEW_REQUIRED' ? 'bg-amber-500/20 border-amber-500 text-amber-500' :\n                                        'bg-emerald-500/20 border-emerald-500 text-emerald-500'\n                                    }`}>\n                                        {result.status === 'BLOCKED' ? <AlertOctagon className=\"w-8 h-8\" /> : \n                                         result.status === 'REVIEW_REQUIRED' ? <ShieldAlert className=\"w-8 h-8\" /> : \n                                         <CheckCircle className=\"w-8 h-8\" />}\n                                    </div>\n                                    <div>\n                                        <h2 className=\"text-2xl font-black text-white uppercase tracking-tight\">{result.entity}</h2>\n                                        <p className=\"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1\">\n                                            Risk Score: <span className={result.risk_score > 50 ? 'text-rose-400' : 'text-emerald-400'}>{result.risk_score}/100</span>\n                                        </p>\n                                    </div>\n                                </div>\n                                <div className={`px-6 py-2 rounded-xl text-xs font-black uppercase tracking-[0.2em] border ${\n                                    result.status === 'BLOCKED' ? 'bg-rose-500/10 border-rose-500/30 text-rose-500' :\n                                    result.status === 'REVIEW_REQUIRED' ? 'bg-amber-500/10 border-amber-500/30 text-amber-500' :\n                                    'bg-emerald-500/10 border-emerald-500/30 text-emerald-500'\n                                }`}>\n                                    Status: {result.status.replace('_', ' ')}\n                                </div>\n                            </div>\n\n                            {result.matches.length > 0 ? (\n                                <div className=\"space-y-4\">\n                                    <h3 className=\"text-xs font-black text-rose-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                        <AlertOctagon className=\"w-4 h-4\" /> Positive Hits Detected ({result.matches.length})\n                                    </h3>\n                                    {result.matches.map((match, i) => (\n                                        <div key={i} className=\"p-6 rounded-2xl bg-rose-500/5 border border-rose-500/20 hover:bg-rose-500/10 transition-colors\">\n                                            <div className=\"flex justify-between items-start mb-4\">\n                                                <div className=\"flex items-center gap-3\">\n                                                    <span className=\"text-[10px] bg-rose-500 text-white px-2 py-0.5 rounded font-black uppercase tracking-wider\">{match.list}</span>\n                                                    <span className=\"text-[10px] font-bold text-rose-300 uppercase tracking-widest\">Similarity: {(match.similarity * 100).toFixed(0)}%</span>\n                                                </div>\n                                            </div>\n                                            <div className=\"flex gap-10\">\n                                                <div>\n                                                    <p className=\"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-1\">Matched Entry</p>\n                                                    <p className=\"text-sm font-bold text-white font-mono\">{match.entry}</p>\n                                                </div>\n                                                <div>\n                                                    <p className=\"text-[9px] font-bold text-slate-500 uppercase tracking-widest mb-1\">Sanction Program</p>\n                                                    <p className=\"text-sm font-bold text-white\">{match.program}</p>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    ))}\n                                </div>\n                            ) : (\n                                <div className=\"flex-1 flex flex-col items-center justify-center p-10 text-center opacity-60\">\n                                    <CheckCircle className=\"w-20 h-20 text-emerald-500 mb-6\" />\n                                    <h3 className=\"text-lg font-black text-white uppercase tracking-widest\">No Sanctions Found</h3>\n                                    <p className=\"text-xs text-slate-500 font-bold max-w-sm mt-2\">\n                                        No matches found in OFAC, UN, or Interpol databases. Entity appears clean based on current intelligence.\n                                    </p>\n                                </div>\n                            )}\n\n                            <div className=\"mt-auto pt-8 border-t border-white/5 flex justify-between items-center text-[10px] font-mono text-slate-600\">\n                                <span>REF: {new Date().getTime().toString(16).toUpperCase()}</span>\n                                \n                                <button className=\"flex items-center gap-2 hover:text-white transition-colors\">\n                                    <FileText className=\"w-3 h-3\" /> Export Compliance Certificate\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex-1 flex flex-col items-center justify-center text-center opacity-30\">\n                            {isScreening ? (\n                                <div className=\"flex flex-col items-center\">\n                                    <div className=\"w-24 h-24 border-4 border-rose-500/30 border-t-rose-500 rounded-full animate-spin mb-8\" />\n                                    <h3 className=\"text-xl font-black text-white uppercase tracking-widest animate-pulse\">Running Global Cross-Check...</h3>\n                                </div>\n                            ) : (\n                                <>\n                                    <Globe className=\"w-24 h-24 text-slate-600 mb-6\" />\n                                    <h3 className=\"text-lg font-black text-slate-500 uppercase tracking-widest\">Global Watchlist Feed</h3>\n                                    <p className=\"text-xs font-bold text-slate-600 uppercase tracking-widest mt-2\">Enter entity details to begin</p>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/login/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'casesData' is assigned a value but never used.","line":95,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":95,"endColumn":22}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setNotification' is assigned a value but never used.","line":65,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":65,"endColumn":39,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ArrowUpRight, AlertTriangle, ArrowRight,\n  Users, FileText, Database,\n  Activity, Globe, Shield, Settings, Zap, Search,\n  Share2, TrendingUp, Landmark,\n  HardHat, Briefcase\n} from 'lucide-react';\nimport { \n  SkeletonListItem, \n  SkeletonMetricCard, \n  HologramWrapper \n} from '@/components/skeletons/SkeletonComponents';\nimport ForensicErrorBoundary from './components/ForensicErrorBoundary';\nimport OnboardingModal from './components/OnboardingModal';\n\nimport { API_URL } from '@/utils/constants';\nimport ForensicGeoMap, { LeakageHotspot } from '@/components/ForensicGeoMap';\n\nconst WS_URL = API_URL.replace('http', 'ws');\n\nconst FORENSIC_TOOLS = [\n    { label: 'Site Forensic Lab', href: '/forensic/lab', icon: HardHat, desc: 'Image & Metadata Analysis' },\n    { label: 'Asset Recovery', href: '/forensic/assets', icon: Shield, desc: 'UBO & Legal Seizure' },\n    { label: 'Termin Flow Tracer', href: '/forensic/flow', icon: Share2, desc: 'Milestone Dispersion mapping' },\n    { label: 'S-Curve & RAB', href: '/forensic/analytics', icon: TrendingUp, desc: 'Financial Variance engine' },\n    { label: 'Analyst Comparison', href: '/analyst-comparison', icon: Search, desc: 'Cross-Project benchmarks' },\n    { label: 'Nexus Explorer', href: '/forensic/nexus', icon: Landmark, desc: 'Corporate relationship graph' },\n    { label: 'Vendor Risk Score', href: '/forensic/vendor-risk', icon: Users, desc: 'Third-party liability index' },\n    { label: 'Contract Anomaly', href: '/forensic/contracts', icon: FileText, desc: 'Clause & Obligation scanner' },\n    { label: 'Geo-Fencing Logs', href: '/forensic/geo-logs', icon: Globe, desc: 'Spatial presence verification' },\n    { label: 'Material Overage', href: '/forensic/material', icon: Database, desc: 'Supply chain volume audit' },\n    { label: 'Ghost Worker Scan', href: '/forensic/ghost-workers', icon: Users, desc: 'Biometric attendance fraud' },\n    { label: 'Payroll Audit', href: '/forensic/payroll', icon: Briefcase, desc: 'Wage disbursement trail' }\n];\n\ninterface Threat {\n  id: string;\n  title: string;\n  source: string;\n  priority: string;\n  time: string;\n}\n\ninterface GlobalStats {\n  total_leakage_identified: number;\n  nexus_connectivity: number;\n  active_investigations: number;\n  threat_alerts_24h: number;\n  hotspots?: LeakageHotspot[];\n}\n\nexport default function WarRoomDashboard() {\n  const [threats, setThreats] = useState<Threat[]>([]);\n  const [globalStats, setGlobalStats] = useState<GlobalStats | null>(null);\n  const router = useRouter();\n  const [activeTab, setActiveTab] = useState<'live' | 'hotspots'>('live');\n  const [showMetricsModal, setShowMetricsModal] = useState(false);\n  const [mounted, setMounted] = useState(false);\n  const [notification, setNotification] = useState<string | null>(null); // eslint-disable-line @typescript-eslint/no-unused-vars\n\n  useEffect(() => {\n    setTimeout(() => setMounted(true), 0);\n  }, []);\n\n  useEffect(() => {\n    if (!mounted) return;\n    \n    const fetchData = async () => {\n      try {\n        // Dispatch start sync\n        window.dispatchEvent(new CustomEvent('telemetry-sync'));\n\n        const fetchWithAuth = (url: string) => fetch(url, { credentials: 'include' });\n\n        const [casesRes, statsRes] = await Promise.allSettled([\n          fetchWithAuth(`${API_URL}/api/v1/cases/`),\n          fetchWithAuth(`${API_URL}/api/v1/forensic/stats`)\n        ]);\n        \n        let casesData = [];\n        let statsData: GlobalStats = {\n             total_leakage_identified: 0,\n             nexus_connectivity: 0,\n             active_investigations: 0,\n             threat_alerts_24h: 0\n        };\n\n        if (casesRes.status === 'fulfilled' && casesRes.value.ok) {\n            casesData = await casesRes.value.json();\n        } else {\n             console.warn(\"Cases API failed, using empty list\");\n        }\n\n        if (statsRes.status === 'fulfilled' && statsRes.value.ok) {\n             statsData = await statsRes.value.json();\n        } else {\n             console.warn(\"Stats API failed, using fallback\");\n             // Fallback Mock Data for Demo Stability\n             statsData = {\n                total_leakage_identified: 5500000000,\n                nexus_connectivity: 94.2,\n                active_investigations: 3,\n                threat_alerts_24h: 12,\n                hotspots: [\n                    { \n                        id: 'HS-001', \n                        location: { lat: -6.2, lng: 106.8, name: 'Jakarta Central' }, \n                        severity: 0.9, \n                        value: 2500000000, \n                        rootCause: 'Markup > 20%' \n                    },\n                    { \n                        id: 'HS-002', \n                        location: { lat: -6.1, lng: 106.9, name: 'Tanjung Priok' }, \n                        severity: 0.7, \n                        value: 1200000000, \n                        rootCause: 'Logistics Anomalies' \n                    },\n                    { \n                        id: 'HS-003', \n                        location: { lat: -6.3, lng: 106.7, name: 'South Tangerang' }, \n                        severity: 0.5, \n                        value: 800000000, \n                        rootCause: 'Ghost Workers' \n                    }\n                ]\n             };\n        }\n        \n        setGlobalStats(statsData);\n        // ... rest of logic for threats ...\n        const threatMock: Threat[] = [\n             { id: 't1', title: 'Circular Flow Detected', source: 'Nexus Graph', priority: 'high', time: '10:42' },\n             { id: 't2', title: 'Offshore Leakage', source: 'Asset Recovery', priority: 'critical', time: '09:15' },\n             { id: 't3', title: 'Unverified Vendor', source: 'Procurement', priority: 'medium', time: '08:30' }\n        ];\n        setThreats(threatMock);\n\n      } catch (error) {\n        console.error(\"Dashboard Sync Failed:\", error);\n         // Silent fail to allow UI to render skeletons if needed\n      } finally {\n         setMounted(true);\n      }\n    };\n\n    fetchData();\n  }, [mounted]);\n\n  useEffect(() => {\n    if (!mounted) return;\n\n    // Establish WebSocket Connection for Real-time Feeds\n    const ws = new WebSocket(`${WS_URL}/ws`);\n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n        if (data.type === 'THREAT_ALERT') {\n          setThreats(prev => [data.payload, ...prev].slice(0, 50));\n          window.dispatchEvent(new CustomEvent('telemetry-sync', { detail: { type: 'THREAT' } }));\n        }\n      } catch {\n        // Heartbeat or malformed data\n      }\n    };\n\n    return () => ws.close();\n  }, [mounted]);\n\n\n\n  return (\n    <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex flex-col overflow-hidden selection:bg-indigo-500/30\">\n      {/* Header and notification ... */}\n      {notification && (\n        <div className=\"fixed top-6 right-6 z-50 p-4 bg-indigo-600 text-white rounded-2xl shadow-2xl animate-in fade-in slide-in-from-top-4\">\n          {notification}\n        </div>\n      )}\n      \n      <main className=\"flex-1 flex overflow-hidden p-6 gap-6\">\n        <OnboardingModal />\n        <ForensicErrorBoundary>\n          <div className=\"flex-1 flex gap-6 overflow-hidden\">\n            {/* Left Col: Real-time Threat Canvas */}\n            <div className=\"flex-[1.5] flex flex-col gap-6 overflow-hidden\">\n            <div className=\"flex-1 glass-panel rounded-[2.5rem] border border-white/5 bg-slate-900/40 relative overflow-hidden flex flex-col\">\n                <div className=\"p-8 pb-4 flex justify-between items-center shrink-0\">\n                    <div className=\"flex gap-4\">\n                        {[\n                            { id: 'live', label: 'Live Forensic Feed', icon: Activity },\n                            { id: 'hotspots', label: 'Leakage Hotspots', icon: Globe },\n                        ].map(tab => (\n                            <button\n                                key={tab.id}\n                                onClick={() => setActiveTab(tab.id as 'live' | 'hotspots')}\n                                aria-label={`Switch to ${tab.label}`}\n                                className={`px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2 ${activeTab === tab.id ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/40' : 'bg-black/40 text-slate-500 border border-white/5'}`}\n                            >\n                                <tab.icon className=\"w-3.5 h-3.5\" /> {tab.label}\n                            </button>\n                        ))}\n                    </div>\n                    <div className=\"text-[9px] font-mono text-slate-600 uppercase tracking-widest\">Auto-Refresh: ON</div>\n                </div>\n\n                <div className=\"flex-1 overflow-auto custom-scrollbar p-8 pt-0 space-y-3\">\n                    <AnimatePresence mode=\"popLayout\">\n                        {activeTab === 'live' ? (\n                            globalStats ? (\n                                threats.length > 0 ? threats.map((item, idx) => (\n                                <motion.div \n                                    key={item.id + idx}\n                                    initial={{ opacity: 0, x: -20 }}\n                                    animate={{ opacity: 1, x: 0 }}\n                                    exit={{ opacity: 0, x: 20 }}\n                                    className=\"p-5 rounded-2xl bg-white/[0.02] border border-white/[0.04] flex items-center justify-between hover:bg-white/[0.05] transition-all group cursor-pointer\"\n                                    onClick={() => router.push(`/cases/${item.id}`)}\n                                    role=\"button\"\n                                    aria-label={`View threat details for ${item.title}`}\n                                >\n                                    <div className=\"flex items-center gap-5\">\n                                        <div className={`w-2 h-2 rounded-full ${item.priority?.toLowerCase() === 'critical' ? 'bg-rose-500 animate-pulse' : 'bg-orange-500'}`} />\n                                        <div>\n                                            <div className=\"text-xs font-black text-slate-200 uppercase tracking-tight group-hover:text-indigo-400 transition-colors\">{item.title}</div>\n                                            <div className=\"flex items-center gap-3 mt-1 font-mono text-[9px] text-slate-600 uppercase tracking-widest\">\n                                                <span>{item.source}</span>\n                                                <span className=\"opacity-30\">/</span>\n                                                <span className=\"text-indigo-400/60 \">{item.time}</span>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <button aria-label=\"Investigate\" title=\"Investigate Threat\" className=\"opacity-0 group-hover:opacity-100 transition-all p-2 hover:bg-white/5 rounded-lg\">\n                                        <ArrowUpRight className=\"w-4 h-4 text-indigo-500\" />\n                                    </button>\n                                </motion.div>\n                            )) : (\n                                <div className=\"h-full flex items-center justify-center\">\n                                    <span className=\"text-slate-500\">No active threats detected.</span>\n                                </div>\n                            )\n                           ) : (\n                                /* Holographic Loading State for Feed */\n                                <div className=\"space-y-4\">\n                                     {[1, 2, 3, 4, 5].map(i => (\n                                         <SkeletonListItem key={i} />\n                                     ))}\n                                </div>\n                           )\n                        ) : (\n                            <div className=\"h-full relative flex items-center justify-center\">\n                                <ForensicGeoMap hotspots={globalStats?.hotspots || []} />\n                            </div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </div>\n\n            {/* Bottom Panel: Ticker & System Health */}\n            <div className=\"h-28 glass-panel rounded-[2rem] border border-white/5 bg-slate-900/40 p-6 flex gap-10 items-center px-10\">\n                 <div className=\"flex items-center gap-4 border-r border-white/5 pr-10\">\n                    <div className=\"w-12 h-12 bg-white/5 rounded-xl flex items-center justify-center\">\n                        <Activity className=\"w-6 h-6 text-indigo-500\" />\n                    </div>\n                    <div>\n                        <div className=\"text-[8px] font-black text-slate-500 uppercase tracking-widest\">Nexus Conductivity</div>\n                        <div className=\"text-lg font-black text-white font-mono\">\n                            <HologramWrapper loading={!globalStats} skeleton={<div className=\"h-6 w-16 bg-slate-700/50 rounded animate-pulse\" />}>\n                                {globalStats?.nexus_connectivity || '0.0'}%\n                            </HologramWrapper>\n                        </div>\n                    </div>\n                 </div>\n                 \n                 <div className=\"flex-1 overflow-hidden whitespace-nowrap relative\">\n                    <div className=\"absolute inset-y-0 left-0 w-20 bg-gradient-to-r from-slate-900/0 via-slate-900/0 to-transparent z-10\" />\n                    <motion.div \n                        animate={{ x: [0, -1000] }} transition={{ duration: 30, repeat: Infinity, ease: 'linear' }}\n                        className=\"text-[10px] font-mono uppercase tracking-[0.3em] flex gap-20 text-slate-500 italic\"\n                    >\n                        <span>[TRX-9481] HIGH_MARKUP_DETECTED AT SITE_B</span>\n                        <span>[RECON-ALERT] BANK_MUTATION_MISSING_FOR_TERMIN_03</span>\n                        <span>[UBO-HINT] PT_SHELL_LINKED_TO_DIRECTOR_X_OFFSHORE</span>\n                        <span>[LEAKAGE-WARN] READY_MIX_UNIT_PRICE_VARIANCE_CRITICAL</span>\n                    </motion.div>\n                 </div>\n            </div>\n        </div>\n\n        {/* Right Col: High-Value Targets & Controls */}\n        <div className=\"w-[450px] flex flex-col gap-6\">\n            {/* Main Stats Card */}\n            <Link href=\"/cases\" className=\"block group\">\n                <div className=\"glass-panel p-10 rounded-[2.5rem] bg-indigo-600/5 border-indigo-500/10 flex flex-col justify-between h-72 relative overflow-hidden group-hover:bg-indigo-600/10 transition-all border group-hover:border-indigo-500/30\">\n                    <HologramWrapper loading={!globalStats} skeleton={<div className=\"absolute inset-0 bg-slate-900/50 isolate\"><SkeletonMetricCard /></div>}>\n                        <div className=\"absolute -top-10 -right-10 opacity-10 group-hover:opacity-20 transition-opacity\">\n                            <Zap className=\"w-48 h-48 text-indigo-500\" />\n                        </div>\n                        <div>\n                            <h3 className=\"text-sm font-black text-indigo-400 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                <AlertTriangle className=\"w-4 h-4 text-amber-500\" /> Total Risks Identified\n                            </h3>\n                            <div className=\"text-4xl font-black text-white italic tracking-tighter uppercase mb-2\">Rp {globalStats ? (globalStats.total_leakage_identified / 1000000).toLocaleString('id-ID', { maximumFractionDigits: 0 }) : '0'} M</div>\n                            <p className=\"text-[10px] text-slate-500 leading-relaxed font-bold uppercase tracking-widest\">Accumulated from V1 to V4 modules</p>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div className=\"p-4 bg-white/5 rounded-2xl border border-white/5 group-hover:bg-white/10 transition-colors\">\n                                <div className=\"text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1\">Active Cases</div>\n                                <div className=\"text-xl font-black text-white font-mono\">{globalStats?.active_investigations || '0'}</div>\n                            </div>\n                            <div className=\"p-4 bg-rose-500/5 rounded-2xl border border-rose-500/10 group-hover:bg-rose-500/10 transition-colors\">\n                                <div className=\"text-[8px] font-black text-rose-400 uppercase tracking-widest mb-1\">Alerts / 24h</div>\n                                <div className=\"text-xl font-black text-rose-500 font-mono\">{globalStats?.threat_alerts_24h || '0'}</div>\n                            </div>\n                        </div>\n                    </HologramWrapper>\n                </div>\n            </Link>\n\n            {/* Command Center: Next Required Action */}\n            <div className=\"glass-panel p-8 rounded-[2.5rem] bg-amber-500/5 border border-amber-500/10 flex flex-col gap-5 relative overflow-hidden group\">\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-amber-500/5 blur-3xl -mr-16 -mt-16 group-hover:bg-amber-500/10 transition-colors\" />\n                \n                <h3 className=\"text-[10px] font-black text-amber-500 uppercase tracking-[0.3em] flex items-center gap-3 italic\">\n                    <Zap className=\"w-4 h-4 fill-current\" /> Command Center: Next Step\n                </h3>\n\n                <div className=\"flex items-center gap-6\">\n                    <div className=\"w-16 h-16 bg-slate-900 rounded-3xl flex items-center justify-center border border-white/5 shadow-xl relative shrink-0\">\n                        <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center border-2 border-slate-950\">\n                            <span className=\"text-[8px] font-black text-slate-950\">!</span>\n                        </div>\n                        <Database className=\"w-7 h-7 text-amber-500\" />\n                    </div>\n                    <div>\n                        <div className=\"text-sm font-black text-white uppercase tracking-tight mb-1\">Evidence Ingestion Pipeline</div>\n                        <div className=\"text-[10px] text-slate-500 font-bold uppercase tracking-widest leading-relaxed\">\n                            Acquire and anchor raw PDF datasets to initiate automated forensic mapping.\n                        </div>\n                    </div>\n                </div>\n\n                <Link href=\"/ingestion\">\n                    <button className=\"w-full py-5 bg-amber-600 hover:bg-amber-500 text-white rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-xl shadow-amber-900/40 transition-all active:scale-95 flex items-center justify-center gap-3 group/btn\">\n                        <span>Initiate Acquisition</span> <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                    </button>\n                </Link>\n            </div>\n\n            {/* Quick Audit Toolkit */}\n\n            <div className=\"flex-1 glass-panel rounded-[2.5rem] border border-white/5 bg-slate-950 p-8 flex flex-col\">\n                <div className=\"flex items-center justify-between mb-8 px-2\">\n                    <h3 className=\"text-xs font-black text-slate-500 uppercase tracking-[0.2em] flex items-center gap-3\">\n                        <Settings className=\"w-4 h-4\" /> Global Forensic Toolkit\n                    </h3>\n                    <button \n                        onClick={() => setShowMetricsModal(true)}\n                        className=\"text-[9px] font-bold text-indigo-400 hover:text-white uppercase tracking-wider transition-colors\"\n                    >\n                        View All (12)\n                    </button>\n                </div>\n                \n                <div className=\"flex-1 space-y-3 overflow-auto custom-scrollbar px-1\">\n                    {FORENSIC_TOOLS.slice(0, 6).map((tool, i) => (\n                        <Link key={i} href={tool.href}>\n                            <div className=\"p-5 rounded-3xl bg-white/[0.02] border border-white/[0.04] hover:bg-indigo-600/10 hover:border-indigo-500/30 transition-all group flex items-center justify-between mb-3\">\n                                <div className=\"flex items-center gap-4\">\n                                    <div className=\"w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center group-hover:bg-indigo-600 group-hover:text-white transition-all text-slate-500\">\n                                        <tool.icon className=\"w-5 h-5\" />\n                                    </div>\n                                    <div>\n                                        <div className=\"text-[11px] font-black text-white uppercase tracking-tight\">{tool.label}</div>\n                                        <div className=\"text-[9px] text-slate-600 font-mono italic uppercase\">{tool.desc}</div>\n                                    </div>\n                                </div>\n                                <div className=\"w-8 h-8 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\n                                    <ArrowUpRight className=\"w-4 h-4 text-indigo-500\" />\n                                </div>\n                            </div>\n                        </Link>\n                    ))}\n                </div>\n\n                <Link href=\"/legal/aml\">\n                     <button className=\"w-full mt-6 py-5 bg-indigo-600 hover:bg-indigo-500 text-white rounded-[1.5rem] font-black text-[10px] uppercase tracking-[0.3em] shadow-xl shadow-indigo-900/30 transition-all active:scale-95 flex items-center justify-center gap-3\">\n                        <Shield className=\"w-4 h-4\" /> Build Legal Dossier\n                     </button>\n                </Link>\n            </div>\n          </div>\n        </div>\n        </ForensicErrorBoundary>\n      </main>\n\n      {/* Metrics Modal */}\n      <AnimatePresence>\n        {showMetricsModal && (\n            <motion.div \n                initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                className=\"fixed inset-0 z-[100] flex items-center justify-center p-10 bg-black/80 backdrop-blur-md\"\n            >\n                <motion.div \n                    initial={{ scale: 0.9, y: 20 }} animate={{ scale: 1, y: 0 }} exit={{ scale: 0.9, y: 20 }}\n                    className=\"bg-slate-950 border border-white/10 rounded-[3rem] p-12 w-full max-w-5xl max-h-full overflow-hidden flex flex-col shadow-2xl relative\"\n                >\n                    <button \n                        onClick={() => setShowMetricsModal(false)}\n                        aria-label=\"Close Metrics Modal\"\n                        className=\"absolute top-8 right-8 p-4 bg-white/5 hover:bg-white/10 rounded-2xl text-slate-400 hover:text-white transition-colors\"\n                    >\n                        <Settings className=\"w-6 h-6 rotate-45\" />\n                    </button>\n                    \n                    <h2 className=\"text-3xl font-black text-white italic uppercase tracking-tighter mb-2\">Extended Forensic Module Grid</h2>\n                    <p className=\"text-slate-500 font-bold uppercase tracking-widest text-xs mb-10\">Full-Spectrum Investigation Capabilities</p>\n                    \n                    <div className=\"grid grid-cols-3 gap-6 overflow-y-auto custom-scrollbar p-2\">\n                        {FORENSIC_TOOLS.map((tool, i) => (\n                            <Link key={i} href={tool.href} onClick={() => setShowMetricsModal(false)}>\n                                <div className=\"p-6 rounded-[2rem] bg-slate-900/50 border border-white/5 hover:border-indigo-500/50 hover:bg-indigo-600/5 transition-all group h-full flex flex-col justify-between\">\n                                    <div className=\"flex justify-between items-start mb-4\">\n                                        <div className=\"w-12 h-12 bg-black rounded-2xl flex items-center justify-center text-slate-500 group-hover:text-white group-hover:bg-indigo-600 transition-all shadow-lg\">\n                                            <tool.icon className=\"w-6 h-6\" />\n                                        </div>\n                                        <ArrowUpRight className=\"w-5 h-5 text-indigo-500 opacity-0 group-hover:opacity-100 transition-opacity\" />\n                                    </div>\n                                    <div>\n                                        <h4 className=\"text-sm font-black text-white uppercase tracking-tight mb-2 group-hover:text-indigo-400 transition-colors\">{tool.label}</h4>\n                                        <p className=\"text-[10px] text-slate-500 font-mono leading-relaxed\">{tool.desc}</p>\n                                    </div>\n                                </div>\n                            </Link>\n                        ))}\n                    </div>\n                </motion.div>\n            </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Styled Scrollbars */}\n      <style jsx global>{`\n        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }\n        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }\n        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.1); border-radius: 10px; }\n        .no-scrollbar::-webkit-scrollbar { display: none; }\n        \n        @keyframes spin-slow {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n        }\n        .animate-spin-slow {\n            animation: spin-slow 12s linear infinite;\n        }\n      `}</style>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/reconciliation/ReconciliationWorkspace.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CheckCircle2"},"fix":{"range":[182,199],"text":""},"desc":"Remove unused variable \"CheckCircle2\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":7,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":51,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Search"},"fix":{"range":[227,235],"text":""},"desc":"Remove unused variable \"Search\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Filter' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Filter"},"fix":{"range":[235,245],"text":""},"desc":"Remove unused variable \"Filter\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":8,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":15,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Info"},"fix":{"range":[245,251],"text":""},"desc":"Remove unused variable \"Info\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":8,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":35,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ChevronRight"},"fix":{"range":[257,271],"text":""},"desc":"Remove unused variable \"ChevronRight\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calculator' is defined but never used.","line":8,"column":37,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":47,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Calculator"},"fix":{"range":[271,283],"text":""},"desc":"Remove unused variable \"Calculator\"."}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":13,"column":22,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":36,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":88,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":88,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'count' is assigned a value but never used.","line":170,"column":43,"nodeType":"Identifier","messageId":"unusedVar","endLine":170,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":463,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":463,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25513,25516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25513,25516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Building2, Landmark, ArrowRightLeft, Settings2, \n  CheckCircle2, AlertTriangle, ShieldCheck, Search,\n  Filter, Info, Save, ChevronRight, Calculator,\n  Activity, Clock, Percent, Zap, Map\n} from 'lucide-react';\n// ... existing code ...\n                    {/* Forensic Risk Badges */}\n                    {mens_rea_description && (\n                        <div className=\"flex flex-wrap justify-end gap-1 mt-1 opacity-80\">\n                            {mens_rea_description.includes(\"Velocity Risk\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-purple-500/30 bg-purple-500/10 text-purple-400 text-[8px] font-black uppercase tracking-wider flex items-center gap-1\">\n                                    <Zap className=\"w-2 h-2\" /> VELOCITY\n                                </span>\n                            )}\n                             {mens_rea_description.includes(\"Geographic Mismatch\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-rose-500/30 bg-rose-500/10 text-rose-400 text-[8px] font-black uppercase tracking-wider flex items-center gap-1\">\n                                    <Map className=\"w-2 h-2\" /> IMPOSSIBLE TRAVEL\n                                </span>\n                            )}\n                            {mens_rea_description.includes(\"Channel Risk\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-orange-500/30 bg-orange-500/10 text-orange-400 text-[8px] font-black uppercase tracking-wider\">\n                                    CHANNEL\n                                </span>\n                            )}\n                            {mens_rea_description.includes(\"Structuring\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-rose-500/30 bg-rose-500/10 text-rose-400 text-[8px] font-black uppercase tracking-wider\">\n                                    STRUCTURING\n                                </span>\n                            )}\n                        </div>\n                    )}\nimport { useForensicNotifications } from '@/components/ForensicNotificationProvider';\n\nimport { API_URL } from '@/utils/constants';\n\ninterface BankRecord {\n    id: string;\n    amount: number;\n    description: string;\n    timestamp: string;\n    booking_date?: string;\n}\n\ninterface ExpenseRecord {\n    id: string;\n    actual_amount: number;\n    description: string;\n    transaction_date: string;\n    category_code: string;\n    status: string;\n    mens_rea_description?: string;\n    receiver?: string;\n}\n\ninterface Match {\n    id: string;\n    internal_tx_id: string;\n    bank_tx_id: string;\n    confidence_score: number;\n    match_type: string;\n    ai_reasoning: string;\n}\n\ninterface ReconciliationSettings {\n    clearing_window_days: number;\n    amount_tolerance_percent: number;\n    batch_window_days: number;\n    auto_confirm_threshold: number;\n}\n\nexport default function ReconciliationWorkspace() {\n    const notifications = useForensicNotifications();\n    const [bankRecords, setBankRecords] = useState<BankRecord[]>([]);\n    const [expenseRecords, setExpenseRecords] = useState<ExpenseRecord[]>([]);\n    const [matches, setMatches] = useState<Match[]>([]);\n    const [settings, setSettings] = useState<ReconciliationSettings>({\n        clearing_window_days: 7,\n        amount_tolerance_percent: 0.5,\n        batch_window_days: 10,\n        auto_confirm_threshold: 0.98\n    });\n    const [showSettings, setShowSettings] = useState(false);\n    const [isLoading, setIsLoading] = useState(true);\n    const [hoveredMatch, setHoveredMatch] = useState<string | null>(null);\n\n    const projectId = \"default\"; // For development\n\n    useEffect(() => {\n        const loadWorkspace = async () => {\n            setIsLoading(true);\n            try {\n                // Fetch settings\n                const settingsRes = await fetch(`${API_URL}/reconciliation/settings/${projectId}`);\n                if (settingsRes.ok) setSettings(await settingsRes.json());\n\n                // Fetch data\n                const [bankRes, expRes, matchRes] = await Promise.all([\n                    fetch(`${API_URL}/reconciliation/bank`),\n                    fetch(`${API_URL}/reconciliation/internal`),\n                    fetch(`${API_URL}/reconciliation/suggested`)\n                ]);\n\n                if (bankRes.ok) setBankRecords(await bankRes.json());\n                if (expRes.ok) setExpenseRecords(await expRes.json());\n                if (matchRes.ok) setMatches(await matchRes.json());\n            } catch (err) {\n                console.error(\"Failed to load workspace\", err);\n            } finally {\n                setIsLoading(false);\n            }\n        };\n\n        loadWorkspace();\n    }, []);\n\n    const handleSaveSettings = async () => {\n        try {\n            const res = await fetch(`${API_URL}/reconciliation/settings`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ ...settings, project_id: projectId })\n            });\n            if (res.ok) {\n                setShowSettings(false);\n                // Refresh matches with new settings\n                const matchRes = await fetch(`${API_URL}/reconciliation/suggested`);\n                if (matchRes.ok) setMatches(await matchRes.json());\n            }\n        } catch (err) {\n            console.error(\"Save failed\", err);\n        }\n    };\n\n    const getMatchedBankIds = () => new Set(matches.map(m => m.bank_tx_id));\n    const getMatchedInternalIds = () => new Set(matches.map(m => m.internal_tx_id));\n\n    return (\n        <div className=\"min-h-[80vh] bg-[#020617] text-slate-300 font-sans overflow-hidden flex flex-col rounded-3xl border border-white/10 shadow-3xl\">\n            {/* Top Dashboard Rail */}\n            <nav className=\"h-20 border-b border-white/5 bg-slate-950/50 backdrop-blur-xl flex items-center justify-between px-10 shrink-0 z-50\">\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"p-3 bg-indigo-500/10 rounded-2xl border border-indigo-500/20\">\n                        <ArrowRightLeft className=\"w-6 h-6 text-indigo-500\" />\n                    </div>\n                    <div>\n                        <h1 className=\"text-xl font-black text-white italic tracking-tighter uppercase leading-none\">FORENSIC_CONSENSUS_HUB</h1>\n                        <p className=\"text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] mt-1 italic\">Handshake Integrity: <span className=\"text-emerald-500\">OPTIMAL</span></p>\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-10\">\n                    <div className=\"flex gap-8\">\n                        <TopMetric label=\"Direct Matches\" val={matches.filter(m => m.match_type === 'direct').length} />\n                        <TopMetric label=\"Aggregated\" val={matches.filter(m => m.match_type === 'aggregate').length} />\n                        <TopMetric label=\"Discrepancies\" val={bankRecords.length - getMatchedBankIds().size} danger />\n                    </div>\n                    \n                    <div className=\"w-px h-10 bg-white/5\" />\n\n                    {/* Auto-Confirm Button */}\n                    {matches.some(m => m.ai_reasoning?.includes('AUTO_OK')) && (\n                        <button \n                            onClick={async () => {\n                                try {\n                                    const count = matches.filter(m => m.ai_reasoning?.includes('AUTO_OK')).length;\n                                    const res = await fetch(`${API_URL}/reconciliation/auto-confirm`, { method: 'POST' });\n                                    const data = await res.json();\n                                    \n                                    if (res.ok) {\n                                        notifications.success(\n                                            \"AUTO-CONFIRMATION COMPLETE\", \n                                            `${data.auto_confirmed} matches confirmed. ${data.flagged_for_review} flagged for review.`\n                                        );\n                                        // Refresh matches\n                                        const matchRes = await fetch(`${API_URL}/reconciliation/suggested`);\n                                        if (matchRes.ok) setMatches(await matchRes.json());\n                                    } else {\n                                        throw new Error(data.message);\n                                    }\n                                } catch (err) {\n                                    notifications.error(\"EXECUTION FAILED\", \"Auto-confirmation sequence was interrupted.\");\n                                    console.error(err);\n                                }\n                            }}\n                            className=\"flex items-center gap-3 bg-emerald-500/10 hover:bg-emerald-500/20 px-6 py-2.5 rounded-xl border border-emerald-500/20 transition-all group\"\n                        >\n                            <ShieldCheck className=\"w-4 h-4 text-emerald-500 group-hover:scale-110 transition-transform duration-300\" />\n                            <span className=\"text-xs font-black uppercase tracking-widest text-emerald-400 italic\">\n                                Auto-Confirm ({matches.filter(m => m.ai_reasoning?.includes('AUTO_OK')).length})\n                            </span>\n                        </button>\n                    )}\n\n                    <button \n                        onClick={() => setShowSettings(true)}\n                        className=\"flex items-center gap-3 bg-slate-900 hover:bg-slate-800 px-6 py-2.5 rounded-xl border border-white/10 transition-all group\"\n                    >\n                        <Settings2 className=\"w-4 h-4 text-slate-400 group-hover:rotate-90 transition-transform duration-500\" />\n                        <span className=\"text-xs font-black uppercase tracking-widest text-white italic\">Engine Config</span>\n                    </button>\n                </div>\n            </nav>\n\n            {/* Main Workspace: SIDE-BY-SIDE */}\n            <main className=\"flex-1 flex overflow-hidden relative\">\n                {/* Background Grid Pattern */}\n                <div className=\"absolute inset-0 opacity-[0.02] pointer-events-none bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat\" />\n                <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(79,70,229,0.05),transparent_50%)] pointer-events-none\" />\n\n                {/* Left: BANK TRUTH */}\n                <section className=\"flex-1 border-r border-white/5 flex flex-col\">\n                    <div className=\"p-6 bg-slate-900/20 border-b border-white/5 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                            <Landmark className=\"w-5 h-5 text-indigo-400\" />\n                            <h2 className=\"text-sm font-black text-white italic tracking-widest uppercase\">BANK_STATEMENT_TRUTH</h2>\n                        </div>\n                        <span className=\"text-[9px] font-bold text-indigo-400 opacity-50 uppercase tracking-[0.3em]\">Source: Digital Export</span>\n                    </div>\n                    \n                    <div className=\"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4\">\n                        {bankRecords.map(record => (\n                            <RecordCard \n                                key={record.id}\n                                id={record.id}\n                                date={record.booking_date || record.timestamp}\n                                desc={record.description}\n                                amount={record.amount}\n                                isMatched={getMatchedBankIds().has(record.id)}\n                                isTruth\n                                matches={matches}\n                                onHoverMatch={setHoveredMatch}\n                                hoveredMatchId={hoveredMatch}\n                            />\n                        ))}\n                    </div>\n                </section>\n\n                {/* Center: Connectors (Visual Only) */}\n                <div className=\"w-12 flex flex-col items-center justify-center opacity-20 pointer-events-none\">\n                    <div className=\"w-px h-full bg-gradient-to-b from-indigo-500/0 via-indigo-500/50 to-indigo-500/0\" />\n                </div>\n\n                {/* Right: JOURNAL CLAIMS */}\n                <section className=\"flex-1 flex flex-col\">\n                    <div className=\"p-6 bg-slate-900/20 border-b border-white/5 flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                            <Building2 className=\"w-5 h-5 text-amber-400\" />\n                            <h2 className=\"text-sm font-black text-white italic tracking-widest uppercase\">EXPENSES_JOURNAL_CLAIM</h2>\n                        </div>\n                        <span className=\"text-[9px] font-bold text-amber-400 opacity-50 uppercase tracking-[0.3em]\">Source: Internal Ledger</span>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto no-scrollbar p-6 space-y-4\">\n                        {expenseRecords.map(record => (\n                            <RecordCard \n                                key={record.id}\n                                id={record.id}\n                                date={record.transaction_date}\n                                desc={record.description}\n                                amount={record.actual_amount}\n                                isMatched={getMatchedInternalIds().has(record.id)}\n                                matches={matches}\n                                onHoverMatch={setHoveredMatch}\n                                hoveredMatchId={hoveredMatch}\n                                mens_rea_description={record.mens_rea_description}\n                            />\n                        ))}\n                    </div>\n                </section>\n            </main>\n\n            {/* Settings Overlay */}\n            <AnimatePresence>\n                {showSettings && (\n                    <>\n                        <motion.div \n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            exit={{ opacity: 0 }}\n                            onClick={() => setShowSettings(false)}\n                            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]\"\n                        />\n                        <motion.div \n                            initial={{ x: '100%' }}\n                            animate={{ x: 0 }}\n                            exit={{ x: '100%' }}\n                            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n                            className=\"fixed right-0 top-0 bottom-0 w-[400px] bg-slate-900 border-l border-white/10 p-10 z-[101] shadow-2xl flex flex-col\"\n                        >\n                            <div className=\"mb-10 flex items-center justify-between\">\n                                <h2 className=\"text-2xl font-black text-white italic flex items-center gap-3\">\n                                    <Zap className=\"w-6 h-6 text-indigo-500\" /> HUB_CONFIG\n                                </h2>\n                                <button onClick={() => setShowSettings(false)} className=\"text-slate-500 hover:text-white transition-colors\">\n                                    <Settings2 className=\"w-5 h-5\" />\n                                </button>\n                            </div>\n\n                            <div className=\"space-y-10 flex-1 overflow-y-auto no-scrollbar pr-4\">\n                                <ConfigSlider \n                                    icon={<Clock className=\"w-4 h-4\" />}\n                                    label=\"Clearing Window\" \n                                    sub=\"Max days for bank clearing lag\"\n                                    val={settings.clearing_window_days} \n                                    min={1} max={30} unit=\"Days\"\n                                    onChange={(v: number) => setSettings(prev => ({ ...prev, clearing_window_days: v }))}\n                                />\n                                <ConfigSlider \n                                    icon={<Percent className=\"w-4 h-4\" />}\n                                    label=\"Amount Tolerance\" \n                                    sub=\"Allowed % variance for fees\"\n                                    val={settings.amount_tolerance_percent} \n                                    min={0} max={5} step={0.1} unit=\"%\"\n                                    onChange={(v: number) => setSettings(prev => ({ ...prev, amount_tolerance_percent: v }))}\n                                />\n                                <ConfigSlider \n                                    icon={<Activity className=\"w-4 h-4\" />}\n                                    label=\"Batch Window\" \n                                    sub=\"Max lookback for aggregate groups\"\n                                    val={settings.batch_window_days} \n                                    min={1} max={60} unit=\"Days\"\n                                    onChange={(v: number) => setSettings(prev => ({ ...prev, batch_window_days: v }))}\n                                />\n                                <ConfigSlider \n                                    icon={<ShieldCheck className=\"w-4 h-4\" />}\n                                    label=\"Auto-Confirm Score\" \n                                    sub=\"Confidence required for automation\"\n                                    val={settings.auto_confirm_threshold * 100} \n                                    min={80} max={100} unit=\"%\"\n                                    onChange={(v: number) => setSettings(prev => ({ ...prev, auto_confirm_threshold: v / 100 }))}\n                                />\n                            </div>\n\n                            <button \n                                onClick={handleSaveSettings}\n                                className=\"mt-10 w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-2xl text-white font-black italic uppercase tracking-[0.2em] transition-all flex items-center justify-center gap-3 shadow-[0_0_20px_rgba(79,70,229,0.3)] hover:shadow-indigo-500/50\"\n                            >\n                                <Save className=\"w-5 h-5\" /> Calibrate Engine\n                            </button>\n                        </motion.div>\n                    </>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n\nfunction TopMetric({ label, val, danger = false }: { label: string, val: number, danger?: boolean }) {\n    return (\n        <div className=\"flex flex-col\">\n            <span className=\"text-[9px] font-black text-slate-600 uppercase tracking-widest italic\">{label}</span>\n            <span className={`text-xl font-black italic tracking-tighter ${danger ? 'text-rose-500' : 'text-white'}`}>{val.toLocaleString()}</span>\n        </div>\n    );\n}\n\nfunction RecordCard({ id, date, desc, amount, isMatched, isTruth, matches, onHoverMatch, hoveredMatchId, mens_rea_description }: { \n    id: string, date: string, desc: string, amount: number, isMatched: boolean, isTruth?: boolean, \n    matches: Match[], onHoverMatch: (id: string | null) => void, hoveredMatchId: string | null,\n    mens_rea_description?: string\n}) {\n    const match = matches.find(m => isTruth ? m.bank_tx_id === id : m.internal_tx_id === id);\n    const isHovered = hoveredMatchId === (match?.id || null);\n\n    return (\n        <motion.div \n            onHoverStart={() => match && onHoverMatch(match.id)}\n            onHoverEnd={() => onHoverMatch(null)}\n            className={`\n                p-5 rounded-2xl border transition-all duration-300 relative group\n                ${isMatched ? 'bg-indigo-500/[0.03] border-indigo-500/20' : 'bg-slate-900/40 border-white/5 grayscale opacity-60 hover:grayscale-0 hover:opacity-100'}\n                ${isHovered ? 'ring-1 ring-indigo-500 shadow-[0_0_20px_rgba(79,70,229,0.1)] scale-[1.02] z-10' : ''}\n            `}\n        >\n            <div className=\"flex items-start justify-between gap-4 mb-3\">\n                <div className=\"flex flex-col gap-1\">\n                    <span className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-2 italic\">\n                        <Clock className=\"w-3 h-3\" /> {new Date(date).toLocaleDateString()}\n                    </span>\n                    <h3 className=\"text-xs font-bold text-slate-200 line-clamp-1 uppercase tracking-tight\">{desc}</h3>\n                </div>\n                <div className=\"text-right\">\n                    <p className={`text-sm font-black italic tracking-tighter ${isTruth ? 'text-indigo-400' : 'text-amber-400'}`}>\n                        {amount.toLocaleString('id-ID', { style: 'currency', currency: 'IDR' }).replace(',00', '')}\n                    </p>\n                    \n                    {/* Forensic Risk Badges */}\n                    {mens_rea_description && (\n                        <div className=\"flex flex-wrap justify-end gap-1 mt-1 opacity-80\">\n                            {mens_rea_description.includes(\"Velocity Risk\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-purple-500/30 bg-purple-500/10 text-purple-400 text-[8px] font-black uppercase tracking-wider flex items-center gap-1\">\n                                    <Zap className=\"w-2 h-2\" /> VELOCITY\n                                </span>\n                            )}\n                            {mens_rea_description.includes(\"Channel Risk\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-orange-500/30 bg-orange-500/10 text-orange-400 text-[8px] font-black uppercase tracking-wider\">\n                                    CHANNEL\n                                </span>\n                            )}\n                            {mens_rea_description.includes(\"Structuring\") && (\n                                <span className=\"px-1 py-0.5 rounded border border-rose-500/30 bg-rose-500/10 text-rose-400 text-[8px] font-black uppercase tracking-wider\">\n                                    STRUCTURING\n                                </span>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {isMatched && match && (\n                <div className=\"flex items-center justify-between pt-3 border-t border-white/5\">\n                    <div className=\"flex items-center gap-2\">\n                        <div className={`\n                            px-2 py-0.5 rounded text-[8px] font-black uppercase tracking-widest italic\n                            ${match.match_type === 'direct' ? 'bg-emerald-500/10 text-emerald-500' : 'bg-indigo-500/10 text-indigo-400'}\n                        `}>\n                            {match.match_type}\n                        </div>\n                        \n                        {/* NEW: Tier Badge */}\n                        {match.ai_reasoning && (() => {\n                            const tierMatch = match.ai_reasoning.match(/TIER_(\\d)_(\\w+)/);\n                            if (!tierMatch) return null;\n                            \n                            const tierNum = tierMatch[1];\n                            const tierColors = {\n                                '1': 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20',\n                                '2': 'bg-blue-500/10 text-blue-400 border-blue-500/20',\n                                '3': 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20',\n                                '4': 'bg-rose-500/10 text-rose-400 border-rose-500/20',\n                            };\n                            \n                            return (\n                                <div className={`\n                                    px-2 py-0.5 rounded text-[8px] font-black uppercase tracking-widest italic\n                                    border ${tierColors[tierNum as keyof typeof tierColors] || tierColors['4']}\n                                `} title={match.ai_reasoning}>\n                                    T{tierNum}\n                                </div>\n                            );\n                        })()}\n                        \n                        <span className=\"text-[8px] font-black text-slate-600 uppercase tracking-[0.2em] italic\">CONF: {(match.confidence_score * 100).toFixed(0)}%</span>\n                    </div>\n                </div>\n            )}\n\n            {!isMatched && (\n                <div className=\"pt-3 border-t border-white/5 flex items-center gap-2\">\n                    <AlertTriangle className=\"w-3 h-3 text-rose-500/50\" />\n                    <span className=\"text-[8px] font-black text-rose-500/40 uppercase tracking-widest italic\">UNRECONCILED_GAP_DETECTED</span>\n                </div>\n            )}\n        </motion.div>\n    );\n}\n\nfunction ConfigSlider({ icon, label, sub, val, min, max, step = 1, unit, onChange }: any) {\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex gap-4\">\n                    <div className=\"p-2 bg-indigo-500/10 rounded-lg h-fit\">\n                        {icon}\n                    </div>\n                    <div>\n                        <h4 className=\"text-xs font-black text-white italic uppercase tracking-widest\">{label}</h4>\n                        <p className=\"text-[10px] text-slate-500 mt-1\">{sub}</p>\n                    </div>\n                </div>\n                <span className=\"text-sm font-black text-indigo-400 italic bg-indigo-500/5 px-2 py-1 rounded border border-indigo-500/20\">{val}{unit && ` ${unit}`}</span>\n            </div>\n            <input \n                type=\"range\" min={min} max={max} step={step} value={val} \n                onChange={(e) => onChange(parseFloat(e.target.value))}\n                className=\"w-full h-1 bg-slate-800 rounded-lg appearance-none cursor-pointer accent-indigo-500\"\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/reconciliation/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/settings/security/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/simulation/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldAlert' is defined but never used.","line":6,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ShieldAlert"},"fix":{"range":[114,132],"text":""},"desc":"Remove unused variable \"ShieldAlert\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used.","line":6,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Globe"},"fix":{"range":[132,139],"text":""},"desc":"Remove unused variable \"Globe\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Crosshair' is defined but never used.","line":6,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":34,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Crosshair"},"fix":{"range":[139,150],"text":""},"desc":"Remove unused variable \"Crosshair\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Lock' is defined but never used.","line":7,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":9,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Lock"},"fix":{"range":[150,161],"text":""},"desc":"Remove unused variable \"Lock\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RefreshCw' is defined but never used.","line":7,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":33,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"RefreshCw"},"fix":{"range":[174,185],"text":""},"desc":"Remove unused variable \"RefreshCw\"."}]},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`addLog` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\n/Users/Arief/Newzen/zenith-lite/frontend/src/app/simulation/page.tsx:61:13\n  59 |         if (step > 0 && step <= SCENARIO.length) {\n  60 |             const current = SCENARIO[step - 1];\n> 61 |             addLog(`[SYSTEM_EVENT] ${current.desc}`);\n     |             ^^^^^^ `addLog` accessed before it is declared\n  62 |             \n  63 |             // Publish forensic event\n  64 |             if (current.eventType) {\n\n/Users/Arief/Newzen/zenith-lite/frontend/src/app/simulation/page.tsx:70:5\n  68 |     }, [step]);\n  69 |\n> 70 |     const addLog = (msg: string) => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |         setLogs(prev => [`${new Date().toLocaleTimeString()} > ${msg}`, ...prev]);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 72 |     };\n     | ^^^^^^^ `addLog` is declared here\n  73 |\n  74 |     const runSimulation = () => {\n  75 |         setStep(1);","line":61,"column":13,"nodeType":null,"endLine":61,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'SCENARIO'. Either include it or remove the dependency array.","line":68,"column":8,"nodeType":"ArrayExpression","endLine":68,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [SCENARIO, step]","fix":{"range":[2650,2656],"text":"[SCENARIO, step]"}}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { \n    AlertTriangle, Play, ChevronRight, \n    ShieldAlert, Globe, Crosshair, \n    Lock, CheckCircle, RefreshCw \n} from 'lucide-react';\nimport { useRouter } from 'next/navigation';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { forensicBus } from '@/lib/ForensicEventBus';\n\nexport default function SimulationLabPage() {\n    const router = useRouter();\n    const [step, setStep] = useState(0);\n    const [logs, setLogs] = useState<string[]>([]);\n    const { startInvestigation, addAction } = useInvestigation();\n\n    const SCENARIO = [\n        {\n            title: \"Phase 1: Anomaly Detection\",\n            desc: \"System detects 45% budget burn with only 12% reported physical progress.\",\n            action: \"Analyze Risk Predictions\",\n            target: \"/forensic/analytics/predictive\",\n            delay: 1000,\n            eventType: 'PROJECT_STALLED' as const,\n            eventPayload: { projectId: \"ZENITH-001\", progress: 12, burn: 45 }\n        },\n        {\n            title: \"Phase 2: Entity Identification\",\n            desc: \"High-risk vendor 'CV. BINTANG TIMUR' identified in ledger.\",\n            action: \"Run Sanction Screening\",\n            target: \"/legal/screening\",\n            delay: 3000,\n            eventType: 'VENDOR_SUSPICIOUS' as const,\n            eventPayload: { vendorName: \"CV. BINTANG TIMUR\", riskScore: 0.87 }\n        },\n        {\n            title: \"Phase 3: Verification\",\n            desc: \"Vendor claims 'Foundation Complete'. Satellite data required.\",\n            action: \"Launch Satellite Verification\",\n            target: \"/forensic/satellite\",\n            delay: 5000,\n            eventType: 'SATELLITE_DISCREPANCY' as const,\n            eventPayload: { projectId: \"ZENITH-001\", reported: 100, detected: 15 }\n        },\n        {\n            title: \"Phase 4: Asset Recovery\",\n            desc: \"Funds diverted to shell company. Initiation of asset tracing.\",\n            action: \"Trace Assets\",\n            target: \"/forensic/recovery\",\n            delay: 7000,\n            eventType: 'OFFSHORE_TRANSFER' as const,\n            eventPayload: { amount: 350000000, destination: \"GLOBAL HOLDINGS LTD (BVI)\" }\n        }\n    ];\n\n    useEffect(() => {\n        if (step > 0 && step <= SCENARIO.length) {\n            const current = SCENARIO[step - 1];\n            addLog(`[SYSTEM_EVENT] ${current.desc}`);\n            \n            // Publish forensic event\n            if (current.eventType) {\n                forensicBus.publish(current.eventType, current.eventPayload, 'SimulationLab');\n            }\n        }\n    }, [step]);\n\n    const addLog = (msg: string) => {\n        setLogs(prev => [`${new Date().toLocaleTimeString()} > ${msg}`, ...prev]);\n    };\n\n    const runSimulation = () => {\n        setStep(1);\n        addLog(\"INITIALIZING SIMULATION 'OP-RED-SKY'...\");\n        \n        // Start an investigation session\n        startInvestigation(\"Operation Red Sky - Training Simulation\", {\n            projectId: \"ZENITH-001\"\n        });\n        addLog(\"[INVESTIGATION_STARTED] Session created\");\n    };\n\n    const handleAction = (target: string, nextStep: number, toolName: string) => {\n        // Log the action to the investigation\n        addAction({\n            action: `Navigated to ${toolName}`,\n            tool: toolName,\n            result: { simulated: true }\n        });\n        \n        router.push(target);\n    };\n\n    return (\n        <div className=\"h-screen bg-[#020617] text-slate-300 font-sans flex overflow-hidden\">\n            {/* Simulation Controller */}\n            <div className=\"w-1/3 border-r border-white/5 bg-slate-900/50 p-10 flex flex-col\">\n                <div className=\"mb-10\">\n                    <h1 className=\"text-3xl font-black text-white tracking-tighter uppercase mb-2\">Simulation Lab</h1>\n                    <p className=\"text-sm text-slate-500 font-bold uppercase tracking-widest\">Training Scenario: #882-ALPHA</p>\n                </div>\n\n                {step === 0 ? (\n                    <div className=\"flex-1 flex flex-col justify-center items-center text-center\">\n                        <div className=\"w-24 h-24 bg-rose-500/10 rounded-full flex items-center justify-center animate-pulse mb-8 border border-rose-500/30\">\n                            <AlertTriangle className=\"w-10 h-10 text-rose-500\" />\n                        </div>\n                        <h2 className=\"text-xl font-bold text-white mb-4\">Scenario: &quot;Ghost Foundation&quot;</h2>\n                        <p className=\"text-sm text-slate-400 mb-8 max-w-xs leading-relaxed\">\n                            Simulate a full forensic loop: from initial budget anomaly to satellite verification and asset seizure.\n                        </p>\n                        <button \n                            onClick={runSimulation}\n                            className=\"px-8 py-4 bg-white text-black font-black uppercase tracking-widest rounded-xl hover:bg-slate-200 transition-colors flex items-center gap-3\"\n                        >\n                            <Play className=\"w-4 h-4\" /> Start Simulation\n                        </button>\n                    </div>\n                ) : (\n                    <div className=\"space-y-6\">\n                        {SCENARIO.map((phase, idx) => (\n                            <div \n                                key={idx} \n                                className={`p-6 rounded-2xl border transition-all duration-500 ${\n                                    step === idx + 1 \n                                        ? 'bg-rose-500/10 border-rose-500/50 scale-105 shadow-xl shadow-rose-900/20' \n                                        : step > idx + 1 \n                                            ? 'bg-slate-900/50 border-white/5 opacity-50'\n                                            : 'bg-transparent border-transparent opacity-30'\n                                }`}\n                            >\n                                <div className=\"flex justify-between items-start mb-2\">\n                                    <h3 className={`text-xs font-black uppercase tracking-widest ${step === idx + 1 ? 'text-white' : 'text-slate-500'}`}>\n                                        {phase.title}\n                                    </h3>\n                                    {step > idx + 1 && <CheckCircle className=\"w-4 h-4 text-emerald-500\" />}\n                                </div>\n                                <p className=\"text-sm font-bold text-slate-400 mb-4 leading-relaxed\">{phase.desc}</p>\n                                \n                                {step === idx + 1 && (\n                                    <button \n                                        onClick={() => handleAction(phase.target, idx + 2, phase.action)}\n                                        className=\"w-full py-3 bg-rose-600 hover:bg-rose-500 text-white font-bold text-xs uppercase tracking-widest rounded-lg flex items-center justify-center gap-2 animate-pulse\"\n                                    >\n                                        Execute Action <ChevronRight className=\"w-3 h-3\" />\n                                    </button>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Terminal / Log Output */}\n            <div className=\"flex-1 bg-black p-10 font-mono text-xs overflow-auto custom-scrollbar\">\n                <div className=\"mb-6 flex items-center gap-2 text-slate-500\">\n                    <div className=\"w-2 h-2 rounded-full bg-emerald-500 animate-pulse\" />\n                    SYSTEM_LOG_STREAM // LIVE\n                </div>\n                <div className=\"space-y-2\">\n                    {logs.map((log, i) => (\n                        <div key={i} className=\"text-emerald-500/80 border-b border-white/5 pb-1\">\n                            {log}\n                        </div>\n                    ))}\n                    {logs.length === 0 && <span className=\"text-slate-700\">Waiting for simulation start...</span>}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/app/test-transaction/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/AuditTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/DossierGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/EvidenceLocker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/ForensicCopilot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/ForensicGeoMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":7,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":22,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Info"},"fix":{"range":[275,281],"text":""},"desc":"Remove unused variable \"Info\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":111,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4341,4344],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4341,4344],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { useForensicNotifications } from '@/components/ForensicNotificationProvider';\nimport { MapPin, Info, ArrowUpRight, PlusCircle, AlertTriangle } from 'lucide-react';\n\nexport interface LeakageHotspot {\n  id: string;\n  location: { lat: number; lng: number; name: string };\n  severity: number; // 0-1\n  value: number; \n  rootCause: string;\n}\n\ninterface ForensicGeoMapProps {\n  hotspots: LeakageHotspot[];\n}\n\nexport default function ForensicGeoMap({ hotspots = [] }: ForensicGeoMapProps) {\n  // Bounds Calculation for Auto-Scaling\n  const lats = hotspots.map(h => h.location.lat);\n  const lngs = hotspots.map(h => h.location.lng);\n  const minLat = Math.min(...lats);\n  const maxLat = Math.max(...lats);\n  const minLng = Math.min(...lngs);\n  const maxLng = Math.max(...lngs);\n  const latSpan = maxLat - minLat || 0.05;\n  const lngSpan = maxLng - minLng || 0.05;\n\n  const [selectedHotspot, setSelectedHotspot] = useState<LeakageHotspot | null>(null);\n  const { startInvestigation, activeInvestigation, addAction } = useInvestigation();\n  const notifications = useForensicNotifications();\n\n  const handleHotspotClick = (hotspot: LeakageHotspot) => {\n    setSelectedHotspot(hotspot);\n  };\n\n  const handleInvestigate = (hotspot: LeakageHotspot) => {\n    // If no active investigation, start one\n    if (!activeInvestigation) {\n      startInvestigation(`Leakage Probe: ${hotspot.location.name}`, {\n        projectId: hotspot.id,\n        hotspotId: hotspot.id,\n        leakageValue: hotspot.value\n      });\n      notifications.info('Investigation Started', `New case opened for ${hotspot.location.name}`);\n    } else {\n        // Add to current\n        addAction({\n          action: `Analyzed leakage hotspot at ${hotspot.location.name}`,\n          tool: 'ForensicGeoMap',\n          result: {\n            hotspotId: hotspot.id,\n            value: hotspot.value,\n            severity: hotspot.severity\n          }\n        });\n        notifications.success('Evidence Added', `Hotspot data added to case #${activeInvestigation.id}`);\n    }\n  };\n\n  return (\n    <div className=\"relative w-full h-full bg-slate-950/50 rounded-2xl overflow-hidden group\">\n      {/* Map Background (Stylized Indonesia/Jakarta Outline for Demo) */}\n      <svg \n        viewBox=\"0 0 800 500\" \n        className=\"w-full h-full object-cover opacity-30 group-hover:opacity-40 transition-opacity\"\n        preserveAspectRatio=\"xMidYMid slice\"\n      >\n        <defs>\n          <filter id=\"glow\" x=\"-20%\" y=\"-20%\" width=\"140%\" height=\"140%\">\n            <feGaussianBlur stdDeviation=\"2\" result=\"blur\" />\n            <feComposite in=\"SourceGraphic\" in2=\"blur\" operator=\"over\" />\n          </filter>\n        </defs>\n        \n        {/* Abstract Landmasses */}\n        <path d=\"M100,200 Q250,150 400,250 T700,300\" stroke=\"none\" fill=\"#1e293b\" />\n        <path d=\"M50,150 Q200,50 350,150 T650,200\" stroke=\"none\" fill=\"#334155\" opacity=\"0.5\" />\n        \n        {/* Grid Lines */}\n        <pattern id=\"grid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n          <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"rgba(255,255,255,0.05)\" strokeWidth=\"1\"/>\n        </pattern>\n        <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n      </svg>\n\n      {/* Hotspots Layer */}\n      <div className=\"absolute inset-0\">\n        {hotspots.map((hotspot) => {\n          // Normalize to % with padding using pre-calculated bounds\n          const x = ((hotspot.location.lng - minLng) / lngSpan) * 80 + 10;\n          const y = 100 - (((hotspot.location.lat - minLat) / latSpan) * 80 + 10);\n\n          const isCritical = hotspot.severity > 0.8;\n          const colorClass = isCritical ? 'bg-rose-500' : 'bg-amber-500';\n\n          return (\n            <motion.div\n              key={hotspot.id}\n              className=\"absolute cursor-grab active:cursor-grabbing hover:z-50\"\n              style={{ left: `${x}%`, top: `${y}%` }}\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              whileHover={{ scale: 1.2 }}\n              onClick={() => handleHotspotClick(hotspot)}\n              title={hotspot.location.name}\n              draggable={true}\n              onDragStart={(e: any) => {\n                 e.dataTransfer.setData('application/json', JSON.stringify({\n                    type: 'hotspot_evidence',\n                    id: hotspot.id,\n                    location: hotspot.location.name,\n                    value: hotspot.value,\n                    context: 'Geospatial Leakage Map'\n                 }));\n                 notifications.info(\"EVIDENCE LOCKED\", \"Drop into dossier to link.\");\n              }}\n            >\n              {/* Pulse Ring */}\n              <div className={`absolute -inset-4 rounded-full ${colorClass} opacity-20 animate-ping`} />\n              \n              {/* Dot */}\n              <div className={`relative w-4 h-4 rounded-full ${colorClass} border border-white/20 shadow-lg shadow-${isCritical ? 'rose' : 'amber'}-500/50`} />\n              \n              {/* Tooltip Label (Always visible for Critical) */}\n              {isCritical && (\n                <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 whitespace-nowrap px-2 py-1 bg-slate-900/90 border border-rose-500/30 rounded-md text-[10px] font-black text-rose-400 uppercase tracking-wider backdrop-blur-sm shadow-xl\">\n                  {hotspot.location.name}\n                </div>\n              )}\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {/* Selected Hotspot Detail Card */}\n      <AnimatePresence>\n        {selectedHotspot && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9, y: 10 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.9, y: 10 }}\n            className=\"absolute bottom-4 left-4 right-4 bg-slate-900/90 border border-white/10 rounded-xl p-4 backdrop-blur-md shadow-2xl z-20\"\n          >\n            <div className=\"flex justify-between items-start mb-2\">\n                <div>\n                   <h3 className=\"text-sm font-black text-white uppercase tracking-tight flex items-center gap-2\">\n                       <MapPin className=\"w-3.5 h-3.5 text-indigo-400\" />\n                       {selectedHotspot.location.name}\n                   </h3>\n                   <div className=\"text-[10px] text-slate-400 font-mono mt-0.5\">\n                       {selectedHotspot.id} â€¢ {selectedHotspot.rootCause}\n                   </div>\n                </div>\n                <button \n                  onClick={() => setSelectedHotspot(null)}\n                  className=\"p-1 hover:bg-white/10 rounded-full text-slate-500 hover:text-white\"\n                  aria-label=\"Close details\"\n                >\n                  <ArrowUpRight className=\"w-4 h-4\" />\n                </button>\n            </div>\n            \n            <div className=\"flex items-end justify-between\">\n                <div>\n                    <div className=\"text-[9px] text-slate-500 uppercase tracking-widest font-bold\">Leakage Value</div>\n                    <div className=\"text-xl font-black text-white\">\n                        Rp {(selectedHotspot.value / 1000000000).toFixed(2)} B\n                    </div>\n                </div>\n                \n                <button\n                    onClick={() => handleInvestigate(selectedHotspot)}\n                    className=\"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-[10px] font-bold uppercase tracking-widest rounded-lg flex items-center gap-2 transition-colors\"\n                >\n                    {activeInvestigation ? (\n                        <>\n                           <PlusCircle className=\"w-3.5 h-3.5\" />\n                           Add to Case\n                        </>\n                    ) : (\n                        <>\n                           <AlertTriangle className=\"w-3.5 h-3.5\" />\n                           Investigate\n                        </>\n                    )}\n                </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/ForensicNotificationProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bell' is defined but never used.","line":5,"column":57,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":61,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Bell"},"fix":{"range":[218,224],"text":""},"desc":"Remove unused variable \"Bell\"."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has a missing dependency: 'dismiss'. Either include it or remove the dependency array.","line":54,"column":8,"nodeType":"ArrayExpression","endLine":54,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [dismiss]","fix":{"range":[1720,1722],"text":"[dismiss]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { createContext, useContext, useState, useCallback, ReactNode } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { CheckCircle2, AlertTriangle, Info, XCircle, X, Bell } from 'lucide-react';\n\ntype NotificationType = 'success' | 'warning' | 'info' | 'error';\n\ninterface Notification {\n    id: string;\n    type: NotificationType;\n    title: string;\n    message: string;\n    duration?: number;\n    action?: {\n        label: string;\n        onClick: () => void;\n    };\n}\n\ninterface NotificationContextType {\n    notify: (notification: Omit<Notification, 'id'>) => void;\n    dismiss: (id: string) => void;\n}\n\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined);\n\nexport const useForensicNotification = () => {\n    const context = useContext(NotificationContext);\n    if (!context) {\n        throw new Error('useForensicNotification must be used within ForensicNotificationProvider');\n    }\n    return context;\n};\n\nexport const ForensicNotificationProvider = ({ children }: { children?: ReactNode }) => {\n    const [notifications, setNotifications] = useState<Notification[]>([]);\n\n    const notify = useCallback((notification: Omit<Notification, 'id'>) => {\n        const id = `notif-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        const newNotification: Notification = {\n            id,\n            duration: 5000,\n            ...notification,\n        };\n\n        setNotifications(prev => [...prev, newNotification]);\n\n        if (newNotification.duration && newNotification.duration > 0) {\n            setTimeout(() => {\n                dismiss(id);\n            }, newNotification.duration);\n        }\n    }, []);\n\n    const dismiss = useCallback((id: string) => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n    }, []);\n\n    // Event bus integration - Subscribe to forensic events\n    React.useEffect(() => {\n        // Only import and use in client side\n        if (typeof window === 'undefined') return;\n\n        import('@/lib/ForensicEventBus').then(({ forensicBus }) => {\n            const subscriptions: string[] = [];\n\n            // Subscribe to each event type\n            subscriptions.push(\n                forensicBus.subscribe('TRANSACTION_FLAGGED', (event) => {\n                    notify({\n                        type: 'warning',\n                        title: 'Transaction Flagged',\n                        message: event.payload.reason || 'Anomaly detected',\n                        duration: 6000,\n                    });\n                })\n            );\n\n            subscriptions.push(\n                forensicBus.subscribe('VENDOR_SUSPICIOUS', (event) => {\n                    notify({\n                        type: 'error',\n                        title: `High-Risk Vendor: ${event.payload.vendorName}`,\n                        message: `Risk score: ${(event.payload.riskScore * 100).toFixed(0)}%`,\n                        duration: 7000,\n                    });\n                })\n            );\n\n            subscriptions.push(\n                forensicBus.subscribe('SANCTION_HIT', (event) => {\n                    notify({\n                        type: 'error',\n                        title: `SANCTION HIT: ${event.payload.entity}`,\n                        message: `Matched on ${event.payload.list}`,\n                        duration: 10000,\n                    });\n                })\n            );\n\n            // Cleanup\n            return () => {\n                subscriptions.forEach(id => forensicBus.unsubscribe(id));\n            };\n        });\n    }, [notify]);\n\n    return (\n        <NotificationContext.Provider value={{ notify, dismiss }}>\n            {children}\n            <NotificationContainer notifications={notifications} onDismiss={dismiss} />\n        </NotificationContext.Provider>\n    );\n};\n\nfunction NotificationContainer({ \n    notifications, \n    onDismiss \n}: { \n    notifications: Notification[]; \n    onDismiss: (id: string) => void;\n}) {\n    return (\n        <div className=\"fixed top-20 right-8 z-[9999] flex flex-col gap-3 max-w-md\">\n            <AnimatePresence mode=\"popLayout\">\n                {notifications.map(notification => (\n                    <NotificationCard\n                        key={notification.id}\n                        notification={notification}\n                        onDismiss={() => onDismiss(notification.id)}\n                    />\n                ))}\n            </AnimatePresence>\n        </div>\n    );\n}\n\nfunction NotificationCard({ \n    notification, \n    onDismiss \n}: { \n    notification: Notification; \n    onDismiss: () => void;\n}) {\n    const config = {\n        success: {\n            icon: CheckCircle2,\n            bg: 'bg-emerald-500/10',\n            border: 'border-emerald-500/30',\n            iconColor: 'text-emerald-500',\n            textColor: 'text-emerald-400',\n        },\n        warning: {\n            icon: AlertTriangle,\n            bg: 'bg-orange-500/10',\n            border: 'border-orange-500/30',\n            iconColor: 'text-orange-500',\n            textColor: 'text-orange-400',\n        },\n        info: {\n            icon: Info,\n            bg: 'bg-blue-500/10',\n            border: 'border-blue-500/30',\n            iconColor: 'text-blue-500',\n            textColor: 'text-blue-400',\n        },\n        error: {\n            icon: XCircle,\n            bg: 'bg-rose-500/10',\n            border: 'border-rose-500/30',\n            iconColor: 'text-rose-500',\n            textColor: 'text-rose-400',\n        },\n    };\n\n    const style = config[notification.type];\n    const Icon = style.icon;\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: -20, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, x: 100, scale: 0.95 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n            className={`\n                ${style.bg} ${style.border} backdrop-blur-xl\n                border rounded-2xl p-5 shadow-2xl\n                min-w-[320px] max-w-md\n            `}\n        >\n            <div className=\"flex items-start gap-4\">\n                <div className={`p-2 rounded-xl ${style.bg} ${style.border} border`}>\n                    <Icon className={`w-5 h-5 ${style.iconColor}`} />\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                    <h4 className={`text-sm font-black uppercase tracking-widest ${style.textColor} mb-1 italic`}>\n                        {notification.title}\n                    </h4>\n                    <p className=\"text-xs text-slate-300 leading-relaxed\">\n                        {notification.message}\n                    </p>\n                    \n                    {notification.action && (\n                        <button\n                            onClick={notification.action.onClick}\n                            className={`\n                                mt-3 px-4 py-1.5 rounded-lg text-xs font-bold uppercase tracking-widest\n                                ${style.bg} ${style.border} border ${style.textColor}\n                                hover:bg-opacity-20 transition-all\n                            `}\n                        >\n                            {notification.action.label}\n                        </button>\n                    )}\n                </div>\n                \n                <button\n                    onClick={onDismiss}\n                    className=\"text-slate-500 hover:text-white transition-colors p-1 rounded-lg hover:bg-white/5\"\n                    aria-label=\"Dismiss notification\"\n                >\n                    <X className=\"w-4 h-4\" />\n                </button>\n            </div>\n        </motion.div>\n    );\n}\n\n// Helper hook for common notification patterns\nexport const useForensicNotifications = () => {\n    const { notify } = useForensicNotification();\n\n    return {\n        success: (title: string, message: string, action?: Notification['action']) => {\n            notify({ type: 'success', title, message, action });\n        },\n        warning: (title: string, message: string, action?: Notification['action']) => {\n            notify({ type: 'warning', title, message, action });\n        },\n        info: (title: string, message: string, action?: Notification['action']) => {\n            notify({ type: 'info', title, message, action });\n        },\n        error: (title: string, message: string, action?: Notification['action']) => {\n            notify({ type: 'error', title, message, action });\n        },\n        matchFound: (confidence: number, tier: string, count: number = 1) => {\n            notify({\n                type: confidence >= 0.95 ? 'success' : confidence >= 0.85 ? 'info' : 'warning',\n                title: `RECONCILIATION: ${count} MATCH${count > 1 ? 'ES' : ''} FOUND`,\n                message: `Confidence: ${(confidence * 100).toFixed(0)}% | Tier: ${tier} | Ready for review`,\n                duration: 7000,\n            });\n        },\n        ingestionComplete: (records: number, filename: string) => {\n            notify({\n                type: 'success',\n                title: 'INGESTION COMPLETE',\n                message: `${records.toLocaleString()} records from ${filename} successfully sealed to vault`,\n                duration: 6000,\n            });\n        },\n        fraudAlert: (severity: 'high' | 'critical', message: string) => {\n            notify({\n                type: severity === 'critical' ? 'error' : 'warning',\n                title: severity === 'critical' ? 'ðŸš¨ CRITICAL FRAUD ALERT' : 'âš ï¸ FRAUD TRIGGER DETECTED',\n                message,\n                duration: 10000,\n            });\n        },\n    };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/ForensicTimeline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/FrenlyQuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/FrenlyWidget.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ToolRecommendation' is defined but never used.","line":10,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":50,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"ToolRecommendation"},"fix":{"range":[506,526],"text":""},"desc":"Remove unused variable \"ToolRecommendation\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport Image from 'next/image';\nimport { motion, AnimatePresence, useDragControls, PanInfo } from 'framer-motion';\nimport { Minimize2, X, MessageCircle, Mic, ArrowRight } from 'lucide-react';\nimport FrenlyChat, { Message } from './chat/FrenlyChat';\nimport { useFrenlyContext, executeFrenlyAction } from './context/FrenlyContextEngine';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { RecommendationEngine, ToolRecommendation } from '@/lib/RecommendationEngine';\n\ntype WidgetMode = 'minimized' | 'compact' | 'expanded';\n\nexport default function FrenlyWidget() {\n  const [mode, setMode] = useState<WidgetMode>('minimized');\n  const [isLoading, setIsLoading] = useState(false);\n  const [, setAvatarState] = useState<'idle' | 'thinking' | 'success'>('idle');\n  \n  // Persistent Position State\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  const handleDragEnd = (_: unknown, info: PanInfo) => {\n    setPosition(prev => ({\n        x: prev.x + info.offset.x,\n        y: prev.y + info.offset.y\n    }));\n  };\n  \n  const dragControls = useDragControls();\n\n  const contextData = useFrenlyContext();\n  const { activeInvestigation } = useInvestigation();\n  \n  // Get smart recommendations if investigation is active\n  const smartRecommendations = React.useMemo(() => {\n    return activeInvestigation \n        ? RecommendationEngine.getRecommendations(activeInvestigation)\n        : [];\n  }, [activeInvestigation]);\n\n  // Compute hasTip: prioritize smart recommendations or page tips\n  const hasTip = contextData.currentPage.tips.length > 0 || smartRecommendations.length > 0;\n\n  // Initialize messages with welcome message\n  const [messages, setMessages] = useState<Message[]>([]);\n\n  // Safely initialize messages on the client to avoid hydration mismatch with Date\n  // Initialize welcome message using computed value\n  const welcomeMessage: Message = React.useMemo(() => {\n    // If investigation is active, override greeting and suggestions\n    if (activeInvestigation && smartRecommendations.length > 0) {\n        return {\n            id: '1',\n            role: 'assistant',\n            content: `I'm tracking investigation \"${activeInvestigation.title}\". Based on recent findings, I recommend the following next steps:`,\n            timestamp: new Date(),\n            confidence: 1.0,\n            suggestions: smartRecommendations.map(rec => rec.toolName).slice(0, 3)\n        };\n    }\n\n    return {\n        id: '1',\n        role: 'assistant',\n        content: contextData.currentPage.greeting,\n        timestamp: new Date(),\n        confidence: 1.0,\n        suggestions: contextData.currentPage.quickActions.map(action => action.label),\n    };\n  }, [contextData.currentPage.greeting, contextData.currentPage.quickActions, activeInvestigation, smartRecommendations]);\n\n  // Initialize messages with welcome message\n  React.useEffect(() => {\n    setMessages([welcomeMessage]);\n  }, [welcomeMessage]);\n\n\n\n  // Handle chat message submission\n  const handleSendMessage = useCallback(async (messageText: string) => {\n    // Add user message\n    const userMessage: Message = {\n      id: Date.now().toString(),\n      role: 'user',\n      content: messageText,\n      timestamp: new Date(),\n    };\n    setMessages(prev => [...prev, userMessage]);\n\n    // Simulate thinking\n    setAvatarState('thinking');\n    setIsLoading(true);\n\n    try {\n        const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:7900';\n        const res = await fetch(`${API_URL}/api/v1/ai/chat`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ query: messageText })\n        });\n\n        if (!res.ok) throw new Error(\"AI Down\");\n        const data = await res.json();\n\n        // Add assistant response\n        const assistantMessage: Message = {\n          id: (Date.now() + 1).toString(),\n          role: 'assistant',\n          content: data.answer,\n          timestamp: new Date(),\n          confidence: 0.95,\n          sql: data.sql_generated,\n          data: data.data,\n          suggestions: contextData.currentPage.quickActions.map(a => a.label).slice(0, 2),\n        };\n\n        setMessages(prev => [...prev, assistantMessage]);\n        setAvatarState('success');\n    } catch {\n        setMessages(prev => [...prev, {\n            id: Date.now().toString(),\n            role: 'assistant',\n            content: \"I'm having trouble accessing the secure forensic vault. Please check the system logs.\",\n            timestamp: new Date(),\n        }]);\n    } finally {\n        setIsLoading(false);\n        setTimeout(() => setAvatarState('idle'), 2000);\n    }\n  }, [contextData]);\n\n  // Toggle between modes\n  const toggleMode = useCallback(() => {\n    if (mode === 'minimized') {\n      setMode('compact');\n      setAvatarState('success');\n      setTimeout(() => setAvatarState('idle'), 1000);\n    } else if (mode === 'compact') {\n      setMode('expanded');\n    } else {\n      setMode('minimized');\n    }\n  }, [mode]);\n\n  const expandWidget = () => {\n    if (mode !== 'expanded') setMode('expanded');\n  };\n\n  const minimizeWidget = () => setMode('minimized');\n\n  // Keyboard shortcut (Ctrl+K)\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n        e.preventDefault();\n        toggleMode();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [toggleMode]);\n\n  return (\n    <>\n      {/* Minimized Floating Button */}\n      <AnimatePresence>\n        {mode === 'minimized' && (\n          <motion.div\n            key=\"minimized\"\n            drag\n            dragMomentum={false}\n            onDragEnd={handleDragEnd}\n            initial={{ scale: 0, opacity: 0, x: position.x, y: position.y }}\n            animate={{ scale: 1, opacity: 1, x: position.x, y: position.y }}\n            exit={{ scale: 0, opacity: 0, x: position.x, y: position.y }}\n            className=\"fixed top-24 right-6 z-50 cursor-move active:cursor-grabbing\"\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n           <button onClick={toggleMode} className=\"group relative\">\n            {/* Professional Avatar Image */}\n            <div className=\"relative pointer-events-none\">\n              <Image\n                src=\"/frenly-avatar.png\"\n                alt=\"Frenly AI Assistant\"\n                width={64}\n                height={64}\n                className=\"w-16 h-16 rounded-full border-2 border-indigo-500 shadow-2xl shadow-indigo-900/60 object-cover\"\n                suppressHydrationWarning\n              />\n              \n              {/* Pulse Ring */}\n              {hasTip && (\n                <div className=\"absolute inset-0 rounded-full bg-indigo-500 animate-ping opacity-20\" />\n              )}\n\n              {/* Badge Count */}\n              {contextData.globalStats && contextData.globalStats.pendingAlerts > 0 && (\n                <div className=\"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-black rounded-full w-5 h-5 flex items-center justify-center shadow-lg z-10\">\n                  {contextData.globalStats.pendingAlerts}\n                </div>\n              )}\n\n              {/* Online Indicator */}\n              <div className=\"absolute bottom-0 right-0 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-950 shadow-lg\" />\n            </div>\n\n            {/* Keyboard Hint */}\n            <div className=\"absolute -bottom-8 right-0 bg-slate-950 border border-white/10 px-2 py-1 rounded text-[9px] font-mono opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none\">\n              Ctrl+K\n            </div>\n           </button>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Compact Mode - Concise Design */}\n      <AnimatePresence>\n        {mode === 'compact' && (\n          <motion.div\n            key=\"compact\"\n            drag\n            dragMomentum={false}\n            dragListener={false} // Only drag from header\n            dragControls={dragControls}\n            onDragEnd={handleDragEnd}\n            initial={{ opacity: 0, scale: 0.9, x: position.x, y: position.y }}\n            animate={{ opacity: 1, scale: 1, x: position.x, y: position.y }}\n            exit={{ opacity: 0, scale: 0.9, x: position.x, y: position.y }}\n            className=\"fixed top-24 right-6 z-50 w-72 bg-slate-950/95 border border-white/10 rounded-2xl shadow-2xl overflow-hidden backdrop-blur-xl\"\n          >\n            {/* Minimal Header - Draggable Area */}\n            <div \n                className=\"bg-gradient-to-r from-indigo-600/90 to-indigo-800/90 px-3 py-2.5 flex items-center justify-between cursor-grab active:cursor-grabbing\"\n                onPointerDown={(e) => dragControls.start(e)}\n            >\n              <div className=\"flex items-center gap-2 pointer-events-none\">\n                <Image \n                  src=\"/frenly-avatar.png\" \n                  alt=\"Frenly\" \n                  width={32}\n                  height={32}\n                  className=\"w-8 h-8 rounded-full border border-white/30 object-cover\"\n                  suppressHydrationWarning\n                />\n                <span className=\"font-bold text-white text-xs\">Frenly AI</span>\n              </div>\n              <div className=\"flex gap-1\" onPointerDown={(e) => e.stopPropagation()}>\n                <button\n                  onClick={expandWidget}\n                  className=\"text-white/50 hover:text-white transition-colors p-1 rounded hover:bg-white/10\"\n                  title=\"Chat\"\n                >\n                  <MessageCircle className=\"w-3.5 h-3.5\" />\n                </button>\n                <button\n                  onClick={minimizeWidget}\n                  className=\"text-white/50 hover:text-white transition-colors p-1 rounded hover:bg-white/10\"\n                  title=\"Close\"\n                >\n                  <X className=\"w-3.5 h-3.5\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Compact Content */}\n            <div className=\"p-3 space-y-2.5\">\n              {/* Quick Actions Only - No greeting text */}\n              <div className=\"space-y-1.5\">\n                {contextData.currentPage.quickActions.slice(0, 3).map((action, index) => (\n                  <button\n                    key={index}\n                    onClick={() => executeFrenlyAction(action)}\n                    className=\"w-full group bg-slate-900/50 hover:bg-indigo-600/20 border border-white/5 hover:border-indigo-500/40 rounded-lg px-3 py-2 transition-all flex items-center gap-2 text-left\"\n                  >\n                    <span className=\"text-base\">{action.icon}</span>\n                    <span className=\"flex-1 text-xs font-medium text-slate-300 group-hover:text-white\">\n                      {action.label}\n                    </span>\n                    <ArrowRight className=\"w-3 h-3 text-slate-600 group-hover:text-indigo-400 group-hover:translate-x-0.5 transition-all\" />\n                  </button>\n                ))}\n              </div>\n\n              {/* Single Tip (if available) */}\n              {contextData.currentPage.tips.length > 0 && (\n                <div className=\"bg-slate-900/30 border border-indigo-500/10 rounded-lg px-2.5 py-2\">\n                  <p className=\"text-[10px] text-slate-400 leading-snug\">\n                    {contextData.currentPage.tips[0]}\n                  </p>\n                </div>\n              )}\n\n              {/* Minimal Chat Button */}\n              <button\n                onClick={expandWidget}\n                className=\"w-full bg-indigo-600/90 hover:bg-indigo-500 text-white rounded-lg py-2 text-xs font-bold uppercase tracking-wide transition-colors flex items-center justify-center gap-1.5\"\n              >\n                <MessageCircle className=\"w-3.5 h-3.5\" />\n                Ask Me\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Expanded Mode (Full Chat) */}\n      <AnimatePresence>\n        {mode === 'expanded' && (\n          <motion.div\n            key=\"expanded\"\n            drag\n            dragMomentum={false}\n            dragListener={false} // Only drag from header\n            dragControls={dragControls}\n            onDragEnd={handleDragEnd}\n            initial={{ opacity: 0, scale: 0.9, x: position.x, y: position.y }}\n            animate={{ opacity: 1, scale: 1, x: position.x, y: position.y }}\n            exit={{ opacity: 0, scale: 0.9, x: position.x, y: position.y }}\n            className=\"fixed top-24 right-6 z-50 w-[450px] h-[650px] bg-slate-950 border border-white/10 rounded-3xl shadow-2xl overflow-hidden backdrop-blur-xl flex flex-col\"\n          >\n            {/* Header - Draggable Area */}\n            <div \n                className=\"bg-gradient-to-r from-indigo-600 to-indigo-800 p-4 flex items-center justify-between flex-shrink-0 cursor-grab active:cursor-grabbing\"\n                onPointerDown={(e) => dragControls.start(e)}\n            >\n              <div className=\"flex items-center gap-3 pointer-events-none\">\n                <div className=\"relative\">\n                  <Image \n                    src=\"/frenly-avatar.png\" \n                    alt=\"Frenly AI\" \n                    width={40}\n                    height={40}\n                    className=\"w-10 h-10 rounded-full border-2 border-white/20 object-cover\"\n                    suppressHydrationWarning\n                  />\n                  <div className=\"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-indigo-800\" />\n                </div>\n                <div>\n                  <h3 className=\"font-black text-white text-sm\">Frenly AI</h3>\n                  <p className=\"text-[9px] text-indigo-200 uppercase tracking-wider\">\n                    {contextData.currentPage.pageName}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex gap-2\" onPointerDown={(e) => e.stopPropagation()}>\n                <button\n                  onClick={() => setMode('compact')}\n                  className=\"text-white/60 hover:text-white transition-colors p-1\"\n                  title=\"Minimize to card\"\n                >\n                  <Minimize2 className=\"w-4 h-4\" />\n                </button>\n                <button\n                  onClick={minimizeWidget}\n                  className=\"text-white/60 hover:text-white transition-colors p-1\"\n                  title=\"Close\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Chat Interface */}\n            <div className=\"flex-1 overflow-hidden\" onPointerDown={(e) => e.stopPropagation()}>\n              <FrenlyChat\n                messages={messages}\n                onSendMessage={handleSendMessage}\n                isLoading={isLoading}\n              />\n            </div>\n\n            {/* Footer Toolbar */}\n            <div className=\"border-t border-white/5 p-3 bg-slate-900/50 flex items-center justify-between flex-shrink-0\">\n              <div className=\"flex items-center gap-2\">\n                <button\n                  className=\"text-slate-500 hover:text-indigo-400 transition-colors p-1.5 rounded-lg hover:bg-slate-800\"\n                  title=\"Voice input (coming soon)\"\n                >\n                  <Mic className=\"w-4 h-4\" />\n                </button>\n              </div>\n              <div className=\"text-[8px] text-slate-600 uppercase tracking-wider\">\n                Powered by AI\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/avatar/FrenlyAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/chat/FrenlyChat.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/context/FrenlyContextEngine.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/Arief/Newzen/zenith-lite/frontend/src/components/FrenlyAI/context/FrenlyContextEngine.tsx:179:5\n  177 |     // Only update if page context actually changed\n  178 |     // eslint-disable-next-line react-hooks/set-state-in-effect\n> 179 |     setContextData(prev => {\n      |     ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  180 |       if (prev.currentPage.pageName !== pageContext.pageName) {\n  181 |         return { ...prev, currentPage: pageContext };\n  182 |       }","line":179,"column":5,"nodeType":null,"endLine":179,"endColumn":19,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/InvestigationPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":14,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":39,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Download"},"fix":{"range":[394,404],"text":""},"desc":"Remove unused variable \"Download\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isExpanded' is assigned a value but never used.","line":23,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsExpanded' is assigned a value but never used.","line":23,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleGenerateDossier' is assigned a value but never used.","line":27,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":32},{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\n/Users/Arief/Newzen/zenith-lite/frontend/src/components/InvestigationPanel.tsx:78:10\n  76 |\n  77 |     const timeElapsed = Math.floor(\n> 78 |         (Date.now() - new Date(activeInvestigation.startedAt).getTime()) / 1000 / 60\n     |          ^^^^^^^^^^ Cannot call impure function\n  79 |     );\n  80 |\n  81 |     return (","line":78,"column":10,"nodeType":null,"endLine":78,"endColumn":20}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Investigation Panel Component\n * Persistent split-view panel that stays visible while using forensic tools\n */\n\n'use client';\n\nimport React from 'react';\nimport { useInvestigation } from '@/store/useInvestigation';\nimport { DossierCompiler } from '@/lib/DossierCompiler';\nimport { \n    Target, Clock, Users, FileText, \n    ChevronDown, ChevronUp, TrendingUp,\n    AlertCircle, CheckCircle, Download\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nimport { useForensicNotification } from '@/components/ForensicNotificationProvider';\n\nexport function InvestigationPanel() {\n    const { activeInvestigation, endInvestigation, pauseInvestigation, addAction } = useInvestigation();\n    const { notify } = useForensicNotification();\n    const [isExpanded, setIsExpanded] = React.useState(true);\n    const [isMinimized, setIsMinimized] = React.useState(false);\n    const [isDraggingOver, setIsDraggingOver] = React.useState(false);\n\n    const handleGenerateDossier = () => {\n        if(!activeInvestigation) return;\n        \n        const dossier = DossierCompiler.compile(activeInvestigation);\n        DossierCompiler.download(dossier, 'markdown');\n        \n        // Also complete the investigation\n        endInvestigation();\n    };\n\n    const handleDragOver = (e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDraggingOver(true);\n    };\n\n    const handleDragLeave = () => {\n        setIsDraggingOver(false);\n    };\n\n    const handleDrop = (e: React.DragEvent) => {\n        e.preventDefault();\n        setIsDraggingOver(false);\n        \n        try {\n            const data = JSON.parse(e.dataTransfer.getData('application/json'));\n            \n            if (data.type === 'hotspot_evidence') {\n                addAction({\n                    action: `Evidence Link: ${data.location}`,\n                    tool: 'Map Drop',\n                    result: {\n                        evidenceId: data.id,\n                        value: data.value,\n                        context: data.context\n                    }\n                });\n                \n                notify({\n                    title: 'Evidence Secured',\n                    description: `Linked ${data.location} to case file.`,\n                    type: 'success'\n                });\n            }\n        } catch (err) {\n            console.error('Drop failed', err);\n        }\n    };\n\n    if (!activeInvestigation) return null;\n\n    const timeElapsed = Math.floor(\n        (Date.now() - new Date(activeInvestigation.startedAt).getTime()) / 1000 / 60\n    );\n\n    return (\n        <motion.div\n            initial={{ y: 100, opacity: 0 }}\n            animate={{ \n                y: isMinimized ? 'calc(100% - 80px)' : 0, \n                opacity: 1 \n            }}\n            onDragOver={handleDragOver}\n            onDragLeave={handleDragLeave}\n            onDrop={handleDrop}\n            className={`fixed bottom-0 right-0 left-64 bg-slate-950 border-t ${\n                isDraggingOver ? 'border-emerald-500 shadow-[0_0_30px_rgba(16,185,129,0.3)]' : 'border-white/10'\n            } shadow-2xl z-50 transition-all duration-300`}\n            style={{\n                height: isMinimized ? '80px' : '320px',\n            }}\n        >\n            {/* Header */}\n            <div \n                className=\"h-20 border-b border-white/5 bg-slate-900/50 backdrop-blur-xl flex items-center justify-between px-8 cursor-pointer hover:bg-slate-900/70 transition-colors\"\n                onClick={() => setIsMinimized(!isMinimized)}\n            >\n                <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 bg-indigo-600 rounded-2xl flex items-center justify-center shadow-lg shadow-indigo-900/20\">\n                        <Target className=\"w-6 h-6 text-white\" />\n                    </div>\n                    <div>\n                        <div className=\"flex items-center gap-3\">\n                            <h3 className=\"text-sm font-black text-white uppercase tracking-tight\">\n                                {activeInvestigation.title}\n                            </h3>\n                            <span className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${\n                                activeInvestigation.status === 'active' \n                                    ? 'bg-emerald-500/10 text-emerald-400 border border-emerald-500/20' \n                                    : 'bg-amber-500/10 text-amber-400 border border-amber-500/20'\n                            }`}>\n                                {activeInvestigation.status}\n                            </span>\n                        </div>\n                        <p className=\"text-[10px] text-slate-500 font-mono uppercase tracking-wider mt-1\">\n                            ID: {activeInvestigation.id} â€¢ Started {timeElapsed}m ago\n                        </p>\n                    </div>\n                </div>\n\n                <div className=\"flex items-center gap-4\">\n                    {/* Quick Stats */}\n                    <div className=\"flex items-center gap-6 mr-6\">\n                        <div className=\"flex items-center gap-2\">\n                            <FileText className=\"w-4 h-4 text-slate-500\" />\n                            <span className=\"text-sm font-bold text-white\">\n                                {activeInvestigation.timeline.length}\n                            </span>\n                            <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Actions</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                            <Users className=\"w-4 h-4 text-slate-500\" />\n                            <span className=\"text-sm font-bold text-white\">\n                                {activeInvestigation.context.suspects.length}\n                            </span>\n                            <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Suspects</span>\n                        </div>\n                        {activeInvestigation.riskScore && (\n                            <div className=\"flex items-center gap-2\">\n                                <TrendingUp className=\"w-4 h-4 text-rose-500\" />\n                                <span className=\"text-sm font-bold text-rose-400\">\n                                    {activeInvestigation.riskScore}%\n                                </span>\n                                <span className=\"text-[10px] text-slate-500 uppercase tracking-wider\">Risk</span>\n                            </div>\n                        )}\n                    </div>\n\n                    <button\n                        onClick={(e) => {\n                            e.stopPropagation();\n                            setIsMinimized(!isMinimized);\n                        }}\n                        className=\"w-10 h-10 rounded-xl bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors\"\n                    >\n                        {isMinimized ? (\n                            <ChevronUp className=\"w-4 h-4 text-slate-400\" />\n                        ) : (\n                            <ChevronDown className=\"w-4 h-4 text-slate-400\" />\n                        )}\n                    </button>\n                </div>\n            </div>\n\n            {/* Content (only shown when expanded) */}\n            <AnimatePresence>\n                {!isMinimized && (\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        className=\"h-60 overflow-hidden\"\n                    >\n                        <div className=\"grid grid-cols-3 h-full\">\n                            {/* Timeline */}\n                            <div className=\"border-r border-white/5 p-6 overflow-auto custom-scrollbar\">\n                                <h4 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                    <Clock className=\"w-3 h-3\" /> Recent Actions\n                                </h4>\n                                <div className=\"space-y-3\">\n                                    {activeInvestigation.timeline.slice(-5).reverse().map((action, i) => (\n                                        <div key={i} className=\"pb-3 border-b border-white/5 last:border-0\">\n                                            <p className=\"text-xs font-bold text-white mb-1\">\n                                                {action.action}\n                                            </p>\n                                            <p className=\"text-[10px] text-slate-500 font-mono\">\n                                                {new Date(action.timestamp).toLocaleTimeString()} â€¢ {action.tool}\n                                            </p>\n                                        </div>\n                                    ))}\n                                    {activeInvestigation.timeline.length === 0 && (\n                                        <p className=\"text-xs text-slate-600 italic\">No actions logged yet</p>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Context */}\n                            <div className=\"border-r border-white/5 p-6 overflow-auto custom-scrollbar\">\n                                <h4 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                    <Users className=\"w-3 h-3\" /> Investigation Context\n                                </h4>\n                                <div className=\"space-y-4\">\n                                    {activeInvestigation.context.suspects.length > 0 && (\n                                        <div>\n                                            <p className=\"text-[9px] text-slate-600 uppercase tracking-wider mb-2\">Suspects</p>\n                                            {activeInvestigation.context.suspects.map((suspect, i) => (\n                                                <div key={i} className=\"text-xs font-bold text-rose-400 mb-1\">\n                                                    â€¢ {suspect}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    )}\n                                    {activeInvestigation.context.transactionIds.length > 0 && (\n                                        <div>\n                                            <p className=\"text-[9px] text-slate-600 uppercase tracking-wider mb-2\">Transactions</p>\n                                            <p className=\"text-xs font-mono text-slate-400\">\n                                                {activeInvestigation.context.transactionIds.length} flagged\n                                            </p>\n                                        </div>\n                                    )}\n                                    {activeInvestigation.context.toolsUsed.length > 0 && (\n                                        <div>\n                                            <p className=\"text-[9px] text-slate-600 uppercase tracking-wider mb-2\">Tools Used</p>\n                                            <div className=\"flex flex-wrap gap-2\">\n                                                {activeInvestigation.context.toolsUsed.map((tool, i) => (\n                                                    <span key={i} className=\"px-2 py-1 bg-indigo-600/10 text-indigo-400 text-[10px] font-bold rounded border border-indigo-500/20\">\n                                                        {tool}\n                                                    </span>\n                                                ))}\n                                            </div>\n                                        </div>\n                                    )}\n                                </div>\n                            </div>\n\n                            {/* Findings & Actions */}\n                            <div className=\"p-6 overflow-auto custom-scrollbar\">\n                                <h4 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 flex items-center gap-2\">\n                                    <AlertCircle className=\"w-3 h-3\" /> Key Findings\n                                </h4>\n                                <div className=\"space-y-3 mb-6\">\n                                    {activeInvestigation.findings.map((finding, i) => (\n                                        <div key={i} className=\"flex items-start gap-2\">\n                                            <CheckCircle className=\"w-4 h-4 text-emerald-500 shrink-0 mt-0.5\" />\n                                            <p className=\"text-xs text-slate-300 leading-relaxed\">{finding}</p>\n                                        </div>\n                                    ))}\n                                    {activeInvestigation.findings.length === 0 && (\n                                        <p className=\"text-xs text-slate-600 italic\">No findings recorded yet</p>\n                                    )}\n                                </div>\n\n                                <div className=\"space-y-2\">\n                                    {activeInvestigation.status === 'active' && (\n                                        <button\n                                            onClick={pauseInvestigation}\n                                            className=\"w-full py-2 bg-amber-600/10 hover:bg-amber-600/20 text-amber-400 border border-amber-500/20 rounded-lg font-bold text-[10px] uppercase tracking-widest transition-colors\"\n                                        >\n                                            Pause Investigation\n                                        </button>\n                                    )}\n                                    <button\n                                        onClick={endInvestigation}\n                                        className=\"w-full py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-bold text-[10px] uppercase tracking-widest transition-colors\"\n                                    >\n                                        Complete & Generate Dossier\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </motion.div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/RABComparisonTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/ToolDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/UploadEvidence.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/charts/LogicalSCurve.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/components/skeletons/SkeletonComponents.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/hooks/useDossier.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/lib/DossierCompiler.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[685,688],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[685,688],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'investigation' is defined but never used.","line":259,"column":42,"nodeType":"Identifier","messageId":"unusedVar","endLine":259,"endColumn":55}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Auto-Dossier Service\n * Compiles investigation timeline into structured PDF-ready format\n */\n\nimport { Investigation } from '@/store/useInvestigation';\n\nexport interface DossierSection {\n    title: string;\n    content: string | string[];\n    subsections?: DossierSection[];\n}\n\nexport interface CompiledDossier {\n    metadata: {\n        investigationId: string;\n        title: string;\n        generatedAt: Date;\n        investigator: string;\n        riskLevel: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\n    };\n    executiveSummary: string;\n    sections: DossierSection[];\n    timeline: Array<{\n        timestamp: Date;\n        action: string;\n        tool: string;\n        result: any;\n    }>;\n    findings: string[];\n    recommendations: string[];\n}\n\nexport class DossierCompiler {\n    /**\n     * Compile investigation into court-ready dossier structure\n     */\n    static compile(investigation: Investigation): CompiledDossier {\n        const riskLevel = this.determineRiskLevel(investigation);\n        \n        return {\n            metadata: {\n                investigationId: investigation.id,\n                title: investigation.title,\n                generatedAt: new Date(),\n                investigator: 'Zenith Forensic System',\n                riskLevel\n            },\n            executiveSummary: this.generateExecutiveSummary(investigation),\n            sections: [\n                this.generateInvestigationOverview(investigation),\n                this.generateContextSection(investigation),\n                this.generateToolsUsedSection(investigation),\n                this.generateFindingsSection(investigation),\n                this.generateEvidenceChain(investigation)\n            ],\n            timeline: investigation.timeline,\n            findings: investigation.findings,\n            recommendations: this.generateRecommendations(investigation)\n        };\n    }\n\n    /**\n     * Generate markdown format for export\n     */\n    static toMarkdown(dossier: CompiledDossier): string {\n        let md = '';\n\n        // Header\n        md += `# FORENSIC INVESTIGATION DOSSIER\\n`;\n        md += `## ${dossier.metadata.title}\\n\\n`;\n        md += `---\\n\\n`;\n        \n        // Metadata\n        md += `**Investigation ID**: ${dossier.metadata.investigationId}\\n`;\n        md += `**Generated**: ${dossier.metadata.generatedAt.toLocaleString()}\\n`;\n        md += `**Risk Level**: ${dossier.metadata.riskLevel}\\n`;\n        md += `**Investigator**: ${dossier.metadata.investigator}\\n\\n`;\n        md += `---\\n\\n`;\n\n        // Executive Summary\n        md += `## Executive Summary\\n\\n`;\n        md += `${dossier.executiveSummary}\\n\\n`;\n        md += `---\\n\\n`;\n\n        // Sections\n        dossier.sections.forEach(section => {\n            md += this.sectionToMarkdown(section, 2);\n        });\n\n        // Timeline\n        md += `## Investigation Timeline\\n\\n`;\n        dossier.timeline.forEach((entry, i) => {\n            md += `### ${i + 1}. ${entry.action}\\n`;\n            md += `- **Time**: ${new Date(entry.timestamp).toLocaleString()}\\n`;\n            md += `- **Tool**: ${entry.tool}\\n`;\n            if (entry.result) {\n                md += `- **Result**: ${JSON.stringify(entry.result, null, 2)}\\n`;\n            }\n            md += `\\n`;\n        });\n\n        // Findings\n        md += `## Key Findings\\n\\n`;\n        dossier.findings.forEach((finding, i) => {\n            md += `${i + 1}. ${finding}\\n`;\n        });\n        md += `\\n`;\n\n        // Recommendations\n        md += `## Recommendations\\n\\n`;\n        dossier.recommendations.forEach((rec, i) => {\n            md += `${i + 1}. ${rec}\\n`;\n        });\n        md += `\\n`;\n\n        md += `---\\n\\n`;\n        md += `*This dossier was automatically generated by Zenith Forensic Platform*\\n`;\n\n        return md;\n    }\n\n    private static sectionToMarkdown(section: DossierSection, level: number): string {\n        let md = '';\n        const heading = '#'.repeat(level);\n        \n        md += `${heading} ${section.title}\\n\\n`;\n        \n        if (Array.isArray(section.content)) {\n            section.content.forEach(item => {\n                md += `- ${item}\\n`;\n            });\n            md += `\\n`;\n        } else {\n            md += `${section.content}\\n\\n`;\n        }\n\n        if (section.subsections) {\n            section.subsections.forEach(sub => {\n                md += this.sectionToMarkdown(sub, level + 1);\n            });\n        }\n\n        return md;\n    }\n\n    /**\n     * Generate HTML format for export\n     */\n    static toHTML(dossier: CompiledDossier): string {\n        const md = this.toMarkdown(dossier);\n        // In production, use a markdown-to-HTML library\n        // For now, basic wrapper\n        return `\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset=\"UTF-8\">\n                <title>${dossier.metadata.title} - Forensic Dossier</title>\n                <style>\n                    body { font-family: Arial, sans-serif; max-width: 800px; margin: 40px auto; padding: 20px; }\n                    h1, h2, h3 { color: #1e293b; }\n                    pre { background: #f1f5f9; padding: 10px; border-radius: 5px; }\n                    .risk-critical { color: #dc2626; font-weight: bold; }\n                    .risk-high { color: #ea580c; font-weight: bold; }\n                    .risk-medium { color: #ca8a04; font-weight: bold; }\n                    .risk-low { color: #16a34a; font-weight: bold; }\n                </style>\n            </head>\n            <body>\n                <pre>${md}</pre>\n            </body>\n            </html>\n        `;\n    }\n\n    // Helper methods\n    private static determineRiskLevel(investigation: Investigation): 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL' {\n        if (!investigation.riskScore) return 'LOW';\n        if (investigation.riskScore >= 90) return 'CRITICAL';\n        if (investigation.riskScore >= 70) return 'HIGH';\n        if (investigation.riskScore >= 40) return 'MEDIUM';\n        return 'LOW';\n    }\n\n    private static generateExecutiveSummary(investigation: Investigation): string {\n        const duration = Math.floor(\n            (new Date(investigation.updatedAt).getTime() - new Date(investigation.startedAt).getTime()) \n            / 1000 / 60\n        );\n\n        return `This investigation, titled \"${investigation.title}\", was initiated on ${new Date(investigation.startedAt).toLocaleDateString()} and ${investigation.status === 'completed' ? 'completed' : 'is currently ' + investigation.status}. The investigation involved ${investigation.timeline.length} documented actions across ${investigation.context.toolsUsed.length} forensic tools over a period of ${duration} minutes. ${investigation.context.suspects.length} suspect(s) were identified and ${investigation.findings.length} key finding(s) were documented. ${investigation.riskScore ? `The overall risk assessment indicates a ${this.determineRiskLevel(investigation)} risk level (${investigation.riskScore}%).` : ''}`;\n    }\n\n    private static generateInvestigationOverview(investigation: Investigation): DossierSection {\n        return {\n            title: 'Investigation Overview',\n            content: [\n                `Investigation ID: ${investigation.id}`,\n                `Title: ${investigation.title}`,\n                `Start Date: ${new Date(investigation.startedAt).toLocaleString()}`,\n                `Last Updated: ${new Date(investigation.updatedAt).toLocaleString()}`,\n                `Status: ${investigation.status.toUpperCase()}`,\n                `Total Actions: ${investigation.timeline.length}`,\n                `Tools Deployed: ${investigation.context.toolsUsed.join(', ') || 'None'}`,\n            ]\n        };\n    }\n\n    private static generateContextSection(investigation: Investigation): DossierSection {\n        return {\n            title: 'Investigation Context',\n            content: '',\n            subsections: [\n                {\n                    title: 'Subjects Under Investigation',\n                    content: investigation.context.suspects.length > 0 \n                        ? investigation.context.suspects \n                        : ['No suspects identified']\n                },\n                {\n                    title: 'Associated Transactions',\n                    content: investigation.context.transactionIds.length > 0\n                        ? investigation.context.transactionIds\n                        : ['No transactions flagged']\n                },\n                {\n                    title: 'Evidence References',\n                    content: investigation.context.evidenceIds.length > 0\n                        ? investigation.context.evidenceIds\n                        : ['No evidence catalogued']\n                },\n                ...(investigation.context.projectId ? [{\n                    title: 'Project Reference',\n                    content: [investigation.context.projectId]\n                }] : [])\n            ]\n        };\n    }\n\n    private static generateToolsUsedSection(investigation: Investigation): DossierSection {\n        return {\n            title: 'Forensic Tools Utilized',\n            content: investigation.context.toolsUsed.length > 0\n                ? investigation.context.toolsUsed.map((tool, i) => `${i + 1}. ${tool}`)\n                : ['No tools utilized in this investigation']\n        };\n    }\n\n    private static generateFindingsSection(investigation: Investigation): DossierSection {\n        return {\n            title: 'Key Findings',\n            content: investigation.findings.length > 0\n                ? investigation.findings.map((finding, i) => `${i + 1}. ${finding}`)\n                : ['No findings documented']\n        };\n    }\n\n    private static generateEvidenceChain(investigation: Investigation): DossierSection {\n        return {\n            title: 'Chain of Evidence',\n            content: `This section documents the chronological chain of investigative actions taken. Each action is timestamped and includes the tool used and results obtained. See Investigation Timeline section for detailed breakdown.`\n        };\n    }\n\n    private static generateRecommendations(investigation: Investigation): string[] {\n        const recommendations: string[] = [];\n\n        if (investigation.riskScore && investigation.riskScore >= 70) {\n            recommendations.push('URGENT: Escalate to senior investigation team for immediate review');\n        }\n\n        if (investigation.context.suspects.length > 0) {\n            recommendations.push('Conduct thorough background checks on all identified suspects');\n        }\n\n        if (investigation.context.transactionIds.length > 5) {\n            recommendations.push('Consider full audit of related financial records');\n        }\n\n        if (investigation.context.toolsUsed.includes('Satellite Verification')) {\n            recommendations.push('Request additional satellite imagery for historical comparison');\n        }\n\n        if (investigation.findings.length > 0) {\n            recommendations.push('Prepare legal briefing based on documented findings');\n        }\n\n        if (recommendations.length === 0) {\n            recommendations.push('Continue monitoring and update investigation as new evidence emerges');\n        }\n\n        return recommendations;\n    }\n\n    /**\n     * Download dossier as file\n     */\n    static download(dossier: CompiledDossier, format: 'markdown' | 'html' = 'markdown') {\n        const content = format === 'markdown' ? this.toMarkdown(dossier) : this.toHTML(dossier);\n        const blob = new Blob([content], { type: format === 'markdown' ? 'text/markdown' : 'text/html' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `${dossier.metadata.investigationId}_${dossier.metadata.title.replace(/\\s+/g, '_')}.${format === 'markdown' ? 'md' : 'html'}`;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/lib/ForensicEventBus.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":154,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3611,3614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3611,3614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Forensic Event Bus - Central nervous system for cross-module communication\n * Enables reactive, context-aware investigation workflows\n */\n\n// Payload interfaces for each event type\nexport interface TransactionFlaggedPayload {\n  transactionId: string;\n  amount: number;\n  reason: string;\n  riskScore: number;\n}\n\nexport interface VendorSuspiciousPayload {\n  vendorId: string;\n  vendorName: string;\n  flags: string[];\n  riskLevel: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\n}\n\nexport interface ProjectStalledPayload {\n  projectId: string;\n  projectName: string;\n  stallReason: string;\n  daysStalled: number;\n}\n\nexport interface OffshoreTransferPayload {\n  transferId: string;\n  amount: number;\n  destination: string;\n  origin: string;\n  flagged: boolean;\n}\n\nexport interface SanctionHitPayload {\n  entityId: string;\n  entityName: string;\n  sanctionList: string;\n  matchScore: number;\n}\n\nexport interface SatelliteDiscrepancyPayload {\n  location: { lat: number; lng: number };\n  expectedValue: number;\n  actualValue: number;\n  discrepancyType: string;\n}\n\nexport interface AssetDiscoveredPayload {\n  assetId: string;\n  assetType: string;\n  value: number;\n  location: string;\n}\n\nexport interface InvestigationStartedPayload {\n  investigationId: string;\n  title: string;\n  context: Record<string, unknown>;\n}\n\nexport interface InvestigationEndedPayload {\n  investigationId: string;\n  outcome: 'SUCCESS' | 'INCONCLUSIVE' | 'ESCALATED';\n  summary: string;\n}\n\n// Union type for all payloads\nexport type ForensicEventPayload = \n  | TransactionFlaggedPayload\n  | VendorSuspiciousPayload\n  | ProjectStalledPayload\n  | OffshoreTransferPayload\n  | SanctionHitPayload\n  | SatelliteDiscrepancyPayload\n  | AssetDiscoveredPayload\n  | InvestigationStartedPayload\n  | InvestigationEndedPayload;\n\nexport type ForensicEventType =\n  | 'TRANSACTION_FLAGGED'\n  | 'VENDOR_SUSPICIOUS'\n  | 'PROJECT_STALLED'\n  | 'OFFSHORE_TRANSFER'\n  | 'SANCTION_HIT'\n  | 'SATELLITE_DISCREPANCY'\n  | 'ASSET_DISCOVERED'\n  | 'INVESTIGATION_STARTED'\n  | 'INVESTIGATION_ENDED';\n\nexport interface ForensicEvent {\n  type: ForensicEventType;\n  payload: ForensicEventPayload;\n  timestamp: number;\n  source?: string;\n}\n\nexport interface EventListener {\n  id: string;\n  callback: (event: ForensicEvent) => void;\n}\n\nclass ForensicEventBus {\n  private listeners: Map<ForensicEventType, EventListener[]> = new Map();\n  private eventHistory: ForensicEvent[] = [];\n  private maxHistorySize = 100;\n\n  /**\n   * Subscribe to a specific event type\n   */\n  subscribe(\n    eventType: ForensicEventType,\n    callback: (event: ForensicEvent) => void,\n    id?: string\n  ): string {\n    const listenerId = id || `listener_${Date.now()}_${Math.random()}`;\n    const listener: EventListener = { id: listenerId, callback };\n\n    if (!this.listeners.has(eventType)) {\n      this.listeners.set(eventType, []);\n    }\n\n    this.listeners.get(eventType)!.push(listener);\n    return listenerId;\n  }\n\n  /**\n   * Unsubscribe from all events or specific event type\n   */\n  unsubscribe(listenerId: string, eventType?: ForensicEventType) {\n    if (eventType) {\n      const listeners = this.listeners.get(eventType);\n      if (listeners) {\n        this.listeners.set(\n          eventType,\n          listeners.filter((l) => l.id !== listenerId)\n        );\n      }\n    } else {\n      // Remove from all event types\n      this.listeners.forEach((listeners, type) => {\n        this.listeners.set(\n          type,\n          listeners.filter((l) => l.id !== listenerId)\n        );\n      });\n    }\n  }\n\n  /**\n   * Publish an event to all subscribers\n   */\n  publish(type: ForensicEventType, payload: any, source?: string) {\n    const event: ForensicEvent = {\n      type,\n      payload,\n      timestamp: Date.now(),\n      source,\n    };\n\n    // Add to history\n    this.eventHistory.unshift(event);\n    if (this.eventHistory.length > this.maxHistorySize) {\n      this.eventHistory.pop();\n    }\n\n    // Notify listeners\n    const listeners = this.listeners.get(type);\n    if (listeners) {\n      listeners.forEach((listener) => {\n        try {\n          listener.callback(event);\n        } catch (error) {\n          console.error(\n            `Error in event listener for ${type}:`,\n            error\n          );\n        }\n      });\n    }\n\n    // Log event in development\n    if (process.env.NODE_ENV === 'development') {\n      console.log(\n        `[ForensicEventBus] ${type}`,\n        payload,\n        source ? `from ${source}` : ''\n      );\n    }\n  }\n\n  /**\n   * Get event history (useful for debugging and investigation timeline)\n   */\n  getHistory(eventType?: ForensicEventType): ForensicEvent[] {\n    if (eventType) {\n      return this.eventHistory.filter((e) => e.type === eventType);\n    }\n    return [...this.eventHistory];\n  }\n\n  /**\n   * Clear event history\n   */\n  clearHistory() {\n    this.eventHistory = [];\n  }\n}\n\n// Singleton instance\nexport const forensicBus = new ForensicEventBus();\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/lib/RecommendationEngine.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'findings' is assigned a value but never used.","line":24,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":117,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":117,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4122,4125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4122,4125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Smart Tool Recommendations Engine\n * Algorithm to suggest next forensic actions based on investigation context\n */\n\nimport { Investigation } from '@/store/useInvestigation';\n\nexport interface ToolRecommendation {\n    toolName: string;\n    toolPath: string;\n    reason: string;\n    priority: 'high' | 'medium' | 'low';\n    icon: string;\n}\n\nexport class RecommendationEngine {\n    /**\n     * Analyze investigation context and suggest next tools\n     */\n    static getRecommendations(investigation: Investigation | null): ToolRecommendation[] {\n        if (!investigation) return [];\n\n        const recommendations: ToolRecommendation[] = [];\n        const { context, timeline, findings, riskScore } = investigation;\n\n        // Rule 1: If suspects identified but no sanction screening done\n        if (\n            context.suspects.length > 0 &&\n            !context.toolsUsed.includes('Sanction Screening')\n        ) {\n            recommendations.push({\n                toolName: 'Sanction Screening',\n                toolPath: '/legal/screening',\n                reason: `${context.suspects.length} suspect(s) identified - verify against watchlists`,\n                priority: 'high',\n                icon: 'ShieldAlert'\n            });\n        }\n\n        // Rule 2: If project context exists but no satellite verification\n        if (\n            context.projectId &&\n            !context.toolsUsed.includes('Satellite Verification')\n        ) {\n            recommendations.push({\n                toolName: 'Satellite Verification',\n                toolPath: '/forensic/satellite',\n                reason: 'Verify reported progress with LEO imagery',\n                priority: 'medium',\n                icon: 'Satellite'\n            });\n        }\n\n        // Rule 3: If high risk score but no asset tracing\n        if (\n            riskScore &&\n            riskScore > 70 &&\n            !context.toolsUsed.includes('Asset Recovery Tracer')\n        ) {\n            recommendations.push({\n                toolName: 'Asset Recovery Tracer',\n                toolPath: '/forensic/recovery',\n                reason: `High risk score (${riskScore}%) - trace capital flows`,\n                priority: 'high',\n                icon: 'Network'\n            });\n        }\n\n        // Rule 4: If transactions flagged but no nexus analysis\n        if (\n            context.transactionIds.length > 0 &&\n            !context.toolsUsed.includes('Vendor Nexus')\n        ) {\n            recommendations.push({\n                toolName: 'Vendor Nexus',\n                toolPath: '/forensic/nexus',\n                reason: `Analyze relationships between ${context.transactionIds.length} flagged transactions`,\n                priority: 'medium',\n                icon: 'Network'\n            });\n        }\n\n        // Rule 5: If predictive AI not used yet\n        if (!context.toolsUsed.includes('Predictive AI') && context.projectId) {\n            recommendations.push({\n                toolName: 'Predictive AI',\n                toolPath: '/forensic/analytics/predictive',\n                reason: 'Forecast project stalling & leakage risk',\n                priority: 'low',\n                icon: 'TrendingUp'\n            });\n        }\n\n        // Rule 6: If investigation has >5 actions, suggest dossier generation\n        if (timeline.length >= 5 && !context.toolsUsed.includes('Legal Dossier')) {\n            recommendations.push({\n                toolName: 'Legal Dossier',\n                toolPath: '/forensic/assets',\n                reason: `${timeline.length} actions logged - ready for court-ready report`,\n                priority: 'medium',\n                icon: 'FileText'\n            });\n        }\n\n        // Sort by priority\n        const priorityOrder = { high: 0, medium: 1, low: 2 };\n        return recommendations.sort((a, b) => \n            priorityOrder[a.priority] - priorityOrder[b.priority]\n        );\n    }\n\n    /**\n     * Check if a specific tool should be highlighted based on recent events\n     */\n    static shouldHighlightTool(\n        toolPath: string,\n        recentEvents: Array<{ type: string; payload: any }>\n    ): boolean {\n        const eventToolMap: Record<string, string[]> = {\n            'VENDOR_SUSPICIOUS': ['/legal/screening', '/forensic/nexus'],\n            'PROJECT_STALLED': ['/forensic/satellite', '/forensic/analytics/predictive'],\n            'SATELLITE_DISCREPANCY': ['/forensic/recovery', '/forensic/assets'],\n            'OFFSHORE_TRANSFER': ['/forensic/recovery', '/forensic/assets'],\n            'TRANSACTION_FLAGGED': ['/investigate', '/forensic/flow'],\n            'SANCTION_HIT': ['/forensic/assets', '/legal/aml'],\n            'ASSET_DISCOVERED': ['/forensic/assets']\n        };\n\n        return recentEvents.some(event => \n            eventToolMap[event.type]?.includes(toolPath)\n        );\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/store/useInvestigation.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[299,302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[299,302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[332,335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[332,335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[671,674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[671,674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Investigation Session Store\n * Tracks the entire forensic investigation workflow as a cohesive session\n */\n\nimport { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\nexport interface InvestigationAction {\n  timestamp: Date;\n  action: string;\n  tool: string;\n  result?: any;\n  metadata?: Record<string, any>;\n}\n\nexport interface Investigation {\n  id: string;\n  title: string;\n  startedAt: Date;\n  updatedAt: Date;\n  status: 'active' | 'paused' | 'completed';\n  context: {\n    projectId?: string;\n    caseId?: string;\n    transactionIds: string[];\n    suspects: string[];\n    evidenceIds: string[];\n    toolsUsed: string[];\n    [key: string]: any;\n  };\n  timeline: InvestigationAction[];\n  findings: string[];\n  riskScore?: number;\n}\n\ninterface InvestigationState {\n  activeInvestigation: Investigation | null;\n  investigations: Investigation[];\n  \n  // Actions\n  startInvestigation: (title: string, context?: Partial<Investigation['context']>) => string;\n  endInvestigation: () => void;\n  pauseInvestigation: () => void;\n  resumeInvestigation: (id: string) => void;\n  \n  addAction: (action: Omit<InvestigationAction, 'timestamp'>) => void;\n  addTransaction: (txId: string) => void;\n  addSuspect: (name: string) => void;\n  addEvidence: (evidenceId: string) => void;\n  addFinding: (finding: string) => void;\n  updateRiskScore: (score: number) => void;\n  \n  getInvestigation: (id: string) => Investigation | undefined;\n  clearAllInvestigations: () => void;\n}\n\nexport const useInvestigation = create<InvestigationState>()(\n  persist(\n    (set, get) => ({\n      activeInvestigation: null,\n      investigations: [],\n\n      startInvestigation: (title, context = {}) => {\n        const id = `INV-${Date.now()}`;\n        const investigation: Investigation = {\n          id,\n          title,\n          startedAt: new Date(),\n          updatedAt: new Date(),\n          status: 'active',\n          context: {\n            transactionIds: [],\n            suspects: [],\n            evidenceIds: [],\n            toolsUsed: [],\n            ...context,\n          },\n          timeline: [],\n          findings: [],\n        };\n\n        set((state) => ({\n          activeInvestigation: investigation,\n          investigations: [...state.investigations, investigation],\n        }));\n\n        return id;\n      },\n\n      endInvestigation: () => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        set((state) => ({\n          activeInvestigation: null,\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? { ...inv, status: 'completed' as const, updatedAt: new Date() }\n              : inv\n          ),\n        }));\n      },\n\n      pauseInvestigation: () => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        set((state) => ({\n          activeInvestigation: { ...activeInvestigation, status: 'paused' },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? { ...inv, status: 'paused' as const, updatedAt: new Date() }\n              : inv\n          ),\n        }));\n      },\n\n      resumeInvestigation: (id) => {\n        const investigation = get().investigations.find((inv) => inv.id === id);\n        if (!investigation) return;\n\n        set((state) => ({\n          activeInvestigation: { ...investigation, status: 'active' },\n          investigations: state.investigations.map((inv) =>\n            inv.id === id\n              ? { ...inv, status: 'active' as const, updatedAt: new Date() }\n              : inv\n          ),\n        }));\n      },\n\n      addAction: (action) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        const newAction: InvestigationAction = {\n          ...action,\n          timestamp: new Date(),\n        };\n\n        const toolName = action.tool;\n        const updatedContext = {\n          ...activeInvestigation.context,\n          toolsUsed: Array.from(\n            new Set([...activeInvestigation.context.toolsUsed, toolName])\n          ),\n        };\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            timeline: [...activeInvestigation.timeline, newAction],\n            context: updatedContext,\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? {\n                  ...inv,\n                  timeline: [...inv.timeline, newAction],\n                  context: updatedContext,\n                  updatedAt: new Date(),\n                }\n              : inv\n          ),\n        }));\n      },\n\n      addTransaction: (txId) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        const updatedTxIds = Array.from(\n          new Set([...activeInvestigation.context.transactionIds, txId])\n        );\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            context: {\n              ...activeInvestigation.context,\n              transactionIds: updatedTxIds,\n            },\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? {\n                  ...inv,\n                  context: {\n                    ...inv.context,\n                    transactionIds: updatedTxIds,\n                  },\n                  updatedAt: new Date(),\n                }\n              : inv\n          ),\n        }));\n      },\n\n      addSuspect: (name) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        const updatedSuspects = Array.from(\n          new Set([...activeInvestigation.context.suspects, name])\n        );\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            context: {\n              ...activeInvestigation.context,\n              suspects: updatedSuspects,\n            },\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? {\n                  ...inv,\n                  context: {\n                    ...inv.context,\n                    suspects: updatedSuspects,\n                  },\n                  updatedAt: new Date(),\n                }\n              : inv\n          ),\n        }));\n      },\n\n      addEvidence: (evidenceId) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        const updatedEvidence = Array.from(\n          new Set([...activeInvestigation.context.evidenceIds, evidenceId])\n        );\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            context: {\n              ...activeInvestigation.context,\n              evidenceIds: updatedEvidence,\n            },\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? {\n                  ...inv,\n                  context: {\n                    ...inv.context,\n                    evidenceIds: updatedEvidence,\n                  },\n                  updatedAt: new Date(),\n                }\n              : inv\n          ),\n        }));\n      },\n\n      addFinding: (finding) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            findings: [...activeInvestigation.findings, finding],\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? {\n                  ...inv,\n                  findings: [...inv.findings, finding],\n                  updatedAt: new Date(),\n                }\n              : inv\n          ),\n        }));\n      },\n\n      updateRiskScore: (score) => {\n        const { activeInvestigation } = get();\n        if (!activeInvestigation) return;\n\n        set((state) => ({\n          activeInvestigation: {\n            ...activeInvestigation,\n            riskScore: score,\n            updatedAt: new Date(),\n          },\n          investigations: state.investigations.map((inv) =>\n            inv.id === activeInvestigation.id\n              ? { ...inv, riskScore: score, updatedAt: new Date() }\n              : inv\n          ),\n        }));\n      },\n\n      getInvestigation: (id) => {\n        return get().investigations.find((inv) => inv.id === id);\n      },\n\n      clearAllInvestigations: () => {\n        set({ activeInvestigation: null, investigations: [] });\n      },\n    }),\n    {\n      name: 'forensic-investigation-storage',\n    }\n  )\n);\n","usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/store/useProject.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/types/next-auth.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/utils/constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/utils/holographicData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/Arief/Newzen/zenith-lite/frontend/src/utils/recoveryMock.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
